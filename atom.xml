<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Kaero Zhi</title>
  
  <subtitle>伪吴散骑常侍支</subtitle>
  <link href="https://kaerozhi.com/atom.xml" rel="self"/>
  
  <link href="https://kaerozhi.com/"/>
  <updated>2024-07-25T06:30:48.163Z</updated>
  <id>https://kaerozhi.com/</id>
  
  <author>
    <name>Kaero Zhi</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hexo 里面的 category_map</title>
    <link href="https://kaerozhi.com/playground/web/category-map-in-hexo/"/>
    <id>https://kaerozhi.com/playground/web/category-map-in-hexo/</id>
    <published>2024-07-24T13:36:00.000Z</published>
    <updated>2024-07-25T06:30:48.163Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>如诸君所见，本站的分类名，比如文字、游历、案例，都是中文。但我又有个需求，希望每个分类能有一些特别的小设计，最简单的当然是设置单独的 CSS class。代码如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">&quot;category-&lt;%= page.category %&gt;&quot;</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>按照以上代码，再进入本站的「文字」分类页，对应的 body class 将会是 <code>category-文字</code>，在 CSS 中并不能用。所以我们需要在 <code>config.yml</code> 中指定 category_map，给中文的分类设置一个对应的英文名。这个英文名默认用来生成每篇文章的链接地址，毕竟中文并不通行于国际互联网，我们把这个英文利用起来，岂不美哉？</p><p>如何取得此值呢？尝试之后，在列表页中比较简单，改进代码如下：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">&quot;category-&lt;%= config.category_map[page.category] %&gt;&quot;</span>&gt;</span></span><br><span class="line">...</span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>刷新文字列表页面，如愿得到 <code>category-writings</code> 的类名，Nice！</p><p>但对应到具体的文章，则远比列表页复杂，用 <code>config.category_map[post.categories]</code> 是无法获取文章分类的，因为一篇文章可能对应好几个分类。而官方提供的 <code>list_categories()</code> 函数局限性太强，完全没法达到我们的预期。</p><p>用 console.log() 查看 <code>site.categories.data</code>，其中一个分类的内容如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">_Document <span class="punctuation">&#123;</span></span><br><span class="line">  name<span class="punctuation">:</span> &#x27;文字&#x27;<span class="punctuation">,</span></span><br><span class="line">  id<span class="punctuation">:</span> &#x27;cknidonz40000q816bzz340ez&#x27;<span class="punctuation">,</span></span><br><span class="line">  slug<span class="punctuation">:</span> <span class="punctuation">[</span>Getter<span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  path<span class="punctuation">:</span> <span class="punctuation">[</span>Getter<span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  permalink<span class="punctuation">:</span> <span class="punctuation">[</span>Getter<span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  posts<span class="punctuation">:</span> <span class="punctuation">[</span>Getter<span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  length<span class="punctuation">:</span> <span class="punctuation">[</span>Getter<span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><p>可见其类型是 object。</p><p>了解其结构之后就比较简单了，在 <code>archive-post.ejs</code> 中增加以下代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;% post.<span class="property">categories</span>.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">data</span>) &#123; %&gt;</span><br><span class="line">  cate-&lt;%= config.<span class="property">category_map</span>[data.<span class="property">name</span>] %&gt;</span><br><span class="line">&lt;% &#125;) %&gt;</span><br></pre></td></tr></table></figure><p>以本文为例，其得到的结果是 <code>cate-playground</code> / <code>cate-web</code> 两个分类名，问题解决。</p><p>如果不嫌麻烦，tag_map 也可以通过同样的思路解决来处理。</p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article</summary>
      
    
    
    
    <category term="玩艺" scheme="https://kaerozhi.com/categories/playground/"/>
    
    <category term="网站" scheme="https://kaerozhi.com/categories/playground/web/"/>
    
    
    <category term="Hexo" scheme="https://kaerozhi.com/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>夜游盘门</title>
    <link href="https://kaerozhi.com/tours/night-walking-in-panmen/"/>
    <id>https://kaerozhi.com/tours/night-walking-in-panmen/</id>
    <published>2024-07-22T12:28:00.000Z</published>
    <updated>2024-07-25T13:33:23.831Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>最近持续高温，纵然想仰天大笑出门去，奈何当头烈日似熔炉。吾辈顺应天时，只能昼伏夜出。上周去了虎丘，这周就去盘门。</p><p>说走就走，吃完晚饭五点来钟，骑上心爱的小电驴，一路无话，下车时光景还亮着。进景区，发现排队的游客不少，大门外边的停车场停满了。可惜瑞光塔已经上锁，不让爬了，否则还能上去拍拍夕阳。</p><p><a href="image-20240725203252460.jpeg" title="仰拍瑞光塔" class="gallery-item"><img src="image-20240725203252460.jpeg" alt="仰拍瑞光塔"><span class="image-caption">仰拍瑞光塔</span></a></p><p>还在四瑞堂前晃荡着，只见大股游人过来，并不停留，直往堂后涌去。听这些人的意思，堂后的水池上快亮灯了，有表演。我们跟着进去，发现丽景楼前的台阶上早已经坐满了人，除了湖面上的灯饰，并不见有人准备演出。可能也就是什么喷泉灯光秀之类？心下暗笑：这些人也太爱排队了。</p><p><a href="image-20240725204241998.jpeg" title="于四瑞堂阑干一侧" class="gallery-item"><img src="image-20240725204241998.jpeg" alt="于四瑞堂阑干一侧"><span class="image-caption">于四瑞堂阑干一侧</span></a></p><p>顺着湖边散步，只见游人越聚越多，连湖边的廊桥上都站满了占位的游客，照都不好拍了，不由好奇到底是什么表演？刚走到放生池畔，忽闻音乐响起，几个人拔足狂奔，往丽景楼下趋下。陶小婧就说不如去看看，于是便一同过去了。</p><p>走到丽景楼前，早已水泻不通了，几个胆大的不管不顾，跨坐在栏杆之上。我从人群后面踮起脚，只见水面上是一个大平台，五个姑娘着敦煌飞天装扮，随着伴奏翩翩起舞。陶小婧身材娇小，在人群中辗转腾挪，愣是没找到一个能观赏的立身之所，只能摇摇头退守在旁。</p><p><a href="image-20240725205334043.jpeg" title="人缝中拍的一张" class="gallery-item"><img src="image-20240725205334043.jpeg" alt="人缝中拍的一张"><span class="image-caption">人缝中拍的一张</span></a></p><p>看了半晌，倒也没什么出奇的，于是和陶小婧绕过丽景楼。天色渐暗，正是摄影家所谓的蓝调时间，这些天连日大晴，夜空湛蓝澄澈，更无一丝云翳，衬得园内的灯光越发好看。</p><p><a href="image-20240725210249589.jpeg" title="丽景楼四面挂满灯笼，熠然可百余盏。" class="gallery-item"><img src="image-20240725210249589.jpeg" alt="丽景楼四面挂满灯笼，熠然可百余盏。"><span class="image-caption">丽景楼四面挂满灯笼，熠然可百余盏。</span></a></p><p><a href="image-20240725210538323.jpeg" title="夜市悬灯" class="gallery-item"><img src="image-20240725210538323.jpeg" alt="夜市悬灯"><span class="image-caption">夜市悬灯</span></a><br><a href="image-20240725211248428.jpeg" title="园内的各种灯光" class="gallery-item"><img src="image-20240725211248428.jpeg" alt="园内的各种灯光"><span class="image-caption">园内的各种灯光</span></a></p><p>楼西的广场上开着夜市，都是烧烤果汁与各色小吃，但这个点的游客大多刚吃完晚饭，无人光顾，显得颇为冷清。</p><p>正走着，忽然丽景楼两侧涌出来大队人马，瞬间就把广场填满了，想必是楼前的演出刚刚结束。这么一看，此处的人气倒是远胜于上周的虎丘，看来白天出不了门，大家都只能转战夜场了。</p><p><a href="image-20240725211353085.jpeg" title="吴国大旗迎风招展，盘门城楼高高耸立。" class="gallery-item"><img src="image-20240725211353085.jpeg" alt="吴国大旗迎风招展，盘门城楼高高耸立。"><span class="image-caption">吴国大旗迎风招展，盘门城楼高高耸立。</span></a></p><p>盘门城楼下几个小超市门庭若市，迥非夜市可比，虽然饱腹来游，吃夜宵嫌早，但这般天气，此时仍不免汗出如浆，于是大人买水，小朋友买冰淇淋，又排起了长队。只不过溢价虚高，一瓶农夫山泉都要五块钱，直接比外头翻了个倍，何其黑心哉！</p><p>上城楼去，天风吹拂，真真是乘凉的好去处，楼上的几个石桌石椅都坐满了。徐徐绕行，楼下瓮城里摆着几面大鼓，一个女孩操起鼓棒，敲得有模有样，倒也有趣。</p><p><a href="image-20240725212526548.jpeg" title="陶小婧在盘门城楼上" class="gallery-item"><img src="image-20240725212526548.jpeg" alt="陶小婧在盘门城楼上"><span class="image-caption">陶小婧在盘门城楼上</span></a></p><p>城楼一侧有几个拍照墙，都是暴富发财的主题，也算是应景了。</p><p>下城楼，穿过水帘洞，又顺着湖边的长廊游览了一遭。盘门也来过三五次了，虽然不错，但和虎丘想必，终究差了不少，想不到换晚上来，却是改头换面，又胜过虎丘了。</p><p><a href="image-20240725213127826.jpeg" title="湖面灯光" class="gallery-item"><img src="image-20240725213127826.jpeg" alt="湖面灯光"><span class="image-caption">湖面灯光</span></a></p><p>下次带小朋友再来耍耍。</p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article</summary>
      
    
    
    
    <category term="游历" scheme="https://kaerozhi.com/categories/tours/"/>
    
    
    <category term="苏州" scheme="https://kaerozhi.com/tags/%E8%8B%8F%E5%B7%9E/"/>
    
    <category term="盘门" scheme="https://kaerozhi.com/tags/%E7%9B%98%E9%97%A8/"/>
    
  </entry>
  
  <entry>
    <title>工业园赠肥困</title>
    <link href="https://kaerozhi.com/writings/shici/industrial-park/"/>
    <id>https://kaerozhi.com/writings/shici/industrial-park/</id>
    <published>2024-06-16T16:00:00.000Z</published>
    <updated>2024-07-25T12:55:41.783Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>工业园池塘，老柳不成行。新枝垂郁绿，雏鸭团嫩黄。呱呱时一鸣，回音触四墙。灰水泥墙体，方盒子楼房。风扇吹棉丝，女工列机床。混乱办公室，铁釜烟悠飏。碎金燃素壁，五点半阳光。</p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article</summary>
      
    
    
    
    <category term="文字" scheme="https://kaerozhi.com/categories/writings/"/>
    
    <category term="诗词" scheme="https://kaerozhi.com/categories/writings/shici/"/>
    
    
    <category term="五言古诗" scheme="https://kaerozhi.com/tags/%E4%BA%94%E8%A8%80%E5%8F%A4%E8%AF%97/"/>
    
  </entry>
  
  <entry>
    <title>花山的支道林</title>
    <link href="https://kaerozhi.com/tours/huashan-and-zhidaolin/"/>
    <id>https://kaerozhi.com/tours/huashan-and-zhidaolin/</id>
    <published>2024-06-09T05:36:00.000Z</published>
    <updated>2024-07-25T02:26:32.011Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>昨天爬花山，特地去访了一趟支公洞。</p><p>自花山鸟道入山，谒元代大接引佛阁，过翠岩寺，至踞虎关，关口有亭，匾书「幽寤」二字。此处正当岔道口，分出三条线路，所以亭边立了指路牌，指向四个目的地。从左边岔路往西就是支公洞了，遂左转。</p><p>傍路多种竹，竹叶当风，嘶嘶作响，一时凉生肩臂，惬意非常。快到般若亭，碰见两位游客往回走，停步借问，支公洞还有多远？对面的女士先笑起来，说根本没洞，光看着一堆大石头就回来了，不用去。我说了声谢谢，但去还是要去的，谁让我就姓支呢。</p><p>支公洞的标识牌竖在一个宽约二十步的平台上。此处不高，离山下停车场或不足百米，林木幽深，遮蔽天日，观景则无缘矣，倘若是支道林那样的高僧在此开坛说法，倒也平敞。</p><p>平台左侧是一条登山的野路，或可通往山顶莲花峰。后面确乎然就是一堆巨大的石头，青苔满布，藤蔓间出，真真的天生顽石，皱漏瘦透一字不沾。若请园林里的假山师傅评点，只能摇手掉头而去，不行不行，全无半点堆叠的章法。</p><p><a href="image-20240611095904269.jpeg" title="支公洞外景" class="gallery-item"><img src="image-20240611095904269.jpeg" alt="支公洞外景"><span class="image-caption">支公洞外景</span></a></p><p>踏落叶而前，只见最外面的石头上刻着「公洞」二字。其上本有一字，或被人故意铲去，看此字的轮廓，非「林」非「支」，倒像是「隐」或者「德」，又或是个繁体的「陳」字，眉头一皱，支公洞的产权似乎大有蹊跷。景区管理有方，非要把支道林这个 IP 做实了不可，那也只能痛下黑手，万万留他不得。否则苍岩古字，游客指而疑之，又将何以作答？</p><p><a href="image-20240611095939247.jpeg" title="某公洞" class="gallery-item"><img src="image-20240611095939247.jpeg" alt="某公洞"><span class="image-caption">某公洞</span></a></p><p>公洞两边还有四个小字，右题「正德」，左镌「己巳」。查了一下，己巳是正德四年，公元1509，恰是沈周在世的最后一年。此石右上方还肩着另一块石头，题曰「巨瞻」。巨瞻者，看起来好大之谓也。巨瞻旁边空白处似有小字，可惜风化严重，漶漫莫辨。这两块石头上面又架起来另一块大石头，石面上题曰「五丈峰」。</p><p><a href="image-20240611100307149.jpeg" title="巨瞻" class="gallery-item"><img src="image-20240611100307149.jpeg" alt="巨瞻"><span class="image-caption">巨瞻</span></a></p><p><a href="Pasted%20image%2020240611100459.png" title="五丈峰" class="gallery-item"><img src="Pasted%20image%2020240611100459.png" alt="五丈峰"><span class="image-caption">五丈峰</span></a></p><p>绕行其侧，顺石磴上几级台阶，往前几步，就看到几块石头的罅隙之间露出一个黑咕隆咚的孔穴来。穴可半人高，枯叶成堆，石壁生苔，都不知上一次有人避居其中，距今又有几许年辰？抚石临穴，倒像是站在空调的出风口，一股凉气嗖嗖外涌。俯身猫腰，不三四步已入其内，内部也不大，估摸着就五六平米。地面早经平整过，铺了几方石砖，颜色驳杂。北向凹陷处砌石作台，若要高僧登坐其上，似有磕碰石壁之虞，高僧的头皮又无头发预警，恐怕不太妙也。台边一个陶盆里供着几支红花，长茎大朵，枯荣莫辨，不知真假。</p><p>王鏊姑蘇志云：「支遁冬居石室，夏隐别峰。」若是此处石室，消暑倒是极妙，但冬天百窍生风，保温约等于零，晋朝又没有先进的鹅绒保暖科技，想来与冰窟相去不远。况于此布道，也就摆得下八九个蒲团，再多就真个摩肩接踵，措置不开了。比照虎丘的千人石，场面差了几何。但换个角度，支道林的朋友圈远胜竺道生，没准走的是精英路线。何况石室外面也有平台，谷中又有翠岩寺，千人大会也不是办不成。</p><p>这个石室右侧还有石壁隔出的两处更小的空间，虽然两室一厅听上去是好配置，但若以长期生活的实际来考量，似乎一室一厅，再搭配一个储物与简单料理兼顾的多功能空间来得更恰当。</p><p>支道林有八关斋诗三首，有小序云：</p><blockquote><p>间与何骠骑期，当为合八关斋。以十月二十二日，集同意者在吴县土山墓下。三日清晨为斋始，道士白衣凡二十四人，清和肃穆，莫不静畅。至四日朝，众贤各去。余既乐野室之寂，又有掘药之怀，遂便独住。于是乃挥手送归，有望路之想。静拱虚房，悟外身之真；登山采药，集岩水之娱。遂援笔染翰，以慰二三之情。</p></blockquote><p>二十四个人的集会，持续了十三天。林公意犹未尽，送别之余，又独自流连了数日，然后写了三首诗，寄赠此次集会的好友。</p><p>这次斋会大概发生在咸康八年。当年六月，晋成帝病笃，何充议立成帝之子，但成帝两个儿子年幼，于是庾冰说国赖长君，主张立成帝同母弟司马岳，二者针锋相对，最后司马岳嗣位，是为康帝。何充以此出镇京口，始任骠骑将军。 次年十一月，庾冰出镇武昌，助庾翼北伐，何充被召回建康，此后一直在中枢辅政。</p><p>何充居宰相，临朝正色，以社稷为己任。世说有一则小故事：</p><blockquote><p>王、劉與深公共看何驃騎，驃騎看文書不顧之。王謂何曰：「我今故與深公來相看，望卿擺撥常務，應對共言，哪得方低頭看此邪？」何曰：「我不看此，卿等何以得存？」諸人以爲佳。</p></blockquote><p>深公即竺法深，是王敦的弟弟，何充辅政时已经六十多岁，归隐峁山了。此处作林公似更合理。桓温有个差不多的故事：</p><blockquote><p>桓大司馬乘雪欲獵，先過王、劉諸人許。真長見其裝束單急，問：「老賊欲持此何作？」桓曰：「我若不為此，卿輩亦那得坐談？」</p></blockquote><p>虽然文武殊途，但勤于政事，二人可谓同调，就连演出的配角都是一拨人。</p><p>所以八关斋从十月二十二日开始，至十一月四日结束，前后十三日，何充辅政后恐无暇与会。所以只有何充出镇京口的咸康八年，也即公元342年底，有这个机会。</p><p>苏州诸山多岩石，土山墓下不知今为何处。八关斋诗第三首中有句云「解带长陵坡，婆娑清川右」，虎丘倒是符合条件。白马涧也有川流映带，但是不是土山，我还没有去过，不敢妄下定论。</p><p>支道林在苏州的遗迹甚多，虎丘有养鹤涧，大阳山有文殊禅寺，加上此处的支公洞，花山麓谷之间的翠岩寺，登上莲花峰循山脊往北，又有放鹤亭。翠岩寺内又有归鹤楼，想必是好事之徒附会而来。</p><p>按世说：</p><blockquote><p>支公好鹤。住剡东峁山。有人遗其双鹤，少时翅长欲飞。支意惜之，乃铩其翮。鹤轩翥不复能飞，乃反顾翅垂头，视之如有懊丧意。林曰：“既有凌霄之姿，何肯为人作耳目近玩！”养令翮成，置使飞去。</p></blockquote><p>则支道林养鹤放鹤，都在峁山，峁山即今绍兴新昌县东仰山。这几处与鹤有关的景点，大抵是明清的苏州人利用文化霸权，恶意抢注知名 IP 罢了。</p><p>花山对面的白马涧，据说也是支道林的遗迹。</p><p>还是世说：</p><blockquote><p>支道林常养数匹马。或言：「道人畜马不韵。」支曰：「贫道重其神骏。」</p></blockquote><p>魏晋风流，兵家常为士人所鄙，蓄马爱马，殊非韵事，所以支道林养马，就有人非议，林公的回答也很帅气。当然养马也不是没有前辈的垂范，杜预云，「王武子有马癖，和長舆有钱癖。」又自云「左传癖」。张岱说得好：「人无癖不可与交」，可见三者都是足以自豪的事情。</p><p>高僧传也记了支道林养马的事情，文字稍有参差：</p><blockquote><p>既而收迹剡山，毕命林泽。人尝有遗遁马者，遁爱而养之。时或有讥之者，遁曰：「爱其神骏，聊复畜耳。」</p></blockquote><p>这个「聊复畜尔」就是随便搞搞，不要太当真，显得不够理直气壮，就不怎么帅气了。但蓄马养鹤，都记在归隐剡山之后，如此一来，连白马涧的产权也岌岌可危了。</p><p>不过支道林仍与苏州关系匪浅，高僧传说他「家世事佛，早悟非常之理。隐居馀杭山……年二十五出家」。余杭山即大阳山的古称，又称秦余杭山，阳山山巅至今还有「秦余积雪」的刻字。阳山文殊禅寺，相传就是支道林创立，寺后崖壁，有王鏊沈周题字。</p><p>360年，谢安出仕，先入桓温幕府，后以弟丧去职，复起任吴兴太守，吴兴也就是今天的湖州。这些履历的具体年份不明，但支道林辞别晋哀帝是，谢安听说他准备东归剡山，遂致书相招：</p><blockquote><p>思君日积，计辰倾迟。知欲还剡自治，甚以怅然。人生如寄耳，顷风流得意之事，殆为都尽，终日戚戚，触事惆怅，唯迟君来，以晤言消之，一日当千载耳。此多山，县闲静，差可养疾，事不异剡，而医药不同。必思此缘，副其积想也。</p></blockquote><p>信中特意提起医药，有理由推断晚年的支道林身体不好。回信今已不存，但高僧传的记载，让我们对二人的情谊有更深切的了解：</p><blockquote><p>遁先经馀姚坞山中住，至于名辰，犹还坞中。或问其意，答云：「谢安在昔，数来见，辄移旬日。今触情举目，莫不兴想。」后病甚，移还坞中。以晋太和元年闰四月四日，终于所住，春秋五十有三。即窆于坞中，厥冢存焉。</p></blockquote><p>登上花山的莲花峰，然后经放鹤亭，循山脊野路至贺九岭普济道观，路途艰险，既疲且殆。到道观刚过四点，正好是闭门的时间，和道士在门口聊了几句，遂告辞。</p><p>顺龙池路折回停车的花山景区，看见路旁草甸上有人搭帐篷。山阴日暮，风吹过树林和野花，两只小狗在草地上追逐盘旋，大人架起桌椅喝着咖啡聊天，两个小孩拿着网兜蹲在水渠旁。我问他们有没有收获，他们兴奋地把桶子侧过来，露出桶底的浑水，「我们抓到了小鱼，还有大龙虾！」</p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">静拱虚房，悟外身之真；登山采药，集岩水之娱。</summary>
    
    
    
    <category term="游历" scheme="https://kaerozhi.com/categories/tours/"/>
    
    
    <category term="苏州" scheme="https://kaerozhi.com/tags/%E8%8B%8F%E5%B7%9E/"/>
    
    <category term="花山" scheme="https://kaerozhi.com/tags/%E8%8A%B1%E5%B1%B1/"/>
    
    <category term="支道林" scheme="https://kaerozhi.com/tags/%E6%94%AF%E9%81%93%E6%9E%97/"/>
    
  </entry>
  
  <entry>
    <title>姑苏环城漫步</title>
    <link href="https://kaerozhi.com/tours/walk-around-the-ancient-gusu/"/>
    <id>https://kaerozhi.com/tours/walk-around-the-ancient-gusu/</id>
    <published>2023-07-27T13:31:27.000Z</published>
    <updated>2023-07-30T13:13:27.123Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h2 id="缘起">缘起</h2><p>越绝书云：<em>吴大城，周四十七里二百一十步二尺。陆门八，其二有楼。水门八。南面十里四十二步五尺，西面七里百一十二步三尺，北面八里二百二十六步三尺，东面十一里七十九步一尺。阖庐所造也。吴郭周六十八里六十步。</em></p><p>吴地记则云：<em>阖闾城，周敬王六年伍子胥筑。大城周回四十二里三十步，小城八里二百六十步。</em></p><p>清代的苏州人顾震涛对家乡的热爱溢于辞表，在吴门表隐中又增加了许多普通人关注不到的数字：<em>周四十五里，长五千六百五丈，高二丈八尺，厚一丈八尺，楼六座，垛三千五十一个。</em></p><p>虽然不知道古里与今里的换算比例如何，宋代的吴地记与战汉之间的越绝书规模已略有不同，越绝书中的吴大城，东面最长，南次之，北又次之，西面最短，是个不规则的梯形，而今天的苏州古城则与吴地记年代接近的平江图基本一致，是南北长而东西短的长方形。所以说苏州自建城以来，虽然城址从未更易，但城墙的覆盖范围应该还是动过的。</p><p>按照两步路上网友共享的<a href="https://www.2bulu.com/track/t-c1dA39t2Ld3p%252FR2KBg5Tzw%253D%253D.htm">轨迹</a>，绕城一周，约 16.8 公里，以每小时五公里的配速，大概要花三个半小时。我和陶小婧走走拍拍停停，夏天酷热，今年的高温又格外不正常，所以每次只能走两三个小时，足足走了四趟才走完。</p><span id="more"></span><h2 id="注意事项">注意事项</h2><p>环城步道的配置非常完善，平均五百米左右就能找到一个公共卫生间，自动售卖机则更多，一般卫生间附近总会有一个。比如齐门公园内的这个卫生间，自动售卖机就立在门外左侧。</p><p><a href="DSC2902.jpg" title="耦园东入口外的售卖机" class="gallery-item"><img src="DSC2902.jpg" alt="耦园东入口外的售卖机"><span class="image-caption">耦园东入口外的售卖机</span></a><br><a href="DSC2586.jpg" title="齐门附近的公共卫生间" class="gallery-item"><img src="DSC2586.jpg" alt="齐门附近的公共卫生间"><span class="image-caption">齐门附近的公共卫生间</span></a></p><p>有的售卖机还提供热饮 <em>（不确定是否全部）</em>，秋冬之际转凉，健步途中喝一罐热饮，暖彻心扉，多么美好。现在还是夏天，我们就没有尝试了。当然，售卖机的价格比便利店贵，标准的农夫山泉三块钱一瓶，可以参考。</p><p><a href="DSC2589.jpg" title="天冷了还有暖饮供应，可谓贴心。" class="gallery-item"><img src="DSC2589.jpg" alt="天冷了还有暖饮供应，可谓贴心。"><span class="image-caption">天冷了还有暖饮供应，可谓贴心。</span></a></p><p>护城河畔散落着众多公园，而步道则像一条串绳，将这些公园连在一起，所以经常能看见公园的健身区域，还有锻炼休闲的老年群体。</p><p><a href="DSC2592.jpg" title="齐门公园内的健身区域" class="gallery-item"><img src="DSC2592.jpg" alt="齐门公园内的健身区域"><span class="image-caption">齐门公园内的健身区域</span></a></p><p>步道的每个入口几乎都立了禁止遛狗的警示牌，狗狗很可爱，但如果犬主不提高自身的觉悟，那确实还是禁掉的好。除此之外，还有禁止游泳和垂钓的牌子。</p><p><a href="DSC2593.jpg" title="禁止遛狗" class="gallery-item"><img src="DSC2593.jpg" alt="禁止遛狗"><span class="image-caption">禁止遛狗</span></a></p><h2 id="平门">平门</h2><p>因为住在城北，所以每次进城，不是走人民路过平门桥，就是走齐门北大街过齐门桥。不过毕竟还是平门桥更多一点，姑且自平门始。</p><p>吴地记云：<em>平门，北面有水陆通毗陵。子胥平齐大军从此门出，故号平门。东北三里，有殷贤臣申公巫咸坟，亦号巫门。西北二里有吴偏将军孙武坟。西北三里有酱醋城，汉刘濞筑。东北三里有颍川太守陆宏坟。</em></p><p>毗陵即常州，越绝书云：<em>毗陵，故为延陵，吴季子所居</em>，从平门出发是不错的。</p><p>巫咸大概是一个上古时期负责为王室占卜的巫祝氏族，不太可能在当时的吴越活动，所以葬于此处的申公更可能是『吴越春秋』中的申公巫臣：<em>「寿梦」二年，楚之亡大夫申公巫臣适吴，以为行人。教吴射御，导之伐楚。楚庄王怒，使子反将，败吴师。二国从斯结雠。于是吴始通中国而与诸侯为敌。</em></p><p>申公巫臣可谓伍子胥的大前辈，一样的生为楚人，却反过来助吴伐楚，大大的楚奸，并且封地都同样在申<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>。虽然巫臣叛楚要比伍子胥奔吴狗血得多，但我们都知道孙武和伍子胥有可能是同一个人，巫臣没准也和伍子胥共享了一部分故事原型。</p><p>孙武坟现已辟为孙武纪念园，与文征明墓毗邻。从孙武纪念园到平门，按照现在的里程有 4.8 公里，若这样换算，宋代的一里岂不等于现在的 2.4 公里？所以这个二里大概是不对的，对照越绝书的说法：<em>巫门外大冢，吴王客齐孙武冢也，去县十里。善为兵法。</em> 十里与现在的 4.8 公里就差不多了。</p><p>至于这位颍川太守陆宏，则应该是吴中四姓之一陆氏的先祖，准确一点应写做陆闳。陆闳的事迹见后汉书独行列传，只有寥寥几句话，因为传主其实是他的孙子陆续：<em>「陆续」祖父闳，字子春，建武中为尚书令。美姿貌，喜著越布单衣，光武见而好之，自是常敕会稽郡献越布</em>。</p><p>巫臣与陆闳的墓，以孙武墓为标尺，大概都在白荡湖以北，那边一大片都是高尔夫球场，平民百姓应该无由得见了。</p><h3 id="平门桥">平门桥</h3><p><a href="DSC2372.jpg" title="远望平门桥" class="gallery-item"><img src="DSC2372.jpg" alt="远望平门桥"><span class="image-caption">远望平门桥</span></a></p><p>苏州城一横一竖两条主干道，干将路横穿东西，人民路纵贯南北，所以同样是北门，人民路上的平门桥可比偏东北的齐门桥豪华不少。</p><p><a href="DSC2363.jpg" title="平门桥" class="gallery-item"><img src="DSC2363.jpg" alt="平门桥"><span class="image-caption">平门桥</span></a></p><p>从平门桥西眺，会先看到平门水闸，也修得颇为壮观，若是初来乍到，恐怕容易误会那便是平门的城楼。</p><p><a href="DSC2367.jpg" title="平门水闸" class="gallery-item"><img src="DSC2367.jpg" alt="平门水闸"><span class="image-caption">平门水闸</span></a></p><p>自平门桥入城，很快就到北寺塔。从北寺塔路口右转是桃花坞大道，十五分钟可步行至唐寅故居。去年年底开始计划迁居苏州，在城里看房子，差点就买在桃花坞了，陶小婧至今嗟叹不已。</p><h3 id="平门城楼">平门城楼</h3><p>平门城楼去水闸大概两百米，大概也更高一些，城楼上的匾额题着「齐泰平和」。或许是因为齐门已经没了，苏州人心中有愧，不能忘情，所以就放在一起说了。</p><p><a href="DSC2392.jpg" title="齐泰平和" class="gallery-item"><img src="DSC2392.jpg" alt="齐泰平和"><span class="image-caption">齐泰平和</span></a></p><p>苏州火车站与平门隔河相望，大屋顶颇为惹眼。虽说与贝聿铭的苏博一种风格，实则与上海世博会中国馆如出一辙，我不太喜欢，无论是远观还是近赏，这个屋顶都太重太方正了，实在是颇为压抑。</p><p><a href="DSC2382.jpg" title="苏州站近在咫尺" class="gallery-item"><img src="DSC2382.jpg" alt="苏州站近在咫尺"><span class="image-caption">苏州站近在咫尺</span></a><br><a href="DSC2387.jpg" title="陶小婧与火车站" class="gallery-item"><img src="DSC2387.jpg" alt="陶小婧与火车站"><span class="image-caption">陶小婧与火车站</span></a></p><p>火车站南广场立着一座高大的雕像，我非常后知后觉，今年才刚知道那雕像是范仲淹。来苏州之前，对苏州的认知不是吴越争霸就是吴门书画，沈周文征明唐伯虎之类的，来苏州之后才知道范仲淹在苏州的地位有多高。</p><h3 id="桃花坞公园">桃花坞公园</h3><p>苏州的公园都很别致，亭阁廊桥，花草树木，一般都比其他城市多一些楚楚风致，颇有园林的余韵。</p><p><a href="DSC2398.jpg" title="小桥" class="gallery-item"><img src="DSC2398.jpg" alt="小桥"><span class="image-caption">小桥</span></a><br><a href="DSC2411.jpg" title="树木清幽" class="gallery-item"><img src="DSC2411.jpg" alt="树木清幽"><span class="image-caption">树木清幽</span></a><br><a href="DSC2395.jpg" title="岸边的石头亦颇不俗" class="gallery-item"><img src="DSC2395.jpg" alt="岸边的石头亦颇不俗"><span class="image-caption">岸边的石头亦颇不俗</span></a></p><p>照理说离阊门这么近，桃花坞应该很热闹才对，唐伯虎诗云：</p><blockquote><p>世间乐土是吴中，中有阊门更擅雄。翠袖三千楼上下，黄金百万水西东。五更市卖何曾绝，四远方言总不同。若使画师描作画，画师应道画难工。</p></blockquote><p>但在姑苏城里，这一带应该算是落后的片区，没有知名的旅游景点，配套也不好，人气颇为冷清。唐寅故居开发了好几年，总听说就要开了，但就是没开起来，我们之所以放弃这边的房子，也是嫌商业不够发达，生活可能不便利。</p><p>桃花坞最有名的自然是桃花庵歌：</p><blockquote><p>桃花坞里桃花庵，桃花庵里桃花仙。桃花仙人种桃树，又折花枝当酒钱。酒醒只在花前坐，酒醉还须花下眠。花前花后日复日，酒醉酒醒年复年。不愿鞠躬车马前，但愿老死花酒间。车尘马足贵者趣，酒盏花枝贫者缘。若将富贵比贫贱，一在平地一在天。若将贫贱比车马，他得驱驰我得闲。世人笑我忒疯颠，我笑世人看不穿。不见五陵豪杰墓，无酒无花锄作田。</p></blockquote><p>考其始末，则见于吴门表隐：<em>桃花坞，宋太师章楶所构，多栽桃李，郡人游春于此，时称北章。</em></p><p>东坡有一阕特别有名的水龙吟：<em>春色三分，二分尘土，一分流水。细看来，不是杨花，点点是离人泪。</em> 题作「次韵章质夫杨花词」，这位章质夫就是桃花坞的初代主人宋太师章楶。楶本为福建南平人，及老，以资政殿学士、中太一宫使致仕，居苏州，为江苏毘陵章氏始祖。毘是毗的异体字，毗陵即延陵，吴季子的封地，今为常州。</p><p>不过作为公园，人少一些倒更合我的胃口，相比胥门、盘门还有东园的喧闹景象，这里除了偶尔跑步经过的锻炼者，可谓是人迹罕至。</p><h3 id="平民区">平民区</h3><p>平门往西一带的民居都比较矮小破旧，巷弄里出来活动的人也很少。游览时遇到一位居于此处的大姐，她笑着说这里就是苏州的贫民区，平时没什么人来。</p><p>帝都俗语云：<em>东富西贵南贫北贱</em>，走完一圈，我怀疑苏州城也有类似的格局，齐门也很落寞的样子，不过好歹建了别墅区，多少摆脱了几分贫贱的嫌疑。只不过作为刚刚落脚的外来人口，又不好妄下评断了。</p><p><a href="DSC2422.jpg" title="绿化带就当作篱笆了" class="gallery-item"><img src="DSC2422.jpg" alt="绿化带就当作篱笆了"><span class="image-caption">绿化带就当作篱笆了</span></a><br><a href="DSC2424.jpg" title="一户人家" class="gallery-item"><img src="DSC2424.jpg" alt="一户人家"><span class="image-caption">一户人家</span></a></p><p>以前去日本，那边的人家，即便是临街傍路，地方再逼仄，家家户户门口窗前都种着花草，颇可以窥见日本人生活的情趣与追求，国内是比较少见的。但苏州就比较多，即便是看上去破败寥落的这一带，花花草草也随处可见，逛起来饶有兴味。</p><p><a href="DSC2432.jpg" title="种花艺草" class="gallery-item"><img src="DSC2432.jpg" alt="种花艺草"><span class="image-caption">种花艺草</span></a><br><a href="DSC2429.jpg" title="一朵红色的蔷薇" class="gallery-item"><img src="DSC2429.jpg" alt="一朵红色的蔷薇"><span class="image-caption">一朵红色的蔷薇</span></a></p><p>大概和公园里的花木楼阁一样，园艺盆景也是由于园林产业发达，风尚流行，普通人家添置起来也较为便捷实惠。说起来皮市街离平门齐门都不远，偶尔去逛逛也不错的。</p><h2 id="齐门">齐门</h2><p>齐门的修筑伴着一个凄怆惨切的故事。</p><p>吴越春秋：<em>「阖闾」复谋伐齐，齐子使女为质于吴，吴王因为太子波聘齐女。女少思齐，日夜号泣，因乃为病。阖闾乃起北门，名曰望齐门，令女往游其上。女思不止，病日益甚，乃至殂落。女曰：“令死者有知，必葬我于虞山之巅，以望齐国。”阖闾伤之，正如其言，乃葬虞山之巅。</em></p><p>吴地志补了一个结尾：<em>后葬常熟海隅山东南岭，与仲雍、固章等坟相近。葬毕，化白龙冲天而去，今号为母冢坟。</em></p><p>从齐门城上北眺，现在已经很难见到虞山，更不用说遥远的齐国，面对空茫杳渺的无尽平原，少女的悲伤可想而知。</p><p>吴大概和楚一样崇巫好傩，所以死亡往往伴随着荒怪陆离的传说，齐女化白龙冲天而去，阖闾也有个宝贝女儿，据吴越春秋：<em>吴王有女滕玉，因谋伐楚，与夫人及女会蒸鱼，王前尝半而与女，女怒曰：“王食鱼辱我，不忘久生。”乃自杀。阖闾痛之，葬于国西阊门。外凿池积土，文石为椁，题凑为中，金鼎玉杯、银樽珠襦之宝，皆以送女。乃舞白鹤于吴市中，令万民随而观之，还使男女与鹤俱入羡门，因发机以掩之。杀生以送死，国人非之。</em></p><p>羡门即墓门。龙翔虞山，鹤舞吴市，公主们的气性都很大。阖闾掩杀白鹤与随观的男女万民为女儿殉葬，更是残暴不仁，所以吴越春秋随后写道：<em>湛卢之剑，恶阖闾之无道也，乃去而出，水行如楚</em>。</p><p>齐女葬于虞山之后，那位名为波或者终离的吴太子也很快死去，背后是否还有一段荀奉倩一般伤感的爱情故事，我们又不得而知了。</p><p>齐门桥北接齐门北大街，南即齐门路，齐门路下去就是苏州博物馆，苏州博物馆与拙政园忠王府相邻，再走两条巷子又是狮子林，这些名胜又无需赘述了。</p><h3 id="齐门城墙">齐门城墙</h3><p>自齐门桥下往东数百米，可以看到一段城墙，就是修复过的齐门城墙，高可十余米。拾级而上，薰风吹荡，荒草滋生，虽然一路都配了石凳，但除了一个溜娃的长者，行人寥寥。</p><p><a href="DSC2600.jpg" title="拾级而上，可以登上齐门城墙" class="gallery-item"><img src="DSC2600.jpg" alt="拾级而上，可以登上齐门城墙"><span class="image-caption">拾级而上，可以登上齐门城墙</span></a></p><p><a href="DSC2606.jpg" title="城墙上杂草丛生，显然并非游客热衷之地" class="gallery-item"><img src="DSC2606.jpg" alt="城墙上杂草丛生，显然并非游客热衷之地"><span class="image-caption">城墙上杂草丛生，显然并非游客热衷之地</span></a></p><p>苏州的风情，离不开小桥流水，粉墙黛瓦，自然也还有铺遍巷弄的青石板路。只要留心，就能在一块块的铺地石中发现原有的碑文刻字。我们在城墙上发现的这块郭桂记界，书者娴于魏碑，雍容端正，庸非俗手。只是岁月悠悠，此地今在何处？又属何人？后来者如我已不可考，当年的郭姓主人恐怕也无从预见。</p><p><a href="DSC2629.jpg" title="郭桂记界" class="gallery-item"><img src="DSC2629.jpg" alt="郭桂记界"><span class="image-caption">郭桂记界</span></a></p><p>城墙的修复工作相当考究，用于瞭望的垛口与用于射击的射孔，其开口的角度都由内向外收缩，易守难攻，高度还原。</p><p><a href="DSC2610.jpg" title="城墙上的射孔" class="gallery-item"><img src="DSC2610.jpg" alt="城墙上的射孔"><span class="image-caption">城墙上的射孔</span></a></p><p>城墙下面是护城河，原是大运河水网的一部分，船旅往来如织。而今水运的重要性早已一落千丈，河面上剩下的就只有偶尔通过的游船与清污船了。</p><p><a href="DSC2623.jpg" title="护城河对岸" class="gallery-item"><img src="DSC2623.jpg" alt="护城河对岸"><span class="image-caption">护城河对岸</span></a></p><p>城墙内侧原本是工厂区，随着城区去工业化的滚滚大潮，生产线早已迁出，但改造进程似乎并不理想。其中一栋将原有的红砖墙依照苏州的式样，刷了白色，开了圆形漏窗，做成了酒店或者民宿，其他几栋似乎仍在空置。</p><p><a href="DSC2604.jpg" title="城墙内侧的工厂遗址" class="gallery-item"><img src="DSC2604.jpg" alt="城墙内侧的工厂遗址"><span class="image-caption">城墙内侧的工厂遗址</span></a></p><p><a href="DSC2619.jpg" title="辟为民宿的一栋楼" class="gallery-item"><img src="DSC2619.jpg" alt="辟为民宿的一栋楼"><span class="image-caption">辟为民宿的一栋楼</span></a></p><p>工厂的东侧是一片别墅区，恐怕定价不菲。</p><p><a href="DSC2627.jpg" title="毗邻工厂原址的别墅区" class="gallery-item"><img src="DSC2627.jpg" alt="毗邻工厂原址的别墅区"><span class="image-caption">毗邻工厂原址的别墅区</span></a></p><p>自城墙东端下，有「臣心拱北」的石牌坊，原是顾嗣立题在齐门城楼上的匾额，所以此处极可能是齐门原址。</p><p><a href="DSC2640.jpg" title="臣心拱北" class="gallery-item"><img src="DSC2640.jpg" alt="臣心拱北"><span class="image-caption">臣心拱北</span></a></p><p>牌坊往南是一道直通拙政园的观景长廊，或可一游。</p><h3 id="望齐台">望齐台</h3><p>望齐台就在齐门桥边，傍着护城河，修筑于平地之上。</p><p>台本写作臺，上从高，下从室，也就是高处的房子。说文云：<em>台，观四方而高者</em>。吕氏春秋的注本里，高诱又细化了标准：<em>积土四方高丈曰臺，不方者曰观曰阙</em>。所以我们所熟知的鹿台铜雀台，都是可以登高望远甚至上通神灵的地方。此处平地起台，已是大大的不典，在城墙上都望不见齐国，这里就不用提了。</p><p><a href="DSC2351.jpg" title="平齐水韵" class="gallery-item"><img src="DSC2351.jpg" alt="平齐水韵"><span class="image-caption">平齐水韵</span></a></p><p>望齐台的匾额上题着「平齐水韵」，和平门一样兼顾平齐二门。前方的牌坊两侧是一副对联：</p><blockquote><p>齐女适吴难忘东鲁<br>越臣行贾隐居古陶</p></blockquote><p>上联写齐女，下联写范蠡。勾践卧薪尝胆，三千越甲竟吞吴，苏州人肯定是讨厌勾践的，但对泛舟五湖的范蠡似乎印象还可以。陶邑在今天的山东，即菏泽市定陶区，当时是极为发达的商业大都会，范蠡弃官去陶邑经商，从北边的齐门出发，算是比较合理的推断。</p><p>据说范蠡后来也曾在齐国为相，齐门齐门，齐女别家以此终，范蠡远游以此始，人生的轨迹总是各不相同。</p><p><a href="DSC2348.jpg" title="越臣行贾隐居古陶" class="gallery-item"><img src="DSC2348.jpg" alt="越臣行贾隐居古陶"><span class="image-caption">越臣行贾隐居古陶</span></a></p><p>苏州的园艺太发达了，夏天也时不时见到红叶。</p><p><a href="DSC2355.jpg" title="夏天的红叶" class="gallery-item"><img src="DSC2355.jpg" alt="夏天的红叶"><span class="image-caption">夏天的红叶</span></a></p><h2 id="娄门">娄门</h2><p>自齐门东，至古城的东北角，望糖坊湾桥，再右转，又一刻钟可至娄门。这一段草木幽深，与民居相隔绝，在环城步道中是很特殊的，若不看对岸的建筑，足以发山林之逸想。</p><div class="justified-gallery"><p><a href="DSC2681.jpg" title="野花" class="gallery-item"><img src="DSC2681.jpg" alt="野花"><span class="image-caption">野花</span></a><br><a href="DSC2684.jpg" title="古木" class="gallery-item"><img src="DSC2684.jpg" alt="古木"><span class="image-caption">古木</span></a></p></div><p>吴地志云：<em>娄门本号疁门，东南，秦时有古疁县，至汉王莽改为娄县。</em></p><p>范成大吴郡志：<em>娄县，在昆山县东北三里，一村落也，盖昆山旧治。或云在汉为疁县，后避钱镠讳，改昆山。案吴志，张昭拜辅吴将军，封娄侯，则县之为娄旧矣。汉书云改于王莽时。</em> 则娄县就是昆山的旧称，东吴时曾作为张昭的封地。</p><p><a href="DSC2685.jpg" title="游船" class="gallery-item"><img src="DSC2685.jpg" alt="游船"><span class="image-caption">游船</span></a></p><h3 id="娄上楼">娄上楼</h3><p>齐门城墙上已没有城楼，娄门则是有城楼的。娄门桥外接园区，内通拙政园和平江路，是进城游览的必经之路。在苏州八门当中，娄门城楼的存在感数一数二。</p><p><a href="DSC2708.jpg" title="娄门城楼" class="gallery-item"><img src="DSC2708.jpg" alt="娄门城楼"><span class="image-caption">娄门城楼</span></a></p><p><a href="DSC2718.jpg" title="江海扬华" class="gallery-item"><img src="DSC2718.jpg" alt="江海扬华"><span class="image-caption">江海扬华</span></a></p><p>娄门城楼上题着「江海扬华」的匾额。按吴门表隐：<em>六门题字，太史顾嗣立书。阊曰：气通阊阖。胥曰：姑胥拥翠。盘曰：龙蟠水陆。娄曰：江海扬华。齐曰：臣心拱北。葑曰：溪流清映。</em></p><p>嗣立，字侠君，又字闾丘，号秀野。清康熙八年生，父予咸，顺治十八年以哭庙案失官居家。哭庙案遇难者中最著名者，即号称第一才子的金圣叹，当日江南诸生，一时俱死者十八人，唯一人死里逃生<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>，即予咸也。嗣立少年失学，有理由怀疑其童稚时，予咸已郁郁而终。嗣立至二十岁始学诗，好宾客，立酒人社，嗜酒豪饮，人称酒王酒帝，真乃狂生，在当时算得上大逆不道了。其四十生日自述诗云：<em>爱客常储千日酒，读书曾破万黄金</em>。康熙五十一年，嗣立四十三岁，终于进士及第，选庶吉士，散馆改补知县，看起来仕途不顺，然后便因病告归，至康熙六十一年卒。有秀野草堂诗集。</p><p>现在保留城楼的几座城门，娄门盘门阊门，依然沿用嗣立的题字，而平门与相门，据吴门表隐的记录，当时反而是没有城楼的。</p><p>和其他城楼不同，娄门的城楼上开发了商业，经营起了茶馆，所以人气也殊胜其余。茶馆叫做娄上楼，可谓巧而当矣。</p><p>两侧有联：</p><blockquote><p>翠堤朱阁金阙玉虹风物四时收眼底<br>吴苑越台秦疁汉渎江山万里换人间</p></blockquote><p><a href="DSC2721.jpg" title="娄上楼" class="gallery-item"><img src="DSC2721.jpg" alt="娄上楼"><span class="image-caption">娄上楼</span></a></p><p><a href="DSC2705.jpg" title="娄门城楼下的茶馆" class="gallery-item"><img src="DSC2705.jpg" alt="娄门城楼下的茶馆"><span class="image-caption">娄门城楼下的茶馆</span></a></p><p>城楼下面是一片商业街区，不知是因为我们来的时间不对，还是受之前疫情的影响，总之看上去非常冷清。两只野猫从草丛中疾迸而出，互相追逐，迅捷如电，忽而又滚作一团，发出低沉凄厉的嘶吼声。</p><p><a href="DSC2724.jpg" title="城楼下的商业休闲区" class="gallery-item"><img src="DSC2724.jpg" alt="城楼下的商业休闲区"><span class="image-caption">城楼下的商业休闲区</span></a></p><h3 id="东园">东园</h3><p>从桥下穿过娄门桥，就看到娄隅增辉的牌坊，牌坊南侧便是东园入口。</p><p><a href="DSC2753.jpg" title="娄隅增辉" class="gallery-item"><img src="DSC2753.jpg" alt="娄隅增辉"><span class="image-caption">娄隅增辉</span></a></p><p>几位阿姨爷叔聚在牌坊下的亭子里唱昆曲，一位阿姨立于亭中，披黑色格子罩衫，系黄色丝巾，举着话筒，咿呀呜呕，声音有些沙哑，唱什么听不太懂，却也别有风味。</p><p>东园原为苏州动物园，动物园已于 2016 年迁往吴中的上方山，不过入口处「苏州动物园」的铭牌却仍然保留着。</p><p><a href="DSC2757.jpg" title="苏州动物园" class="gallery-item"><img src="DSC2757.jpg" alt="苏州动物园"><span class="image-caption">苏州动物园</span></a></p><p><a href="DSC2838.jpg" title="路牌" class="gallery-item"><img src="DSC2838.jpg" alt="路牌"><span class="image-caption">路牌</span></a></p><p>东园规模颇大，风景亦佳。去时恰逢六一，小朋友们群聚嬉戏，热闹非凡。动物园的遗存亦不少，水面上的黑天鹅随处可见，还有一只鸳鸯，形单影只，孑孓孤泳，等我们绕着湖走了半圈，却发现另一只和天鹅一起留在岸边，羽毛艳丽，大概是雄的。</p><p><a href="DSC2791.jpg" title="天鹅与鸳鸯和谐共处" class="gallery-item"><img src="DSC2791.jpg" alt="天鹅与鸳鸯和谐共处"><span class="image-caption">天鹅与鸳鸯和谐共处</span></a></p><p><a href="DSC2802.jpg" title="没有走丢的丑小鸭" class="gallery-item"><img src="DSC2802.jpg" alt="没有走丢的丑小鸭"><span class="image-caption">没有走丢的丑小鸭</span></a></p><p>考东园沿革，其地本蒋氏桃园。主人蒋炳章，字季和，号留庵，世为苏州望族。光绪二十四年中进士，掌安徽书院，三十三年授翰林院编修。辛亥革命后，又先后任江苏省议会副议长，江苏教育会总干事，1930 年去世。</p><p>炳章热心公益，创办了苏州电气厂，并主持士绅辟金门、平门。今日的草桥小学、草桥中学，即蒋炳章与王同愈于 1906 年共同创立。</p><p>蒋氏故宅即在仓街东北，人称蒋圃，又称蒋园，广三十余亩，大门约在今天的仓街 156 号。炳章后来移居蒹葭巷，蒋园由长子伯年继承。</p><p>伯年将蒋园改造为中西合璧的庄园，引入法国水蜜桃名种，在园内广为种植。其肉分黄、白二色，号为「黄金」「白玉」，一时风靡姑苏。据金季鹤的文章，蒋园水蜜桃价格昂贵，当时基层公务员的月薪不过区区十元，而一元仅能买蒋园水蜜桃两斤。今昔比照，现在的阳山水蜜桃固不足论矣。</p><p>蒋伯年又在 1933 年 8 月筹建了国内首家汽车学校，名为「私立振吴汽车工业补习学校」。学校设汽车驾驶科、机械修理科，附设内河汽船行使科，皆属国内首创。汽车学校就设在蒋家桃园内，校舍则租用仓街 119 号十余间房屋。</p><p>振吴汽车学校的开幕典礼轰动了苏州全城。仓街本在城东北一隅，商业寥落，连吃食店也没有，俗有饿煞仓街之说。开幕之日，引用记者彼时的报道：<em>一时仓街通衢，车水马龙，大有山阴道上之概。</em> <sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup> 此后蒋园乘势步入全盛，在苏州几乎是家喻户晓。</p><p>蒋伯年于 1945 年病故，蒋园逐渐荒废。七十年代，蒋园被市园林局划为树木基地，再之后改造成苏州动物园，直至 2016 年迁出。</p><p>东园的南部，儿童游乐设施很多，实属溜娃胜地，大人划船也是不错的，更何况免费，有机会必定重游。</p><p><a href="DSC2830.jpg" title="六一儿童节" class="gallery-item"><img src="DSC2830.jpg" alt="六一儿童节"><span class="image-caption">六一儿童节</span></a></p><p><a href="DSC2848.jpg" title="丛林探险入口" class="gallery-item"><img src="DSC2848.jpg" alt="丛林探险入口"><span class="image-caption">丛林探险入口</span></a></p><p>吴楚俗多淫祀，史传不及备载，读吴门表隐，亦半为祠庙。东园入口不远，小坡下有蛇王庙小石亭，香火颇盛。或传即方孝孺庙，孝孺族诛，蛇王或当日避讳之言也。</p><p>清嘉录云：<em>蛇王庙在娄门城下，向在城外，地名毒蛇墩。凡捕蛙者，祭献不绝，明末移建今所。</em></p><h3 id="耦园东侧">耦园东侧</h3><p>自东园南门出，就到了耦园的东入口。游耦园很多次，但这个入口可能还是第一次见，门前高树扶疏，流波荡漾，长桥一抹，烟瓦万家。凭栏顾盼，风柳轻扬，哀蝉四起，盘桓良久，仿佛置身于城市之外，却要问是水乡何处了。</p><p>当然，这次只是稍作停留，并没有买票进去。</p><p><a href="DSC2878.jpg" title="耦园入口" class="gallery-item"><img src="DSC2878.jpg" alt="耦园入口"><span class="image-caption">耦园入口</span></a></p><p>城曲草堂后面有收费的摇橹体验，屡次经过，未尝一试。</p><p><a href="DSC2853.jpg" title="摇橹码头" class="gallery-item"><img src="DSC2853.jpg" alt="摇橹码头"><span class="image-caption">摇橹码头</span></a></p><p>这次倒是好好地旁观了一次：舟人披蓑戴笠，形象倒是很还原，船体窄小，可对坐五六人。船自西面的码头出发，转至东南角的听橹阁楼下折返，舟人欲逞其能事，中间转角处速度极快，上下颠簸，势若疯狂，纵使来回不过十几分钟，但敏感一些的体质不免吐在当场。在岸边暗自庆幸，还好从来不曾花钱买这等罪受。</p><p><a href="DSC2867.jpg" title="耦园摇橹" class="gallery-item"><img src="DSC2867.jpg" alt="耦园摇橹"><span class="image-caption">耦园摇橹</span></a></p><h2 id="相门">相门</h2><p>吴地志云：<em>匠门，又名干将门。东南水陆二路，今陆路废。</em> 是相亦通匠也，今干将路从相门桥出，倒是古今传承如一的。</p><p>吴郡志云：<em>曰将门者，吴王使干将于此铸宝剑。今谓之匠，声之变也。</em> 则将而为匠，匠复为相，声之变而又变者也。</p><p>干将铸剑故事，吴地志又云：<em>出海道，通大莱，沿松江下沪渎，阖闾使干将于此铸剑，材五山之精，合五金之英，使童女三百人祭炉神，鼓橐，金银不销，铁汁不下。其妻莫邪曰：铁汁不下，宁有计？干将曰：先师欧冶铸剑之颖不销，亲铄耳，以然成物，吾何难哉！可女人聘炉神，当得之。莫邪闻语，投入炉中，铁汁出，遂成二剑。雄号干将，作龟文；雌号莫耶，鳗文。余铸得三千，并号作龟文剑。干将进雄剑于吴王，而藏雌剑。时时悲鸣，忆其雄也。</em></p><p>大莱不知现为何处？松江沪渎今日已经反客为主，压倒苏州。干将铸剑，据此就在相门外。仆少时有诗，正用其事云：</p><blockquote><p>昔者金精與鐵英，古來埋沒淄泥輕。良工一旦鑿山得，飛焰三年淬血成。封以玉函牛斗決，投於幽水蛟龍鳴。陸離之佩今何益，拂拭神鋒傷我情。</p></blockquote><p>吴越春秋亦载铸剑故事，大同小异，莫邪并未以身投炉：<em>于是干将妻乃断发剪爪，投于炉中，使童女童男三百人鼓橐装炭，金铁乃濡。遂以成剑，阳曰干将，阴曰莫耶，阳作龟文，阴作漫理。</em> 这样的结果就合理多了。</p><p>吴门表隐亦是匠而非相：<em>匠门自狮子口直东，隋时塞。门外达黄华泾，今有匠门塘。东有干将墓，土宜锻铁。</em> 则相门自隋后淤塞千余年，道光年间只余一塘。</p><p>震涛载顾嗣立六门题字，曰阊、胥、盘、娄、齐、葑，前文已录，则此外包括平门、相门、蛇门在内，大抵皆民国解放以后，甚至晚到改革开放之后才开辟重建的了。</p><p>自相门入城，过桥便是平江小学，原是长洲县学，旧制犹存。再往西数百米，就到了大名鼎鼎的平江路。</p><h3 id="相门城楼">相门城楼</h3><p>相门城楼基本可以视作娄门的克隆体，只不过少了一个娄上楼茶馆，人气更冷清罢了。</p><p><a href="DSC3004.jpg" title="自相门桥回望相门城楼" class="gallery-item"><img src="DSC3004.jpg" alt="自相门桥回望相门城楼"><span class="image-caption">自相门桥回望相门城楼</span></a></p><p><a href="DSC2975.jpg" title="钩邑相徽" class="gallery-item"><img src="DSC2975.jpg" alt="钩邑相徽"><span class="image-caption">钩邑相徽</span></a></p><p>相门的匾额题作「钩邑相徽」，文法可疑。记者撰文释义，引张衡南都赋云：<em>御房穆以华丽，连阁焕其相徽</em>。又引李善注曰：<em>相徽，言俱美</em>。则徽作辉用。连阁者，阁相连也，互相辉映固然不错。苏州旧号勾吴，称勾邑亦可行。然一邑岂可相辉？勾与邑何足为对？吾不知其可也。</p><p><a href="DSC2977.jpg" title="对联" class="gallery-item"><img src="DSC2977.jpg" alt="对联"><span class="image-caption">对联</span></a></p><p>门柱上有联：</p><blockquote><p>古堞标分野牛斗垂天有龙光夜射；<br>雅韶绕画梁闾阎扑地看紫气东来。</p></blockquote><p>居然上下联的用典都与南昌有关。</p><p>城上悬着一面巨大的铜锣，在古代可能是斥候警报之用。自铜锣一侧攀墙下视，则是相门水路，水闸和配套的绞盘也按原样复制出来了，但恐怕闸门很少有放下去的时候吧。</p><p>相门桥傍城楼而作，因为连通的是主干道干将路，所以车流涌沸，来往不绝。</p><p><a href="DSC2982.jpg" title="相门桥" class="gallery-item"><img src="DSC2982.jpg" alt="相门桥"><span class="image-caption">相门桥</span></a></p><p>城下有城墙博物馆，未入观。</p><h3 id="商业休闲街">商业休闲街</h3><p>自耦园至相门，穿过一片景观带，是一处看上去已被弃置的码头，数十艘游船停靠在岸边，风霜遍体，锈迹斑斑。</p><p>从码头过去，一直到相门城楼，看起来是一条刚刚修建好的商业休闲街区，不少地方仍在施工，除了溜娃的长者，游人不多。</p><p><a href="DSC2934.jpg" title="小郁林巷" class="gallery-item"><img src="DSC2934.jpg" alt="小郁林巷"><span class="image-caption">小郁林巷</span></a></p><p>内河对岸有一面路牌，写着「小郁林巷」，当出自耦园的旧称。吴门表隐云：<em>涉园在柳贞巷东，保宁知府陆锦建。锦孝友能文，为官清廉，乞归，创始义仓者。园又名<strong>小郁林</strong>，顾司空祖镇书；宛虹桥，蒋司马仙根书。又有沈太史志祖题联曰：「谁知太守山林之乐，时有群贤觞咏其间」。后易祝氏，更属沈藩理沅，顾震涛记。今归顾上舍宗瀚。</em></p><p>郁林，汉武帝灭南越，置郁林郡，大致相当于今天的广西。齐有郁林王萧昭业。小郁林因何得名，待考。</p><p>休闲街的入口有一个皮划艇俱乐部，支架上堆放着各色皮艇几十支。当时觉得以护城河的宽度，皮划艇或许施展不开。等登上城楼，才发现此处河面开阔，已经有两三支皮划艇在上下遨游了。</p><p><a href="DSC2933.jpg" title="皮划艇" class="gallery-item"><img src="DSC2933.jpg" alt="皮划艇"><span class="image-caption">皮划艇</span></a></p><p><a href="DSC2968.jpg" title="相门外的皮划艇" class="gallery-item"><img src="DSC2968.jpg" alt="相门外的皮划艇"><span class="image-caption">相门外的皮划艇</span></a></p><p>休闲街上有一系列的民俗雕塑，制作工致，形象生动，大抵都是清末民初苏州街头常见的情景，诸如代写信、剃头、汰衣裳、小书摊、卖汤圆、小菜的摊子等等。</p><p><a href="DSC2930.jpg" title="代写信雕塑" class="gallery-item"><img src="DSC2930.jpg" alt="代写信雕塑"><span class="image-caption">代写信雕塑</span></a></p><p><a href="DSC2991.jpg" title="卖汤圆雕塑" class="gallery-item"><img src="DSC2991.jpg" alt="卖汤圆雕塑"><span class="image-caption">卖汤圆雕塑</span></a></p><p>这一带的店铺布置都挺雅致，可惜这几年环境下行，人气很寥落，也不知道能不能长期经营下去。</p><p><a href="DSC2942.jpg" title="雅致" class="gallery-item"><img src="DSC2942.jpg" alt="雅致"><span class="image-caption">雅致</span></a></p><p><a href="DSC2937.jpg" title="休闲" class="gallery-item"><img src="DSC2937.jpg" alt="休闲"><span class="image-caption">休闲</span></a></p><h3 id="苏州大学">苏州大学</h3><p>从相门桥下穿过，一直到葑门桥，西侧围墙内都是苏州大学的校区，不可不谓之大矣。</p><p><a href="DSC3019.jpg" title="院内的电动车" class="gallery-item"><img src="DSC3019.jpg" alt="院内的电动车"><span class="image-caption">院内的电动车</span></a></p><p>在栏杆内窥见敬文书院的名牌。之前买房，古城内标敬文平江的学区房特别多，之前只当寻常名字，查资料才了解朱敬文先生的义行。</p><p><a href="DSC3027.jpg" title="敬文书院" class="gallery-item"><img src="DSC3027.jpg" alt="敬文书院"><span class="image-caption">敬文书院</span></a></p><p>步经慎明亭，有联：</p><blockquote><p>画船著令花俯仰<br>垂柳解同月徘徊</p></blockquote><p>又经一亭，额曰「桃李芬芳」。亦有联：</p><blockquote><p>月影渐移灯火影<br>桨声常伴读书声</p></blockquote><p>不知苏州大学的同学们是否苦读如此。</p><p><a href="DSC3031.jpg" title="健步道" class="gallery-item"><img src="DSC3031.jpg" alt="健步道"><span class="image-caption">健步道</span></a></p><p>这一段步道比较长，也无法通过苏州大学撤离，只能一口气走到南头的葑门。注意保持体力，带好饮料，因为要到葑门附近的公共卫生间才有自动售卖机。</p><p>近葑门，有乐文亭，金文书额。</p><p>葑门路口有一片夹竹桃，几十棵树以差不多的角度倾斜着，白色的花朵在晚风中幽幽颤动，楚楚可观。</p><p><a href="DSC3080.jpg" title="夹竹桃" class="gallery-item"><img src="DSC3080.jpg" alt="夹竹桃"><span class="image-caption">夹竹桃</span></a></p><h2 id="葑门">葑门</h2><p>葑门今无门，但有葑门桥。嗣立所题「溪流清映」，今不知榜于何处。</p><p>吴郡志引伍子胥传吴东门解：<em>东门鱄门，谓䱐门也，今名葑门。越军开示浦，子胥以涛荡罗城开此门，有鱄䱐随涛入，故名。</em> 鱄䱐即江豚。太史公书有子胥传，今无此文，是子胥亦有别传乎？据此，则子胥生，引吴伐楚；子胥死，导越破吴。子胥可谓死生如一，实乃带路党的楷模！</p><p>葑，菰根也，即茭白根。湖泽中葑菱积聚处年久腐化为泥，水涸为田，谓葑田。葑门城外多葑田，葑门或由此得名。</p><p>百度百科有一段文字：<em>摇橹出城，外濠南北横流，北行可往娄门，南行可至灭渡桥 <sub class="note">今名觅渡桥</sub>；南行折东即葑门塘，经近郭市廛，可至荷花荡、黄天荡、金鸡湖。苏州风俗，六月二十四日为荷花生日，士女倾城而出，毕集于荷花荡，楼船画舫小艇，雇觅一空，葑门水门舟楫不绝。</em> 旖旎可爱，未知谁人手笔？</p><p>葑读第四声，音如凤，方回去姑苏诗云：<em>一生心道苏州好，何事摇船出葑门。</em> 今读作阴平，则不协律。</p><p>吴地志又云：<em>「相」门南三里有葑门、赤门，有赤栏将军坟在蛇门东，陆无水道，故名赤门。东南角又有鲂𫚈门，吴曾鲂裈见，因号，并非八门之数也。</em> 葑门至蛇门不过数百米，葑门、赤门与鲂𫚈门，还有同在东南角的蛇门，大概是先后更替，不太可能同时存在。</p><p>吴门表隐云：<em>敌楼有三，高三丈六尺，方广周十三丈。一在木渎市东，一在葑门外，一在枫桥，名铁铃关。</em> 则葑门外原有敌楼，其地应在现在的长岛上。</p><h3 id="葑门桥">葑门桥</h3><p>以现在的标准来看，葑门桥很小，对向两车道，人流密集。查资料是 1969 年建成，倒比我想象的要晚一些，我原以为是民国时期修建的。葑门桥过长岛，又有叫做安利桥，因为两桥近而相连，一般统称为葑门安利桥。</p><p>长岛确实很长，自葑门至蛇门，南北正好是一公里。因为与大名鼎鼎的纽约长岛 Long Island 同名，容易让人误会是非常上流的地方，实则过去是堆放煤炭、黄砂、石子的码头。</p><p><a href="DSC4725.jpg" title="葑门桥夜景" class="gallery-item"><img src="DSC4725.jpg" alt="葑门桥夜景"><span class="image-caption">葑门桥夜景</span></a></p><p><a href="DSC4719.jpg" title="傍晚的步道" class="gallery-item"><img src="DSC4719.jpg" alt="傍晚的步道"><span class="image-caption">傍晚的步道</span></a></p><h3 id="十全街">十全街</h3><p>葑门桥西就是有名的十全街，老饕钟爱之地，吃食名店极多。</p><p>据吴门表隐，十全街本名十泉街，盖街有十井，十井各在何处，今并不存，记录亦不详。</p><p>另一则云：<em>平江路古名十泉里，有古井十口，华阳桥南一、奚家桥南北各一、徐家弄北一、魏家桥南北各一、朱马高桥北一、混堂巷口一<sub class="note">今无</sub>、张家桥南一、苑桥北一。</em> 原本怀疑十泉街与十泉里可能互有混淆，但平江路现存混堂巷，所以应该是没有讹误的。</p><p><a href="DSC3126.jpg" title="陶小婧在十全街" class="gallery-item"><img src="DSC3126.jpg" alt="陶小婧在十全街"><span class="image-caption">陶小婧在十全街</span></a></p><p><a href="DSC3091.jpg" title="三轮车" class="gallery-item"><img src="DSC3091.jpg" alt="三轮车"><span class="image-caption">三轮车</span></a></p><h3 id="相王路与相王庙">相王路与相王庙</h3><p>自葑门桥循十全街往西，有相王路，苏州初中四大名校之首的振华中学就在这条小路上。</p><p>振华中学旁有相王庙，初不知所祀何人，考吴门表隐：<em>赤阑相王庙在南园赤门傍，行祠在巴家园。神姓桑名湛壁 <sub class="note">旧志作黑莫郝</sub>，亦名荣，封东吴上乡土谷神、织杂诩城隍<sub class="note">五月初六日神诞</sub>，唐时已建，国朝康熙四十年织造李煦重建，请加封护国忠显王。道光元年，织造嘉禄率绅民重建，列入祀典。</em></p><p>又云：<em>相王坟在盘门东城下古蛇门傍，周击贼将军黑莫郝所葬，舟人赛祀不绝。</em></p><p>吴地记云：<em>黑莫郝为南面击贼将军。周敬王六年，筑城死</em>。</p><p>周敬王六年即阖闾元年，也就是伍子胥筑城的那一年，当阖闾时，何来击贼将军？相门之「相」既与「匠」通，则相王更可能是一位匠人首领，在筑城时死于工事。</p><h2 id="蛇门">蛇门</h2><p>自葑门过竹辉桥，到桂花公园，蛇门在桂花公园内。</p><p><a href="DSC3084.jpg" title="竹辉桥" class="gallery-item"><img src="DSC3084.jpg" alt="竹辉桥"><span class="image-caption">竹辉桥</span></a></p><p>吴地志云：<em>蛇门，南面有陆无水，春申君造以御越军。在已地，以属蛇，因号蛇门。</em> 越王无彊时，楚破越，尽取钱塘江以西故吴地，其后越乱，诸公子争立。历八十载，而后春申君立，越岂足为患哉？</p><p>吴越春秋云：<em>「吴」欲东并大越，越在东南，故立蛇门以制敌国。吴在辰，其位龙也，故小城南门上反羽为两鲵鱙以象龙角。越在巳地，其位蛇也，故南大门上有木蛇，北向首内，示越属于吴也。</em> 则子胥筑城时，已开蛇门。</p><h3 id="桂花公园">桂花公园</h3><p>古城四角都有公园，桂花公园应该是其中规模最大的。又兼周围都是小区，居民也多，进入公园，游人纷沓。</p><p><a href="DSC4629.jpg" title="桂花公园入口的屋顶" class="gallery-item"><img src="DSC4629.jpg" alt="桂花公园入口的屋顶"><span class="image-caption">桂花公园入口的屋顶</span></a></p><p><a href="DSC4633.jpg" title="隔壁小区的屋顶" class="gallery-item"><img src="DSC4633.jpg" alt="隔壁小区的屋顶"><span class="image-caption">隔壁小区的屋顶</span></a></p><p><a href="DSC4644.jpg" title="桂花公园的内城河" class="gallery-item"><img src="DSC4644.jpg" alt="桂花公园的内城河"><span class="image-caption">桂花公园的内城河</span></a></p><p>桂花公园东侧有茶馆，名叫老茶壶，下午五点就歇业了。傍水设座，市民坐而论道，有没有茶水倒也无谓。</p><p>护城河边立着「禁止嬉水」的牌子，河中仍有几个裸汉悠然游荡，水花溅起，岸边的小朋友大为惊怪。</p><h3 id="蛇门城楼">蛇门城楼</h3><p>蛇门废弃得很早，孙吴之时已无蛇门，不妨揣测于勾践破吴之时，这座绝越之门就已经被毁弃了，但吴时的鲂𫚈门倒有可能与蛇门的位置相同。现存的蛇门是苏州决定发展旅游以后，修复最早的春秋八门，才重建起来的。</p><p>从桂花公园东西两边都可以到蛇门，城墙下有小径，亦可绕行。</p><p><a href="DSC4664.jpg" title="蛇门登城道" class="gallery-item"><img src="DSC4664.jpg" alt="蛇门登城道"><span class="image-caption">蛇门登城道</span></a></p><p><a href="DSC4671.jpg" title="蛇门城楼" class="gallery-item"><img src="DSC4671.jpg" alt="蛇门城楼"><span class="image-caption">蛇门城楼</span></a></p><p>蛇门无旗鼓，亦无水道。登城望觅渡桥，夕阳映照，风景如画。吴门桥可观晚霞，觅渡桥赏日出，或亦大佳。</p><p><a href="DSC4666.jpg" title="蛇门南窥" class="gallery-item"><img src="DSC4666.jpg" alt="蛇门南窥"><span class="image-caption">蛇门南窥</span></a></p><p>城墙上藤萝滋盛，到处攀援缠绕，密布垛口，唯蛇门与盘门如此，可能是南方日照充足水土膏润之故。</p><p>筑墙的石头颇多刻字，天色转暗，文字漫灭，不可一一辨识，唯「袁府界」三字可读。</p><p><a href="DSC4655.jpg" title="袁府界" class="gallery-item"><img src="DSC4655.jpg" alt="袁府界"><span class="image-caption">袁府界</span></a></p><p>城楼四角各置铜铎，惜天暑不风，梵音难振。</p><p><a href="DSC4681.jpg" title="铜铎" class="gallery-item"><img src="DSC4681.jpg" alt="铜铎"><span class="image-caption">铜铎</span></a></p><p><a href="DSC4702.jpg" title="陶小婧" class="gallery-item"><img src="DSC4702.jpg" alt="陶小婧"><span class="image-caption">陶小婧</span></a></p><h2 id="盘门">盘门</h2><p>自蛇门西向，经南园桥、人民桥、蟠龙桥至吴门桥，内即盘门景区。</p><p>人民桥北通平门桥，1951 年初辟城墙修建，此处始通称为南门，后经 1977 年、2003 年两次改建，才成为现在的样子。桥下南岸有苏州轮船码头，北岸则是著名的香雪海饭店。</p><p>吴地志云：<em>盘门，古作蟠门，尝刻木作蟠龙，以此镇越。又云水陆相半，沿洄屈曲，故名盘门。又云吴大帝蟠龙，故名。门内有武烈大帝庙，在祀典。东北二里有后汉破虏将军孙坚坟，又有讨虏将军孙策坟。</em></p><p>盘门内原苏州第一丝厂，故老相传是孙策坟，今经专家考证，更可能是先孙权而死的宣太子孙登墓<sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup>。</p><h3 id="盘门景区">盘门景区</h3><p>顾嗣立盘门旧题「龙蟠水陆」，今作「水陆萦回」，虽亦自有出处，但不知何人手笔。</p><p><a href="DSC4579.jpg" title="水陆萦回" class="gallery-item"><img src="DSC4579.jpg" alt="水陆萦回"><span class="image-caption">水陆萦回</span></a></p><p>景区曾于五年前游览过，见<a href="/tours/2018-suzhou/">旧文</a>，内有一湖，占地颇广。瑞光塔据传是孙权为其乳母所建，吴门表隐记云：<em>瑞光塔，赤乌十年，吴主孙权建，唐天福二年放光。凡善姓燃灯之夕，太湖渔人网捕无所获。</em></p><p>盘门，瑞光塔，吴门桥，旧称盘门三景。</p><p><a href="image-20230730165309675.jpeg" title="1905 年的盘门，三景俱无恙" class="gallery-item"><img src="image-20230730165309675.jpeg" alt="1905 年的盘门，三景俱无恙"><span class="image-caption">1905 年的盘门，三景俱无恙</span></a></p><h3 id="吴门桥">吴门桥</h3><p>吴门桥横跨护城河，宛若长虹，时当黄昏，晚霞漫天，游人特多。桥拱处架起了好几台专业相机，想必是在拍延时风景。我拍了几张匆匆下撤，几位阿姨爷叔却守着延时相机端立不动，脖颈上还另挂了备机拍摄，专业专业，直教人肃然起敬。</p><p><a href="DSC4548.jpg" title="吴门桥" class="gallery-item"><img src="DSC4548.jpg" alt="吴门桥"><span class="image-caption">吴门桥</span></a></p><p><a href="DSC4575.jpg" title="吴门桥晚霞" class="gallery-item"><img src="DSC4575.jpg" alt="吴门桥晚霞"><span class="image-caption">吴门桥晚霞</span></a></p><p>广场舞音响震天，跳舞的阿姨们活力不减少年。水边还有一位大叔立起了巨大的多声道喇叭，卖力献唱。当时就想，一个人需要多孤独，多缺乏认同感才能做到这样的地步？</p><p>几个大叔在桥头放风筝，桥上桥下的游客大半抬头仰望，只见风筝早已渺入天中，线缆上缠满灯珠，闪烁而上。可惜天色还早，否则足以闭月遮星，在黑夜中彰显华丽。</p><p><a href="DSC4577.jpg" title="风筝" class="gallery-item"><img src="DSC4577.jpg" alt="风筝"><span class="image-caption">风筝</span></a></p><p><a href="DSC4570.jpg" title="吴门桥上仰望风筝的游人" class="gallery-item"><img src="DSC4570.jpg" alt="吴门桥上仰望风筝的游人"><span class="image-caption">吴门桥上仰望风筝的游人</span></a></p><p>此间的游客明显更多，三五分钟就有一班游船自桥下经过，有可能与不远处的轮船码头有关。</p><p><a href="DSC4586.jpg" title="游船交错" class="gallery-item"><img src="DSC4586.jpg" alt="游船交错"><span class="image-caption">游船交错</span></a></p><p>吴门桥头另有小石桥，过桥后行至古城墙下。以前的人家傍城而居，屋脊梁洞，灶火煤烟，墙面上犹自历历可见，如印烙痕。</p><h2 id="胥门">胥门</h2><p>吴地志云：<em>胥门，本伍子胥宅，因名。</em></p><p>祥符图经亦云：<em>子胥家于此，后以谏死，抉目悬于门，因名。</em></p><p>考子胥列传：<em>「子胥」乃告其舍人曰：必树吾墓上以梓，令可以为器；而抉吾眼县吴东门之上，以观越寇之入灭吴也。</em> 则目悬于吴东门，很可能是东南角的蛇门，非胥门也。</p><p>一作姑胥门。</p><p>或引越绝书云：<em>胥门外有曲路，阖闾造以游姑胥之台，以望太湖。</em> 则仍称胥门，通姑胥之台而已。台即姑苏台，在灵岩山上。</p><p>清张紫琳，大约生活在乾隆至道光年间，所著红兰逸乘云：<em>盖胥者，舜臣名，佐禹治水有功，封于吴者也 <sub class="note">太湖中有胥王庙</sub>。故名其地曰故胥，后世转音为姑苏。而胥门之见于左氏春秋，非因伍子胥得名也。</em></p><p>或云此说出自王符潜夫论，查阅之后并没有找到这一段，胥禹同框也不见载于任何经典。只有庄子有这么一段：<em>昔者尧攻丛枝胥敖，禹攻有扈，国为虚厉，身为刑戮，其用兵不止，其求实无已。是皆求名实者也。</em> 说的也不是一回事。</p><p>所以有些朋友就喜欢一本正经地胡说八道，苏胥转音是可能的，但姑苏姑蔑是古越语，绝非「故胥」之音转。吾等老实人若要照单全收，恐怕那些爱开玩笑的朋友不免暗中捧腹，要笑出腹肌来了。</p><p>胥门胥山胥口，胥口有胥王庙，但供奉的这位胥王，也不是舜之贤臣禹之助手禹，还是苏州城的总设计师伍子胥同志。以此推断，大概还是先有英雄如子胥，后来才有的这些地名。</p><h3 id="胥门城门">胥门城门</h3><p>吴门表隐记载了一则伍子胥与况锺的联动故事：<em>胥门城楼有伍子胥像，立于石上。明正统时，知府况锺修城，因其不敬，改坐像。撤石见古铭十字曰：“若要子胥坐，须待二兄来。二兄，况字也。</em></p><p>清代尚有城楼，顾嗣立题额「姑胥拥翠」，今楼已不存，门洞也小。门内操场已辟为停车场，门外傍护城河则是胥门公园。</p><p><a href="DSC2540.jpg" title="胥门" class="gallery-item"><img src="DSC2540.jpg" alt="胥门"><span class="image-caption">胥门</span></a></p><p><a href="DSC2547.jpg" title="兽面铜环" class="gallery-item"><img src="DSC2547.jpg" alt="兽面铜环"><span class="image-caption">兽面铜环</span></a></p><p>最近公众号鼓吹的「天门」，其实只是胥门登城的入口，毫无亮点，更兼平日锁将军把门，普通人欲倚门观天，实不可得。公众号为了流量，浮夸造作，不可不辨。</p><p><a href="DSC4491.jpg" title="所谓天门" class="gallery-item"><img src="DSC4491.jpg" alt="所谓天门"><span class="image-caption">所谓天门</span></a></p><p><a href="DSC4490.jpg" title="城墙下的凌霄" class="gallery-item"><img src="DSC4490.jpg" alt="城墙下的凌霄"><span class="image-caption">城墙下的凌霄</span></a></p><h3 id="万年桥逸话">万年桥逸话</h3><p>胥门外有万年桥接护城河对岸，三孔，拱高可十余米。</p><p><a href="DSC2526.jpg" title="万年桥" class="gallery-item"><img src="DSC2526.jpg" alt="万年桥"><span class="image-caption">万年桥</span></a></p><p>万年桥有一段公案，见吴门表隐：<em>胥门向有吊桥，紫石甚古，明嘉靖时，严嵩爱而拆去，今在袁州城外，亦名万年桥</em>。</p><p>严阁老作为乡贤耆宿，为家乡出力亦分内事，但从苏州拆桥运回袁州 <sub class="note">嵩分宜人，今属新余，明代属袁州，州府治宜春</sub>，成本极高。且两地水土迥异，苏州土地平旷，多水；江西丘陵地带，多山。拆过去就能重建，大概是想当然了，又不是搭乐高积木。</p><p><a href="image-20230730083736644.png" title="分宜万年桥老照片，今已沉入仙女湖" class="gallery-item"><img src="image-20230730083736644.png" alt="分宜万年桥老照片，今已沉入仙女湖"><span class="image-caption">分宜万年桥老照片，今已沉入仙女湖</span></a></p><p>按分宜万年桥，十墩十一孔，全长 384 米，桥宽 7.68 米，而护城河宽不过十几米。秀江春夏之间，洪水暴涨，浮桥屡遭坏灭，反观护城河，从无水害泛滥之虞。以此度之，除非拆全长 317 米的吴中宝带桥，否则当日护城河上，尽是些二十米左右的桥，就算全都拆走，也未必建得起一座分宜万年桥。</p><p><a href="image-20230730085921325.jpeg" title="同治十年分宜县志所附钤山图，可见万年桥规模远超苏州" class="gallery-item"><img src="image-20230730085921325.jpeg" alt="同治十年分宜县志所附钤山图，可见万年桥规模远超苏州"><span class="image-caption">同治十年分宜县志所附钤山图，可见万年桥规模远超苏州</span></a></p><p>所以说严嵩欣赏苏州的造桥工艺，必有其事，毕竟苏州当时就是发达地区。嵩撰万年桥记，亦自供云「<em>先是，予往来吴中，阅桥而美，于是征匠买石于吴州</em>」，但其后复采石于「<em>邑西杨江之岨</em>」，可见除了苏州采办，也有本地的石材，何必强行掠人之美，结怨于吴中士民。</p><p>只不过阁老最终进了奸臣传，不幸沦为有明一代第一等的大反派，于是万恶归之，苏州人向来嫉恶如仇，不免以此为耻，然后就编排上了。譬诸吾国典制，东洋之夷多用之，融洽之时，表扬一句善哉善哉，慕我天朝王化。等交恶了，心中恨恨，斥之曰文化挪用，更有甚者，怒气勃发，偷国的标签就拍在对方脑门上了。</p><p>嵩所撰万年桥记，鈐山堂集不载，见同治分宜县志。兹录于下：</p><blockquote><p>分宜邑治前瞰秀江，源发于楚萍，至此停滀，而邑之东西限于两山，束以巨峡，每春夏之间，水瀑溢汹涌，往来者以涉为病。迤东数十步有清源古渡，路当要冲，有司济以二艇，间敛富民、斥官帑比舟加板，联为浮桥，以通济之。然水稍泛，激桥复断，病涉犹故。而一造费数百金，三四年辄坏，居民行旅聁江涨而回辙，迫则纵舟，横奔而渡，频罹覆溺。倾岁子侍郎世蕃以事归，尝两捐金造舟与桥，民颇称惠。然邑父老谓必造石桥庶可永久，而费则钜万，合词诣蕃以告复致书京师，以告于予曰，公为宰执，当为斯邑建千古长计。予私自念屡岁荷蒙皇上赐金，虽尝捐造宜春二桥，而此举犹不可已，父老言良是。迺兴石桥之役，始度地相址，议者争论，东西弗决，有指今处者，曰盍在斯，迺柜水畚土，探其底，则下有巨石横亘，其平如砥，遂加石立墩，稍移之东西，则深溪浮沙，邈无涯涘，信异哉，若天设地藏焉。先是，予往来吴中，阅桥而美，于是征匠买石于吴州，运山伐石，载以巨舰，㴑江入湖，至于樟镇，滩水浅涸，易数百小舟乃获抵于分宜，而石犹不敷，将往吴复买之，一日乡氓来告，邑西杨江之岨有石，盍采诸往穴数处，果获石坚大丰盈，用遂以足。既谋合材，集制定工，兴酾水为道，凡十一空，其长一千二百尺有奇，广二十四尺，翼以两栏，如其长之数，计令白金为两万余。……经始于嘉靖丙辰秋九月，讫工于戊午夏六月。……父老以书来谢，曰：是为万人之缘，万年之利也。吾侪敢不德公之赐。予曰：非也，吾非历仕之久，叨锡之隆，其曷能焉，此吾君之赐也。自古人臣受君之赐，则作为铭识，以示弗忘。江汉之诗曰：作召公考，天子万寿，盍名斯桥曰万年桥，以无忘圣天子之恩，以仰祝万寿，与天地相为无穷焉，此吾之志也，遂勒石以记。</p></blockquote><p>严嵩诗书皆极工，入朝为相之前，长期在南京任职，考鈐山堂集，苏州也没少来，光虎丘就爬过好几次。其夜行吴江诗云：<em>菰蒲野水不知處，明發說到闔閭城。</em> 清丽可诵。</p><h3 id="胥门公园">胥门公园</h3><p>胥门公园连着百花洲公园，规模很大。</p><p><a href="DSC2534.jpg" title="相土尝水象天法地" class="gallery-item"><img src="DSC2534.jpg" alt="相土尝水象天法地"><span class="image-caption">相土尝水象天法地</span></a></p><p><a href="DSC2537.jpg" title="陶小婧与伍子胥" class="gallery-item"><img src="DSC2537.jpg" alt="陶小婧与伍子胥"><span class="image-caption">陶小婧与伍子胥</span></a></p><p>公园内立有子胥雕像，体大须长，似宽厚长者。窃以为大谬不然，伍子胥明明是不世出的奇男子，天底下脾气最烈的烈丈夫，报父兄之仇就得破楚鞭尸，怨气一旦化作钱塘江的怒潮，几千年都缓不下来，至少也是个金刚怒目之相。</p><p>越破吴，吴越春秋有载：<em>「越王」望吴南城，见伍子胥头巨若车轮，目若耀电，须发四张，射于十里。越军大惧，留兵假道。即日夜半，暴风疾雨，雷奔电激，飞石扬砂，疾于弓弩。</em></p><p>非威势如此，何以彰子胥之神哉！</p><p>胥门公园人气很旺。</p><p>八门论人气：西面的阊门胥门都很热闹。南边的盘门不减阊胥，蛇门已稍逊。东边的葑门不在八门之数，但背靠十全街，足与阊门相匹敌。娄门有东园，亦自不弱，相门又比蛇门差了一截。北面的齐门平门则冷冷清清凄凄惨惨戚戚，几无人迹。</p><p><a href="DSC4512.jpg" title="公园内" class="gallery-item"><img src="DSC4512.jpg" alt="公园内"><span class="image-caption">公园内</span></a></p><p><a href="DSC4526.jpg" title="梅树" class="gallery-item"><img src="DSC4526.jpg" alt="梅树"><span class="image-caption">梅树</span></a></p><p>胥门往南，有汤斌祠，牌坊上刻字曰「民不能忘」。柱上联云：</p><blockquote><p>居官当思尽其天职<br>为政尤贵合乎民众</p></blockquote><p>似近人语。</p><p><a href="DSC4516.jpg" title="民不能忘" class="gallery-item"><img src="DSC4516.jpg" alt="民不能忘"><span class="image-caption">民不能忘</span></a></p><p>汤斌，字孔伯，号荆岘，晚又号潜庵，河南睢州<sub class="note">今睢县</sub>人。清初官至工部尚书，卒谥文正。 康熙二十三年出任江宁巡抚，任职期间鱼肉荤腥概不入衙署，每日只买三块豆腐作菜肴，人称「豆腐汤」，兴礼作教，抚民化俗，扫荡五通神迷信有成。</p><p>然考其生平，循循老儒而已，任江宁巡抚不过年余，苏州多名宰，也不知其何以在此留下了旌表的遗迹？</p><h2 id="阊门">阊门</h2><p>阊阖，天门也。离骚：<em>吾令帝阍开关兮，倚阊阖而望予</em>。 王摩诘早朝大明宫之作：<em>九天阊阖开宫殿，万国衣冠拜冕旒</em>。</p><p>故子胥造筑大城，<em>立阊门者，以象天门通阊阖风也</em>。</p><p>吴地志云：<em>阊门，亦号破楚门。吴伐楚，大军从此门出</em>。</p><p>又云：<em>孔子登山，望东吴阊门叹曰：吴门有白气如练</em>。齐女登城北眺故乡，孔子登山南望阊门，二者时代几乎相同，没准可以看到彼此。毕竟古人的视力太好了，今人望尘莫及。</p><p>阊门虽然号称红尘中头等富贵风流地，但每逢乱世，多作战场。大抵苏州是东南重镇，除了吴越争霸，越国从东南的蛇门破城以外，敌多从西北来。元末朱元璋派大军东下，围苏州十月余，最终徐达破葑门，常遇春破阊门，士诚灭亡。</p><p>太平天国时，李秀成连破常州无锡，进逼苏州，集重兵攻阊门。巡抚徐有壬和总兵马德昭笼城困守，令纵火。万商云集市肆繁盛的阊门一带，顷刻之间烟焰蔽天，焚为白地。城内外号哭之声震天，居民逃亡上海者达数十万。时人李寿龄作「姑苏哀」，中云：<em>清军十万仓皇来，三日城门闭不开。抚军下令烧民屋，城外万户成寒灰。健儿应募尽反颜，弃甲堆积如丘山。</em> 六月二日，有守城兵勇打开阊门，迎李秀成入城。</p><p>当然，比起隔壁的大哥南京，苏州毕竟是个无险可守的平原城市，除前述三个时期之外，残酷的战争记录相对少一些。</p><p>阊门外接山塘街，内即西中市。附近有艺圃、泰伯庙与五峰园。</p><h3 id="阊门城楼">阊门城楼</h3><p>阊门城楼比较特殊，有三个门洞，据说是 1934 年模仿金门的罗马式城门改建。金门 1922 年始辟，存在时间较短。</p><p><a href="DSC2467.jpg" title="阊门城楼" class="gallery-item"><img src="DSC2467.jpg" alt="阊门城楼"><span class="image-caption">阊门城楼</span></a><br><a href="image-20230730152437983.png" title="建国后的老阊门，罗马式比较明显。©刘世昭摄" class="gallery-item"><img src="image-20230730152437983.png" alt="建国后的老阊门，罗马式比较明显。©刘世昭摄"><span class="image-caption">建国后的老阊门，罗马式比较明显。©刘世昭摄</span></a></p><p>阊门是苏州商旅辐辏之地，除内外护城河外，又通上塘河、山塘河、中市河。阊门对岸有朝宗阁，原即阊门码头，现为山塘河游船码头，可买船直抵虎丘山下。</p><p><a href="DSC2463.jpg" title="阊门对岸的朝宗阁" class="gallery-item"><img src="DSC2463.jpg" alt="阊门对岸的朝宗阁"><span class="image-caption">阊门对岸的朝宗阁</span></a></p><p>阊门桥或即聚龙桥，桥两侧纳凉休闲者极多。</p><p><a href="DSC2470.jpg" title="长者" class="gallery-item"><img src="DSC2470.jpg" alt="长者"><span class="image-caption">长者</span></a></p><p>阊门往北是北码头，其南有南新路，路长数百米，吃食老店极多。</p><p>这段健步道沿河修建，路较窄，有时从饭店后面穿过，往往能窥见雅座的食客，偶尔有厨师在后厨门外吸烟放风。</p><p><a href="DSC2484.jpg" title="苏州菜" class="gallery-item"><img src="DSC2484.jpg" alt="苏州菜"><span class="image-caption">苏州菜</span></a></p><h3 id="北码头">北码头</h3><p>苏州城内有不少民国建筑，但北码头才是苏州民国风情的集大成者。横向比较，这一带不逊色于广州的西关，规模与海景则不及厦门的鼓浪屿。苏州园林名播天下，北码头为园林所掩，以至于游客来苏州，极少将北码头纳入行程。</p><p><a href="DSC2455.jpg" title="老阊门" class="gallery-item"><img src="DSC2455.jpg" alt="老阊门"><span class="image-caption">老阊门</span></a></p><p>此处多食肆、茶馆、酒吧及民宿，花半天时间来玩一下，或者干脆住这边，体验绝对是极好的。</p><p><a href="DSC2449.jpg" title="铜狮" class="gallery-item"><img src="DSC2449.jpg" alt="铜狮"><span class="image-caption">铜狮</span></a></p><p><a href="DSC2450.jpg" title="桌椅" class="gallery-item"><img src="DSC2450.jpg" alt="桌椅"><span class="image-caption">桌椅</span></a></p><p>我们来的时候约下午三四点，走完一遍，就发现这里的商业开发还远未完成，有部分洋房依旧是空关的状态，茶馆里也是喝茶打牌的本地中老年人居多。</p><p>午后炎热无风，树影轻轻颤动，城墙上藤曼滋生，院落的月洞门垂下悄然盛放的凌霄花，偶尔从窗内传出茶客的谈笑之声，随即让位于空气中燥切的蝉鸣。穿行其间，竟凭空生出一种清冷寂静之感。</p><p><a href="DSC2448.jpg" title="廊下无人，凌霄自放。" class="gallery-item"><img src="DSC2448.jpg" alt="廊下无人，凌霄自放。"><span class="image-caption">廊下无人，凌霄自放。</span></a></p><h2 id="结语">结语</h2><p>自深圳迁苏州，本打算卜居于城内察院场，结果阴差阳错，最终买到了元和塘。正所谓：一生心道苏州好，何事骑驴入相城？现在每次入城，都要骑二十分钟的电动车。</p><p>不过好歹是想去就去了，从第一次动念开始走，到上周八门巡礼已毕，时间跨度竟长达两个月。希望余生亦得圆满，无灾无病，与陶小婧终老苏州，可无憾矣。<div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">1.</span><span style="display: inline; vertical-align: top;">巫臣之申在南阳，伍子胥亦封于申，但吴国从未染指南阳盆地，其封地或与春申君同，在吴地，或即申沪之申。</span><a href="#fnref:1" rev="footnote"> ↩</a></li><li id="fn:2"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">2.</span><span style="display: inline; vertical-align: top;">详见三联生活周刊，陈飞撰：<a href="https://www.lifeweek.com.cn/article/83214">「性介不阿」顾予咸——重审「哭庙案」之三 </a></span><a href="#fnref:2" rev="footnote"> ↩</a></li><li id="fn:3"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">3.</span><span style="display: inline; vertical-align: top;">详见苏州杂志 2018 年第 5 期，黄恽撰：<a href="https://m.fx361.com/news/2018/0125/15660932.html">振吴汽车学校</a></span><a href="#fnref:3" rev="footnote"> ↩</a></li><li id="fn:4"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">4.</span><span style="display: inline; vertical-align: top;">详见扬子晚报：<a href="https://www.yangtse.com/zncontent/2169369.html">「孙策墓」再起波澜，或是孙登与周瑜之女合葬墓</a></span><a href="#fnref:4" rev="footnote"> ↩</a></li></ol></div></div></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">一生心道苏州好，何事骑驴入相城。</summary>
    
    
    
    <category term="游历" scheme="https://kaerozhi.com/categories/tours/"/>
    
    
    <category term="苏州" scheme="https://kaerozhi.com/tags/%E8%8B%8F%E5%B7%9E/"/>
    
    <category term="featured" scheme="https://kaerozhi.com/tags/featured/"/>
    
    <category term="徒步" scheme="https://kaerozhi.com/tags/%E5%BE%92%E6%AD%A5/"/>
    
    <category term="古城" scheme="https://kaerozhi.com/tags/%E5%8F%A4%E5%9F%8E/"/>
    
    <category term="环游" scheme="https://kaerozhi.com/tags/%E7%8E%AF%E6%B8%B8/"/>
    
    <category term="东园" scheme="https://kaerozhi.com/tags/%E4%B8%9C%E5%9B%AD/"/>
    
  </entry>
  
  <entry>
    <title>Hexo Stylus 渲染的奇怪问题</title>
    <link href="https://kaerozhi.com/playground/web/hexo-renderer-stylus-issue/"/>
    <id>https://kaerozhi.com/playground/web/hexo-renderer-stylus-issue/</id>
    <published>2023-07-21T10:40:00.000Z</published>
    <updated>2023-08-01T13:15:51.880Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>给网站首页加了一个满屏图文，不料遇上一个奇怪的问题。原本想根据屏幕宽度自动调整标题大小，<code>hero.styl</code> 是这样写的：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="selector-tag">h2</span></span><br><span class="line"><span class="attribute">font-size</span>: <span class="built_in">clamp</span>(<span class="number">5em</span>, <span class="number">5em</span> + <span class="number">2.5vw</span>, <span class="number">10em</span>)</span><br><span class="line"><span class="attribute">line-height</span>: <span class="number">1em</span></span><br><span class="line"><span class="attribute">letter-spacing</span>: -<span class="number">0.05rem</span></span><br></pre></td></tr></table></figure><p>但渲染出来的 styles.css 却是这样：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h2</span> &#123;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="built_in">clamp</span>(<span class="number">5em</span>, <span class="number">7.5em</span>, <span class="number">10em</span>);</span><br><span class="line"><span class="attribute">line-height</span>: <span class="number">1em</span>;</span><br><span class="line"><span class="attribute">letter-spacing</span>: -.<span class="number">05rem</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>不知为何，两个不同的单位直接相加了，原本的变量变成了固定的 <code>7.5em</code>，这转换得也太过耿直了吧。去看了一下 <a href="https://github.com/hexojs/hexo-renderer-stylus">hexo-renderer-stylus</a> 的源代码，但搜了一下 <code>em</code>、<code>vw</code>，没有结果，所以也摸不着头绪，总之此时的效果是这样的：</p><p><a href="image-20230721185609916.png" title="错误的呈现结果" class="gallery-item"><img src="image-20230721185609916.png" alt="错误的呈现结果"><span class="image-caption">错误的呈现结果</span></a></p><p>而预想的结果，它应该是这样的：</p><p><a href="image-20230721185825969.png" title="预想的呈现结果" class="gallery-item"><img src="image-20230721185825969.png" alt="预想的呈现结果"><span class="image-caption">预想的呈现结果</span></a></p><span id="more"></span><p>换到另一个以 <a href="https://getbootstrap.com/">Bootstrap</a> 为框架的主题，CSS 正常渲染。为了确认原因，将主题换成同样采用 Stylus 的 <a href="https://theme-next.js.org/">Next</a>，果然出现了同样的问题，那应该没有疑问了，大概率就是 hexo-renderer-stylus 的锅。</p><p>不过试了一下，<code>font-size: clamp(5em, 5vw, 10em)</code> 倒是 OK，姑且先这么用着，从长计议，看看能不能解决这个奇怪的计算问题。</p><p>另一种办法是把变量存储在 <code>.yml</code> 或者 <code>.json</code> 里面，再通过 CSS 读取，Wordpress 主题已经很流行这么做了，也可以尝试。</p><p>最近发现另外一个渲染错误是 <code>transition</code>，连写必然出错。</p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article-gallery&quot;&gt;&lt;p&gt;给网站首页加了一个满屏图文，不料遇上一个奇怪的问题。原本想根据屏幕宽度自动调整标题大小，&lt;code&gt;hero.styl&lt;/code&gt; 是这样写的：&lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;selector-tag&quot;&gt;h2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;font-size&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;clamp&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;5em&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;5em&lt;/span&gt; + &lt;span class=&quot;number&quot;&gt;2.5vw&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10em&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;line-height&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;1em&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;letter-spacing&lt;/span&gt;: -&lt;span class=&quot;number&quot;&gt;0.05rem&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;但渲染出来的 styles.css 却是这样：&lt;/p&gt;
&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;h2&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attribute&quot;&gt;font-size&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;clamp&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;5em&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;7.5em&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10em&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attribute&quot;&gt;line-height&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;1em&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attribute&quot;&gt;letter-spacing&lt;/span&gt;: -.&lt;span class=&quot;number&quot;&gt;05rem&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;不知为何，两个不同的单位直接相加了，原本的变量变成了固定的 &lt;code&gt;7.5em&lt;/code&gt;，这转换得也太过耿直了吧。去看了一下 &lt;a href=&quot;https://github.com/hexojs/hexo-renderer-stylus&quot;&gt;hexo-renderer-stylus&lt;/a&gt; 的源代码，但搜了一下 &lt;code&gt;em&lt;/code&gt;、&lt;code&gt;vw&lt;/code&gt;，没有结果，所以也摸不着头绪，总之此时的效果是这样的：&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;image-20230721185609916.png&quot; title=&quot;错误的呈现结果&quot; class=&quot;gallery-item&quot;&gt;&lt;img src=&quot;image-20230721185609916.png&quot; alt=&quot;错误的呈现结果&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;而预想的结果，它应该是这样的：&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;image-20230721185825969.png&quot; title=&quot;预想的呈现结果&quot; class=&quot;gallery-item&quot;&gt;&lt;img src=&quot;image-20230721185825969.png&quot; alt=&quot;预想的呈现结果&quot;&gt;&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="玩艺" scheme="https://kaerozhi.com/categories/playground/"/>
    
    <category term="网站" scheme="https://kaerozhi.com/categories/playground/web/"/>
    
    
    <category term="Hexo" scheme="https://kaerozhi.com/tags/Hexo/"/>
    
    <category term="Stylus" scheme="https://kaerozhi.com/tags/Stylus/"/>
    
    <category term="CSS" scheme="https://kaerozhi.com/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>虎丘湿地公园</title>
    <link href="https://kaerozhi.com/photography/huqiu-wetland-park/"/>
    <id>https://kaerozhi.com/photography/huqiu-wetland-park/</id>
    <published>2023-07-19T04:01:00.000Z</published>
    <updated>2023-07-20T08:46:26.078Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><span id="more"></span></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article-gallery&quot;&gt;</summary>
    
    
    
    <category term="影像" scheme="https://kaerozhi.com/categories/photography/"/>
    
    
    <category term="苏州" scheme="https://kaerozhi.com/tags/%E8%8B%8F%E5%B7%9E/"/>
    
    <category term="公园" scheme="https://kaerozhi.com/tags/%E5%85%AC%E5%9B%AD/"/>
    
    <category term="虎丘湿地公园" scheme="https://kaerozhi.com/tags/%E8%99%8E%E4%B8%98%E6%B9%BF%E5%9C%B0%E5%85%AC%E5%9B%AD/"/>
    
  </entry>
  
  <entry>
    <title>给 Hexo 添加搜索模块</title>
    <link href="https://kaerozhi.com/playground/web/hexo-local-search/"/>
    <id>https://kaerozhi.com/playground/web/hexo-local-search/</id>
    <published>2023-07-17T02:04:00.000Z</published>
    <updated>2023-07-21T08:08:45.283Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>咳咳，作为受益无穷的免费用户，我不是在抱怨，但除了一个合适的框架以外，Acorn 的功能确实过于简略。这几天先后搞定了 Github 同步以及评论系统，但仔细想来，网站亟需完善的功能和模块还有以下几个：</p><ul><li><input type="checkbox" style="color: blue;" disabled checked/><s>添加评论系统，已达成</s>；</li><li><input type="checkbox" style="color: blue;" disabled checked/><s>添加搜索模块</s>；</li><li><input type="checkbox" style="color: blue;" disabled checked/><s>目前的组图功能不太完善，考虑移植 Justfied Gallery</s>；</li><li><input type="checkbox" style="color: blue;" disabled/>增加更多可选 Layout，比如黑色背景与全屏宽度；</li><li><input type="checkbox" style="color: blue;" disabled/>能否将视频作为头图的可选项？</li><li><input type="checkbox" style="color: blue;" disabled/>首页与影像、案例页面的内容梳理；</li></ul><p>确实是任重道远，扶额。</p><span id="more"></span><h2 id="安装插件">安装插件</h2><p>首先，我们需要安装 <a href="https://github.com/wzpan/hexo-generator-search">hexo-generator-search plugin</a>，输入命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure><p>编辑 Hexo 根目录下的配置文件 <code>_config.yml</code>，添加以下代码：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">search:</span>  </span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span>  </span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span>  </span><br><span class="line">  <span class="attr">content:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><code>field</code> 指定搜索的覆盖范围，可选项有 <code>post / page / all</code>，分别覆盖文章、页面，<code>all</code> 则两者兼顾，个人偏向 all 选项，各位可以自行选择。</p><p>但插件装好之后，就会发现它除了在根目录生成 <code>search.xml</code>，并不提供搜索的交互界面，需要我们自行添加。</p><h2 id="新增搜索界面">新增搜索界面</h2><p>打开 <a href="https://github.com/barretlee/hexo-search-plugin-snippets">hexo-search-plugin-snippets</a>，下载 <code>snippets</code> 文件夹内的三个文件，分别放到对应的文件夹：</p><ul><li><code>search.ejs</code> &gt;  <code>/themes/acorn/layout/search.ejs</code>;</li><li><code>search.js</code> &gt; <code>/themes/acorn/source/js/search.js</code>;</li><li><code>search.stylus</code> &gt; <code>/themes/acorn/source/css/_partial/search.styl</code>。</li></ul><p>接着打开 <code>/themes/acorn/layout/_partial/menu.ejs</code>，因为我们打算把搜索框放到顶部的导航栏，在 <code>&lt;/ul&gt;</code> 的闭合标签之前插入：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;li&gt;</span><br><span class="line">  &lt;%- <span class="title function_">partial</span>(<span class="string">&#x27;_partial/search&#x27;</span>, &#123;<span class="attr">wrapStyle</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">inputStyle</span>: <span class="string">&#x27;&#x27;</span>&#125;) %&gt;</span><br><span class="line">&lt;/li&gt;</span><br></pre></td></tr></table></figure><p>然后打开 <code>/themes/acorn/layout/_partial/after-footer.ejs</code>，找个合适的地方插入：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引用 JQuery</span></span><br><span class="line">&lt;script src=<span class="string">&quot;https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 移动设备侦测</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> isMobile = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title class_">Android</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> navigator.<span class="property">userAgent</span>.<span class="title function_">match</span>(<span class="regexp">/Android/i</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title class_">BlackBerry</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> navigator.<span class="property">userAgent</span>.<span class="title function_">match</span>(<span class="regexp">/BlackBerry/i</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">iOS</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> navigator.<span class="property">userAgent</span>.<span class="title function_">match</span>(<span class="regexp">/iPhone|iPad|iPod/i</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title class_">Opera</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> navigator.<span class="property">userAgent</span>.<span class="title function_">match</span>(<span class="regexp">/Opera Mini/i</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title class_">Windows</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> navigator.<span class="property">userAgent</span>.<span class="title function_">match</span>(<span class="regexp">/IEMobile/i</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">any</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> (isMobile.<span class="title class_">Android</span>() || isMobile.<span class="title class_">BlackBerry</span>() || isMobile.<span class="title function_">iOS</span>() || isMobile.<span class="title class_">Opera</span>() || isMobile.<span class="title class_">Windows</span>());</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">if</span> ($(<span class="string">&#x27;.local-search&#x27;</span>).<span class="title function_">resize</span>() &amp;&amp; !isMobile.<span class="title function_">any</span>()) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">$.<span class="title function_">getScript</span>(<span class="string">&#x27;/js/search.js&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">searchFunc</span>(<span class="string">&quot;/search.xml&quot;</span>, <span class="string">&#x27;local-search-input&#x27;</span>, <span class="string">&#x27;local-search-result&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>再打开 <code>/themes/acorn/source/css/style.styl</code>，插入：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@import &quot;_partial/search&quot;</span><br></pre></td></tr></table></figure><p>Acorn 主题用户请注意，一定要把文件名从 <code>search.stylus</code> 改为 <code>search.styl</code>。稳妥起见，最好把语法重新整理一遍，否则可能会出现渲染错误。</p><p>最后 <code>hexo clean &amp;&amp; hexo g</code>，搜索模块应该就出现了，调整一下外观样式，收工。</p><hr><h2 id="参考">参考</h2><ul><li><a href="https://qiuyiwu.github.io/2019/01/25/Hexo-LocalSearch/">Create Local Search for Your Hexo Blog</a></li><li><a href="https://github.com/barretlee/hexo-search-plugin-snippets">hexo-search-plugin-snippets</a></li></ul></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">即便是静态博客，站内搜索功能也是必须的。</summary>
    
    
    
    <category term="玩艺" scheme="https://kaerozhi.com/categories/playground/"/>
    
    <category term="网站" scheme="https://kaerozhi.com/categories/playground/web/"/>
    
    
    <category term="plugins" scheme="https://kaerozhi.com/tags/plugins/"/>
    
    <category term="Hexo" scheme="https://kaerozhi.com/tags/Hexo/"/>
    
    <category term="search" scheme="https://kaerozhi.com/tags/search/"/>
    
  </entry>
  
  <entry>
    <title>给 Hexo 增加 Gitalk 评论系统</title>
    <link href="https://kaerozhi.com/playground/web/hexo-add-gitalk-comment/"/>
    <id>https://kaerozhi.com/playground/web/hexo-add-gitalk-comment/</id>
    <published>2023-07-16T10:42:00.000Z</published>
    <updated>2023-07-16T12:39:25.064Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>原来的 Minos 主题自带 Disqus 评论系统，换到 Acorn 以后，默认不带评论功能，所以打算研究一下如何自行配置。考虑到已经同步到 GitPage 了，不如就用 Gitment 或者 Gitalk，兼容性应该可以做到最好。</p><span id="more"></span><p>按照 <a href="https://www.itfanr.cc/2019/04/30/hexo-add-gitalk-comment/">Hexo 博客添加 Gitalk 评论系统 </a> 的引导，流程非常顺利，细节满满。但因为大佬用的是 Swig 渲染器，而 Acorn 的渲染器是 EJS，所以细节略有不同，在此把过程分享出来，希望能对 EJS 用户有所启发。</p><h2 id="创建-github oauth apps">创建 Github OAuth Apps</h2><p>打开 Github 上的 <a href="https://github.com/settings/developers">OAuth Apps</a>，点击右上角 <code>New OAuth App</code> ，逐项填写相应内容即可。</p><p><a href="image-20230716191104781.png" title="注册界面" class="gallery-item"><img src="image-20230716191104781.png" alt="注册界面"><span class="image-caption">注册界面</span></a></p><p><code>Homepage URL</code> 即 Hexo 的主页地址，<code>Authorization callback URL</code> 为站点的回调地址，一般和主页相同即可。</p><p>提交之后，得到 <code>Client ID</code> 和 <code>Client Secret</code> 备用。</p><h2 id="自定义主题配置">自定义主题配置</h2><p>打开主题的配置文件，Acorn 的路径是 <code>/themes/acorn/_config.yml</code>，添加 Gitalk 相关参数：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">gitalk:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">ClientID:</span> <span class="string">xxxxxx</span> <span class="string">//</span> <span class="string">上一步得到的</span> <span class="string">Client</span> <span class="string">ID</span></span><br><span class="line">  <span class="attr">ClientSecret:</span> <span class="string">xxxxxxxxxxxx</span> <span class="string">//</span> <span class="string">上一步得到的</span> <span class="string">Client</span> <span class="string">Secret</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">kaerozhi.github.io</span> <span class="string">//</span> <span class="string">仓库可以和</span> <span class="string">Hexo</span> <span class="string">一样</span></span><br><span class="line">  <span class="attr">owner:</span> <span class="string">kaerozhi</span></span><br><span class="line">  <span class="attr">adminUser:</span> <span class="string">kaerozhi</span></span><br><span class="line">  <span class="attr">IdPrefix:</span> <span class="string">gitalk</span></span><br><span class="line">  <span class="attr">labels:</span> <span class="string">gitalk</span></span><br><span class="line">  <span class="attr">perPage:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">pagerDirection:</span> <span class="string">last</span></span><br><span class="line">  <span class="attr">createIssueManually:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">distractionFreeMode:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="gitalk-模板">Gitalk 模板</h2><p>按照 Acorn 的文件结构，在 <code>/themes/acorn/layout/_partial/post/</code> 文件夹内添加 <code>gitalk.ejs</code>，代码如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;https://unpkg.com/gitalk/dist/gitalk.css&quot;</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/gitalk/dist/gitalk.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;gitalk-container&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> gitalk = <span class="keyword">new</span> <span class="title class_">Gitalk</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">clientID</span>: <span class="string">&#x27;&lt;%- theme.gitalk.ClientID %&gt;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">clientSecret</span>: <span class="string">&#x27;&lt;%- theme.gitalk.ClientSecret %&gt;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">repo</span>: <span class="string">&#x27;&lt;%- theme.gitalk.repo %&gt;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">owner</span>: <span class="string">&#x27;&lt;%- theme.gitalk.owner %&gt;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">admin</span>: [<span class="string">&#x27;&lt;%- theme.gitalk.adminUser %&gt;&#x27;</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">id</span>:<span class="string">&#x27;&lt;%- theme.gitalk.IdPrefix || gitalk %&gt;_&lt;%- date(page.date, &quot;YYYYMMDDHHmmss&quot;) %&gt;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">labels</span>: <span class="string">&#x27;&lt;%- theme.gitalk.labels %&gt;&#x27;</span>.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>).<span class="title function_">filter</span>(<span class="function"><span class="params">l</span> =&gt;</span> l),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">perPage</span>: &lt;%- theme.<span class="property">gitalk</span>.<span class="property">perPage</span> %&gt;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">pagerDirection</span>: <span class="string">&#x27;&lt;%- theme.gitalk.pagerDirection %&gt;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">createIssueManually</span>: &lt;%- theme.<span class="property">gitalk</span>.<span class="property">createIssueManually</span> %&gt;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">distractionFreeMode</span>: &lt;%- theme.<span class="property">gitalk</span>.<span class="property">distractionFreeMode</span> %&gt;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    gitalk.<span class="title function_">render</span>(<span class="string">&#x27;gitalk-container&#x27;</span>)           </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>因为所有参数都在主题配置文件里添加好了，这里直接调用，所以应该无需作任何改动。</p><p>按照我们的想法，只有文章页开启评论，其他页面不开启，所以打开 <code>/themes/acorn/layout/_partial/article.ejs</code>，找到 <code>&lt;%- partial('post/tag') %&gt;</code>，换行，添加以下代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> &lt;% <span class="keyword">if</span> (theme.<span class="property">gitalk</span>.<span class="property">enable</span> &amp;&amp; <span class="title function_">is_post</span>() &amp;&amp; page.<span class="property">comments</span> != <span class="literal">false</span>) &#123; %&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;artile-comments gitalk&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  &lt;%- partial(&#x27;post/gitalk&#x27;) %&gt;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line"> &lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>这里为开启评论加了三个前置判断，分别是：</p><ol><li><code>theme.gitalk.enable</code>，主题配置中启用了 Gitalk 评论；</li><li><code>is_post()</code>，仅文章页启用评论；</li><li><code>page.comments != false</code> 只要在指定文章的 Front Matter 内加入 <code>comments: false</code>，则可以手动关闭评论。</li></ol><h2 id="初始化创建">初始化创建</h2><p>至此前期的准备工作就完成了，重新生成并 Deploy 至 Github，就可以在文章底部初始化创建评论了。</p><p>如果你跟我一样，历史数据比较多，一篇一篇手动启用未免太累了，那也可以参考这篇文章：<a href="https://blog.jijian.link/2020-01-10/hexo-gitalk-auto-init/">Hexo Gitalk 评论自动初始化</a>。</p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article-gallery&quot;&gt;&lt;p&gt;原来的 Minos 主题自带 Disqus 评论系统，换到 Acorn 以后，默认不带评论功能，所以打算研究一下如何自行配置。考虑到已经同步到 GitPage 了，不如就用 Gitment 或者 Gitalk，兼容性应该可以做到最好。&lt;/p&gt;</summary>
    
    
    
    <category term="玩艺" scheme="https://kaerozhi.com/categories/playground/"/>
    
    <category term="网站" scheme="https://kaerozhi.com/categories/playground/web/"/>
    
    
    <category term="Hexo" scheme="https://kaerozhi.com/tags/Hexo/"/>
    
    <category term="Gitalk" scheme="https://kaerozhi.com/tags/Gitalk/"/>
    
    <category term="Github" scheme="https://kaerozhi.com/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>Hexo 同步 Github Page</title>
    <link href="https://kaerozhi.com/playground/web/hexo-deploy-to-gitpage/"/>
    <id>https://kaerozhi.com/playground/web/hexo-deploy-to-gitpage/</id>
    <published>2023-07-15T08:26:00.000Z</published>
    <updated>2023-07-16T05:28:09.706Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>说起 Hexo，用户最熟悉的操作自然是 <code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</code>，但很不幸的是，不知是哪里出了错，我的 <code>hexo d</code> 还从未操作成功过。</p><span id="more"></span><p>可能我的部署环境比较特殊，是一台黑群晖。按照<a href="https://hexo.io/zh-cn/docs/one-command-deployment.html">官方文档</a>配置 <code>_config.yml</code>：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/kaerozhi/kaerozhi.bitbucket.io</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br><span class="line">  <span class="attr">token:</span> [<span class="string">token</span>]</span><br></pre></td></tr></table></figure><p>运行 <code>hexo d</code> 之后会提示输入用户名和密码，然后报错：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">remote: Support <span class="keyword">for</span> password authentication was removed on August 13, 2021.</span><br><span class="line">remote: Please see https://docs.github.com/en/get-started/getting-started-with-git/about-remote-repositories<span class="comment">#cloning-with-https-urls for information on currently recommended modes of authentication.</span></span><br><span class="line">fatal: Authentication failed <span class="keyword">for</span> <span class="string">&#x27;https://github.com/kaerozhi/kaerozhi.github.io.git/&#x27;</span></span><br><span class="line">FATAL Something<span class="string">&#x27;s wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html</span></span><br><span class="line"><span class="string">Error: Spawn failed</span></span><br><span class="line"><span class="string">    at ChildProcess.&lt;anonymous&gt; (/volume1/web/Hexo/node_modules/hexo-util/lib/spawn.js:51:21)</span></span><br><span class="line"><span class="string">    at ChildProcess.emit (node:events:513:28)</span></span><br><span class="line"><span class="string">    at ChildProcess._handle.onexit (node:internal/child_process:291:12)</span></span><br></pre></td></tr></table></figure><p>搜索了很多解决办法。首先，按照 <a href="https://blog.csdn.net/qq_43659183/article/details/126041835">使用 personal token 将 Hexo 本地文件推到 GitHub</a> 的办法，将 Token 加入 repo：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://[token]@github.com/kaerozhi/kaerozhi.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br></pre></td></tr></table></figure><p>可惜仍然报错：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fatal: unable to stat &#x27;tags/Blog-Tools/index.html&#x27;: No such file or directory</span><br></pre></td></tr></table></figure><p>只不过这个错误跟之前不太一样，看起来是个权限问题。</p><p>既然此路不通，那就跳船。按照这篇文章；<a href="https://ayase.moe/2023/02/12/deploy-hexo-in-2023/">2023 年了，怎么用 Github Action 与 hexo 发布在 Github Pages 上发布文章</a> ，配置需要更新写法：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/aaaa/bbb.git</span></span><br><span class="line">  <span class="attr">token:</span> <span class="string">&#x27;&#x27;</span> <span class="comment"># ❌</span></span><br><span class="line"></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span></span><br><span class="line">    <span class="attr">github:</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">https://github.com/aaaa/bbb.git</span></span><br><span class="line">      <span class="attr">token:</span> <span class="string">&#x27;&#x27;</span> <span class="comment"># ✅</span></span><br></pre></td></tr></table></figure><p>这次运行了一段时间才报错：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fatal: unable to access <span class="string">&#x27;https://github.com/kaerozhi/kaerozhi.github.io.git/&#x27;</span>: HTTP/2 stream 1 was not closed cleanly before end of the underlying stream</span><br></pre></td></tr></table></figure><p>还是有权限问题？实在没辙，只能再看看 SSH 能否奏效。但该文所说的「在部署前增加一个配置 SSH 的 action」，我不明白应该在什么地方操作，不知是 Github 还是本地？总之拿不太准，只能再换参考。</p><p>然后找到这一篇：<a href="https://www.cnblogs.com/v1coder/p/16358864.html">使用 Hexo 在 Github 上建博客</a>，因为 SSH Keys 已经生成过了，所以直接输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure><p>将内容复制到 GitHub –&gt; Settings –&gt; SSH and GPG keys –&gt; NEW SSH key。然后将 <code>_config.yml</code> 里的 deploy 部分改成以下格式：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">git@github.com:yourname/yourname.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><p>运行 <code>hexo d</code>，居然跑通了！泪流满面~  之前也上传过 SSH Key，但可能配置文件并不是这个格式写的，真是太折腾人了。</p><p>不过又遇到了新的问题，文件夹太大了，囧：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">remote: fatal: pack exceeds maximum allowed size (2.00 GiB)</span><br></pre></td></tr></table></figure><p>检查了一下文件夹，发现游记里的图片过于巨大，动辄五六百M。赶紧用 Photoshop 批处理至 1920x1080px，把整个包压缩到了 1G 以内。<s>然后来一发爽快的 Hexo 三连，顺利收工。</s> 翌日起床，发现最后还是超了上限，也不知道什么原因，只能继续给文件夹瘦身，但再试依然失败。一怒之下删了整个 <code>.deploy_git</code> 文件夹，然后一键三连，嘿嘿，这次终于成功。</p><p>此时访问 <a href="https://kaerozhi.github.io">https://kaerozhi.github.io</a> ，应该能正常浏览了，稍后再设置一个自定义域名。</p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">只求一键三连能成功！</summary>
    
    
    
    <category term="玩艺" scheme="https://kaerozhi.com/categories/playground/"/>
    
    <category term="网站" scheme="https://kaerozhi.com/categories/playground/web/"/>
    
    
    <category term="Hexo" scheme="https://kaerozhi.com/tags/Hexo/"/>
    
    <category term="Github" scheme="https://kaerozhi.com/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>Hexo 新主题：基于 Acorn 定制</title>
    <link href="https://kaerozhi.com/playground/web/hexo-new-theme-based-on-acorn/"/>
    <id>https://kaerozhi.com/playground/web/hexo-new-theme-based-on-acorn/</id>
    <published>2023-07-13T11:30:00.000Z</published>
    <updated>2023-07-14T14:03:01.374Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><div class="foreword"><p>离职以后，一直忙于搬家和新房装修，两头奔走，除了前期试水之外，后面就没找过工作。其实心里也早就做好了打算，一把年纪了，再去跟年轻人卷实在力有未逮，索性安定下来就转型自由设计师。</p><p>不过网站不能再和以前一样简简单单写博客，现在得展示更多的专业能力。出于这样的动机，去 <a href="https://hexo.io/themes/">Hexo 官方主题站</a>里翻检了几遍，发现 <a href="https://acorn.imaging.xin/">Acorn</a> 还挺合适的，下载到本地试着配置了一下，立马有改头换面的感觉，于是开始定制细节。</p></div><span id="more"></span><h2 id="关于-acorn">关于 Acorn</h2><p>关于 Acorn 主题，官方是这样介绍的：</p><blockquote><p>Acorn 是一“颗”免费且开源的 <a href="https://hexo.io/">Hexo</a> 主题，可适用于中小型企业门户或工作室等展示类网站的简单建设。如果你对 Hexo 基本操作已经很熟悉了，那么本文将会辅助你轻松使用 Acorn 主题搭建自己的网站， 亦或者你可以先阅读一下 <a href="https://hexo.io/zh-cn/docs/">Hexo 文档</a>。</p><p>Acorn 未使用任何前端框架，所以优秀的小盆友们可以任意发挥，突破自我。</p></blockquote><p>虽然确实没有用框架，但 Stylus 比 CSS 门槛还是高出那么一点点……</p><p><a href="image-20230713203301498.png" title="Acorn 官方网站" class="gallery-item"><img src="image-20230713203301498.png" alt="Acorn 官方网站"><span class="image-caption">Acorn 官方网站</span></a></p><p>因为设计的目标就是企业建站，所以 Acorn 的定制性基本满足需求。需要强调的是：<strong>安装完之后，一定要立刻下载<a href="https://github.com/zhwangart/acorn-sample-data">配套数据包</a>，光看文档是没办法顺利上手的。</strong></p><p>不过还是得吐槽，官方文档并不是特别完备，比如内置的几个插件，Swiper / TocBot 应该如何配置，「吃瓜妹子」绝对是毫无头绪的。即便是稍微进阶一点的用户如我，没有文档也需要研究很久。</p><h2 id="修改列表样式">修改列表样式</h2><p>基本的字体和配色就略过了，根据个人喜好来就行。</p><p><a href="image-20230713211817051.png" title="Acorn 原生的文章列表" class="gallery-item"><img src="image-20230713211817051.png" alt="Acorn 原生的文章列表"><span class="image-caption">Acorn 原生的文章列表</span></a></p><p>Acorn 默认的图文列表中规中矩，效果尚可，但标题和正文会按照限定的行数自动裁切，我不太喜欢这样把文字切得细碎的处理方式，主题都交代不完整，所以就做了改动：把正文去掉，保留标题，标题最多容纳三行文字，除了特别长的英文标题，基本上都能正常显示。</p><p>图文列表的模板是 <code>/themes/acorn/layout/partial/archive-post.ejs</code>，打开源文件：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;col-3&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;archive-article archive-type-&lt;%= post.layout %&gt;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card rounded&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &lt;%- partial(&#x27;post/gallery&#x27;) %&gt; // 预览图</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-body bg-light&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &lt;%- partial(&#x27;post/title&#x27;, &#123;class_name: &#x27;article-title mb-0 line-clamp line-clamp-1&#x27;&#125;) %&gt; // 标题，line-clamp-1 用 CSS 限定行数为 1</span></span><br><span class="line"><span class="language-xml">        &lt;%- partial(&#x27;post/date&#x27;, &#123;class_name: &#x27;article-date&#x27;, date_format: null&#125;) %&gt; // 日期</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-text mt-3 line-clamp line-clamp-2&quot;</span>&gt;</span>&lt;%- post.excerpt %&gt;<span class="tag">&lt;/<span class="name">div</span>&gt;</span> // 正文摘抄，line-clamp-2 限定行数为 2</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">hr</span> <span class="attr">class</span>=<span class="string">&quot;hr&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &lt;% if (theme.excerpt_link)&#123; %&gt; // 阅读更多的链接</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;article-more-link&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%- url_for(post.path) %&gt;#more&quot;</span>&gt;</span>&lt;%= theme.excerpt_link %&gt;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &lt;% &#125; %&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>把横线、裁切过的正文和「阅读更多」的链接统统删除，在标题上面增加分类，调整过的代码如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;col-3&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;archive-article archive-type-&lt;%= post.layout %&gt;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card rounded&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &lt;%- partial(&#x27;post/gallery&#x27;) %&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-body bg-light&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &lt;%- partial(&#x27;post/category&#x27;, &#123;class_name: &#x27;mb-1&#x27;&#125;) %&gt; // 增加分类</span></span><br><span class="line"><span class="language-xml">        &lt;%- partial(&#x27;post/title&#x27;, &#123;class_name: &#x27;article-title mb-1 line-clamp line-clamp-3&#x27;&#125;) %&gt; // CSS 类改为 line-clamp-3，扩展为三行</span></span><br><span class="line"><span class="language-xml">        &lt;%- partial(&#x27;post/date&#x27;, &#123;class_name: &#x27;article-date&#x27;, date_format: null&#125;) %&gt; // 保留日期，其他删除</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>修改之后的列表是这样的：</p><p><a href="image-20230713211525981.png" title="修改后的列表" class="gallery-item"><img src="image-20230713211525981.png" alt="修改后的列表"><span class="image-caption">修改后的列表</span></a></p><p>个人觉得清爽了不少。</p><p>此外还有一个问题，配置好 Acorn 之后，Archives 每页显示 10 篇文章，这个问题不大，但不知为何首页同样显示 10 篇，而不是我想要的 4 篇。在主题文件夹研究了半天，没找到线索，最后才发现这个是由 Hexo 的 <code>config.yml</code> 全局控制的：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">...</span></span><br><span class="line"><span class="attr">index_generator:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">order_by:</span> <span class="string">&#x27;-date&#x27;</span></span><br><span class="line"><span class="string">...</span></span><br><span class="line"><span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line"><span class="string">...</span></span><br></pre></td></tr></table></figure><p><code>index_generator</code> 下面的 <code>per_page</code> 控制首页显示的条数，首页要显示一行四条，把 10 改成 4 即可，如果想显示两行，则可以改成 8。另外一个 <code>per_page</code> 则控制列表页每页显示的条数，我直接改成了 20。</p><h2 id="默认预览图">默认预览图</h2><p>之前的文章大部分没有配置预览图，没预览图的条目比有图的低一半左右，这样的列表页肯定不怎么好看。</p><p><a href="image-20230713213833206.png" title="有预览图和没预览图的排在一行，低低高高，不太好看。" class="gallery-item"><img src="image-20230713213833206.png" alt="有预览图和没预览图的排在一行，低低高高，不太好看。"><span class="image-caption">有预览图和没预览图的排在一行，低低高高，不太好看。</span></a></p><p>我们先准备好一张图，可以命名为 <code>post-preview.png</code>，丢在 <code>/source/images/</code> 文件夹里。此时有两种思路，其一是修改 <code>/themes/acorn/layout/partial/post/gallery.ejs</code>，这样不管是列表还是文章页，只要没有预览图，都会显示我们前面准备的这张  <code>post-preview.png</code>。但个人以为，列表页必须兼顾表现的一致性，才需要默认的预览图补位，但文章页搭配这张图没有多大意义，徒然浪费空间。</p><p>所以不如换另外一个思路，只改列表页就好，顺藤摸瓜，还是找到 <code>/themes/acorn/layout/partial/archive-post.ejs</code>，将 <code>&lt;%- partial('post/gallery') %&gt;</code> 替换为以下代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (post.<span class="property">photos</span> &amp;&amp; post.<span class="property">photos</span>.<span class="property">length</span>)&#123; %&gt; <span class="comment">// 如果配置了预览图就正常显示</span></span><br><span class="line">  &lt;%- <span class="title function_">partial</span>(<span class="string">&#x27;post/gallery&#x27;</span>) %&gt;</span><br><span class="line">&lt;% &#125; <span class="keyword">else</span> &#123;%&gt;  <span class="comment">// 如果没有，则显示 post-preview.png    </span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;card-img-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%- url_for(post.path) %&gt;&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;gallery_&lt;%= post._id %&gt;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;card-img lazyload&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;/images/post-preview.png&quot;</span> <span class="attr">itemprop</span>=<span class="string">&quot;image&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;gallery&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&lt;% &#125; %&gt;</span></span><br></pre></td></tr></table></figure><p>测试之后发现没问题，搞定。</p><h2 id="控制预览图比例">控制预览图比例</h2><p>现在列表里的预览图都有了，但问题还在：Acorn 默认是不管你配置的是怎样的预览图，它都给你原样显示出来。但这些图的比例可能参差不齐，有纵向的，有横向的，有 4:3 的，有 16:9 的，没准还有正方形 1:1 的，所以我们得控制一下图片的比例。</p><p>这个倒是比较简单，不需要改模板，只要改 CSS 文件就好。打开 <code>/themes/acorn/source/css/_partial/archive.styl</code>，在 <code>.archives-wrap</code> 下面增加以下代码：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.archives</span></span><br><span class="line">  <span class="selector-class">.row</span></span><br><span class="line">    <span class="selector-class">.card-img-link</span></span><br><span class="line">      <span class="attribute">display</span>: flex</span><br><span class="line">      width: <span class="number">100%</span></span><br><span class="line">      aspect-ratio: <span class="number">16</span> / <span class="number">9</span> // 指定比例为 <span class="number">16</span>:<span class="number">9</span></span><br><span class="line">      overflow: hidden // 超过的部分不可见</span><br><span class="line">      align-items: center // 纵向居中</span><br><span class="line">      .card-img</span><br><span class="line">        width: <span class="number">100%</span></span><br></pre></td></tr></table></figure><h2 id="列表的节奏变化">列表的节奏变化</h2><p>现在图文列表显示都正常了，但还比较单调，我希望能有一点节奏变化。</p><p>一开始的思路是在 CSS 里面按照 <code>nth-child[]</code>来调整不同的样式，但尝试了一下，发现成本极高，因为要适配不同的屏幕尺寸。</p><p>然后就尝试在模板文件里加一个前置判断，原本所有的列表项，其类别都是统一的 <code>col-3</code>，调整之后，根据排序的不同，第一个的类别改成 <code>col-12</code>，第二至第五改成 <code>col-6</code>。这些类别 Acorn 已经做好了屏幕适配，不存在兼容性问题。</p><p>加判断虽然简单，但这个序号要如何取得？研究了老半天，最后发现只要调用模板的时候传递一个变量即可。在 <code>/themes/acorn/layout/_partial/archive.ejs</code> 找到这一行：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%- <span class="title function_">partial</span>(<span class="string">&#x27;archive-post&#x27;</span>, &#123;<span class="attr">post</span>: post, <span class="attr">even</span>: i % <span class="number">2</span> == <span class="number">0</span>&#125;) %&gt;</span><br></pre></td></tr></table></figure><p>增加一个变量 <code>orderid</code>，值等于 Query 循环里面的 i：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%- <span class="title function_">partial</span>(<span class="string">&#x27;archive-post&#x27;</span>, &#123;<span class="attr">post</span>: post, <span class="attr">even</span>: i % <span class="number">2</span> == <span class="number">0</span>, <span class="attr">orderid</span>: i&#125;) %&gt;</span><br></pre></td></tr></table></figure><p>然后再次打开 <code>/themes/acorn/layout/partial/archive-post.ejs</code>，将里面的 <code>&lt;div class=&quot;col-3&quot;&gt;</code>替换为：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (is_home())&#123;%&gt; // 首页都是统一的小号样式</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-3&quot;</span>&gt;</span></span><br><span class="line">&lt;% &#125; else &#123; %&gt;</span><br><span class="line">  &lt;% if ( orderid == 0)&#123;%&gt; // 第一个大号</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-12&quot;</span>&gt;</span></span><br><span class="line">  &lt;% &#125; else if ( orderid &gt; 0 &amp;&amp; orderid &lt; 5)&#123; %&gt; // 二至四中号</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-6&quot;</span>&gt;</span></span><br><span class="line">  &lt;% &#125; else &#123; %&gt; // 其他仍然小号</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-3&quot;</span>&gt;</span></span><br><span class="line">  &lt;% &#125; %&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>列表就变成现在的样子了，撒花~</p><p>当然这个结果并不完美，因为现在的列表会根据年份断开，导致 <code>col-6</code> 后面紧跟两个 <code>col-3</code>，还是不整齐，太纠结了。</p><h2 id="启用-tocbot">启用 Tocbot</h2><p><a href="image-20230714092041702.png" title="Acorn 文档页面的目录" class="gallery-item"><img src="image-20230714092041702.png" alt="Acorn 文档页面的目录"><span class="image-caption">Acorn 文档页面的目录</span></a></p><p>Acorn 内置了 <a href="https://tscanlin.github.io/tocbot/">Tocbot</a>，技术文档也是有目录的，但本地如何启用？在 <code>/themes/acorn/_config.yml</code> 设置好 <code>toc: true</code>，发现没有效果。但也没有与之对应的模板，所以到底该怎么办呢？</p><p>打开 <code>/themes/acorn/layout/_partial/after-footer.ejs</code>，发现 tocbot 的相关代码确实已经加载好了：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (theme.<span class="property">toc</span>)&#123; %&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&lt;%- url_for(theme.libs.tocbot) %&gt;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    tocbot.<span class="title function_">init</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// Where to render the table of contents.</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">tocSelector</span>: <span class="string">&#x27;.js-toc&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// Where to grab the headings to build the table of contents.</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">contentSelector</span>: <span class="string">&#x27;.js-toc-content&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// Which headings to grab inside of the contentSelector element.</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">headingSelector</span>: <span class="string">&#x27;h2, h3&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// For headings inside relative or absolute positioned containers within content.</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">hasInnerContainers</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>对应的两个类分别是：<code>.js-toc</code> 用于挂载目录，<code>.js-toc-content</code> 则是需要生成目录的内容。我们试着将这两个类添加到 <code>/themes/acorn/layout/_partial/article.ejs</code>，找到这一行：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;article-entry&quot;</span> <span class="attr">itemprop</span>=<span class="string">&quot;articleBody&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>将它修改为：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;js-toc&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;article-entry js-toc-content&quot;</span> <span class="attr">itemprop</span>=<span class="string">&quot;articleBody&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>刷新，目录果然出现了。</p><p>当然，除非像本文一样啰嗦，大部分的文章篇幅都不长，并不需要目录，所以我们可以给目录设置一个开关。将上面的代码扩充一下，加一个判断：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if ( post.toc == true)&#123; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;js-toc&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;article-entry js-toc-content&quot;</span> <span class="attr">itemprop</span>=<span class="string">&quot;articleBody&quot;</span>&gt;</span></span><br><span class="line">&lt;% &#125; else &#123; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;article-entry&quot;</span> <span class="attr">itemprop</span>=<span class="string">&quot;articleBody&quot;</span>&gt;</span></span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>这样一来，默认不生成目录，但可以通过文章前面的 Front Matter 里加上一行 <code>toc: true</code> 手动加载，完美。</p><h2 id="启用-swiper">启用 Swiper</h2><p><a href="https://swiperjs.com/">Swiper</a> 也是 Acorn 内置的组件，但既然官方没有说明怎么用，那就只能自力更生去查文档。</p><p>按照 Swiper 首页的范例，以下是最简单的用法：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/swiper@10/swiper-element-bundle.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">swiper-container</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper-slide</span>&gt;</span>Slide 1<span class="tag">&lt;/<span class="name">swiper-slide</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper-slide</span>&gt;</span>Slide 2<span class="tag">&lt;/<span class="name">swiper-slide</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper-slide</span>&gt;</span>Slide 3<span class="tag">&lt;/<span class="name">swiper-slide</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper-slide</span>&gt;</span>Slide ...<span class="tag">&lt;/<span class="name">swiper-slide</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">swiper-container</span>&gt;</span></span><br></pre></td></tr></table></figure><p>试了一下，并无效果。然后文档里发现另外一个范例：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Slider main container --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Additional required wrapper --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-wrapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Slides --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span>Slide 1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span>Slide 2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span>Slide 3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- If we need pagination --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-pagination&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- If we need navigation buttons --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-button-prev&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-button-next&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- If we need scrollbar --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-scrollbar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>粘贴进来，发现框架已经搭好，但不能滑动，打开 <code>/themes/acorn/layout/_partial/after-footer.ejs</code>，发现触发的类名是 <code>oneSwiper</code>，加上之后就正常了。</p><div class="swiper oneSwiper"><div class="swiper-wrapper"><div class="swiper-slide"><p><a href="image-20230714142643620.png" class="gallery-item"><img src="image-20230714142643620.png" alt=""></a></p></div><div class="swiper-slide"><p><a href="image-20230714142629684.png" class="gallery-item"><img src="image-20230714142629684.png" alt=""></a></p></div><div class="swiper-slide"><p><a href="image-20230714142552538.png" class="gallery-item"><img src="image-20230714142552538.png" alt=""></a></p></div></div><div class="swiper-pagination"></div></div><p>然而又发现了新的问题，与这些 HTML 代码混用之后，Markdown 无法渲染，图片自然也不能正常显示。研究了一下 <sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>，发现 Markdown 与 HTML 混用时，HTML 代码不能缩进，并且与 Makrdown 内容之间必须空一行，如下所示：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper oneSwiper&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-wrapper&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">![](image-20230714142643620.png)</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">![](image-20230714142629684.png)</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">![](image-20230714142552538.png)</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-pagination&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>刷新，搞定。</p><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">1.</span><span style="display: inline; vertical-align: top;">可参阅： https://daringfireball.net/projects/markdown/syntax</span><a href="#fnref:1" rev="footnote"> ↩</a></li></ol></div></div></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">更丰富的展示模块，更深度的细节定制。</summary>
    
    
    
    <category term="玩艺" scheme="https://kaerozhi.com/categories/playground/"/>
    
    <category term="网站" scheme="https://kaerozhi.com/categories/playground/web/"/>
    
    
    <category term="Theme" scheme="https://kaerozhi.com/tags/Theme/"/>
    
    <category term="Hexo" scheme="https://kaerozhi.com/tags/Hexo/"/>
    
    <category term="Acorn" scheme="https://kaerozhi.com/tags/Acorn/"/>
    
    <category term="Web Development" scheme="https://kaerozhi.com/tags/Web-Development/"/>
    
  </entry>
  
  <entry>
    <title>Auto Photoshop Stable Diffusion Plugin</title>
    <link href="https://kaerozhi.com/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/"/>
    <id>https://kaerozhi.com/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/</id>
    <published>2023-07-09T02:55:00.000Z</published>
    <updated>2023-07-10T11:54:19.002Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>因为名字太长，为行文方便，后文一律简称为 SD4PS。<a href="https://github.com/AbdullahAlfaraj/Auto-Photoshop-StableDiffusion-Plugin"><strong>Github 传送门</strong></a></p><p>这款插件其实已经推出有一段时间了，但国内好像没有太具深度的介绍，介绍完如何安装，随便生成几张图片，就点到为止了。还有普遍反应的安装报错，但我按照说明文档中的标准流程走下来，基本上通行无阻，可能是人品比较好？</p><p>至于现阶段的体验，个人觉得远不如想象的那么趁手。基本的 txt2img / img2img 虽然简单，但因为不能像 Web UI 那样存储预设，浏览和切换模型 / Lora / Embeddings 也不方便，所以得先在 Web UI 里面把包括 LORA 在内的 Prompts 写好，然后再粘贴到 SD4PS——多试几遍就反应过来了，这不是多此一举吗？还不如 Web UI 出图，然后 Photoshop 打开来得便捷。</p><p>当然，安装这个插件肯定是为了 Inpaint / Outpaint，毕竟绘制草图和处理蒙版，Photoshop 可不知比 Web UI 强到哪里去了。</p><span id="more"></span><h2 id="inpaint-体验">Inpaint 体验</h2><p>我们先在 Photoshop 里面生成一张图，模型还是 DreamShaper 7，<code>a beautiful young girl</code>常规起手。注意这个插件不兼容画板，新建文档的时候记得取消画板选项，分辨率依旧是 512x768。走起：</p><p><a href="output_image.png" title="A beautiful young girl" class="gallery-item"><img src="output_image.png" alt="A beautiful young girl"><span class="image-caption">A beautiful young girl</span></a></p><p>我们从生成的结果中选了一张比较满意的，但希望把眼睛换成绿色。试着用白色画笔涂抹眼睛，作为 Inpaint 蒙版：</p><p><a href="eyes-white-mask.png" class="gallery-item"><img src="eyes-white-mask.png" alt=""></a></p><p>此时维持原 Prompts 不变，选中整张图片，在原来的 Prompts 基础上增加眼睛的描述：<code>green eyes, light green pupils, high detailed eyes</code>，绘图模式切换至 Inpaint，点击 Generate Inpaint，五选一之后得到：</p><p><a href="girl-with-green-eyes.png" class="gallery-item"><img src="girl-with-green-eyes.png" alt=""></a></p><p>效果不错。注意 SD4PS 选项卡，原图和蒙版都识别得很准确——不要以为这很正常，其实这就是该插件最容易翻车的地方。</p><p><a href="image-20230709122410457.png" class="gallery-item"><img src="image-20230709122410457.png" alt=""></a></p><h3 id="局部重绘">局部重绘</h3><p>当然也有第二种方法，就是框选局部再重绘，这也是绘画和修图时最常用的场景。</p><p>此时建议将 Prompts 内关于人物整体的部分去掉，只需要眼睛的描述即可，因为我们重绘的部分只包括眼睛，保留人物的描述反而会造成干扰。而且该方法重绘的面积更小，理论上消耗的资源更低。</p><p><a href="eyes-selected.png" class="gallery-item"><img src="eyes-selected.png" alt=""></a></p><p>出图之前记得检查一下重绘部分的分辨率，因为插件的比例控制非常任性。本来是为了节省资源才选择局部重绘，结果一不小心，插件给出 33.83 倍的放大比率，电脑差点当场崩溃……</p><p><a href="image-20230709123540396.png" class="gallery-item"><img src="image-20230709123540396.png" alt=""></a></p><p>风扇狂转了十几分钟之后，出来的结果令我……大失所望，眼睛套眼睛，右边还套歪了：</p><p><a href="eyes-regenerate-result.png" class="gallery-item"><img src="eyes-regenerate-result.png" alt=""></a></p><p>怀疑是局部重绘的计算量太小，导致重绘的部分无法完美融合。既然如此，那就尝试调整参数，将 SD4PS 底部的 Mask Content 选项从 Fill 更改为 Original，此时 AI 会更多地参考原图，理论上会降低翻车的机率。</p><p><a href="image-20230709125451268.png" class="gallery-item"><img src="image-20230709125451268.png" alt=""></a></p><p>在重绘的过程中注意到原图和蒙版缩略图是这样的：</p><p><a href="image-20230709125612522.png" class="gallery-item"><img src="image-20230709125612522.png" alt=""></a></p><p>不用想，这次肯定翻车。出图之后果不其然，比上一次还离谱：</p><p><a href="eyes-regenerate-failed-result.png" class="gallery-item"><img src="eyes-regenerate-failed-result.png" alt=""></a></p><p>这也是这款插件最不稳定最令人揪心的地方，操作没变，但插件并不是每次都能准确识别原图和蒙版。</p><p>再次尝试，可惜还是很魔性：</p><p><a href="eyes-regenerate-failed-result2.png" class="gallery-item"><img src="eyes-regenerate-failed-result2.png" alt=""></a></p><p>既然如此，那我们就扩大框选面积，选中整个面部，增加 <code>beautiful face</code> 关键词。为了与之前的结果有所差异，改成蓝色眼睛。</p><p><a href="image-20230709131016550.png" class="gallery-item"><img src="image-20230709131016550.png" alt=""></a></p><p>这样参考的要素更多，理论上会画得更好一点。再次重绘：</p><p><a href="girl-with-blue-eyes.png" class="gallery-item"><img src="girl-with-blue-eyes.png" alt=""></a></p><p>成功。</p><p>由此可见，参考的像素越少，翻车的机率越大，即便我们希望节省系统资源，但还是要拿捏好尺度，过于局部的细节 AI 很难控制。</p><h3 id="精确控制蒙版">精确控制蒙版</h3><p>使用几天之后，我发现其实精确控制蒙版并不难。</p><p>起初在网上看视频，想当然地认为涂白之后，插件自动将其识别为蒙版，但这样的结果就是看人品，有时候 ok，有时候叫人抓狂。但稍加注意就能发现，如果你从 txt2img / img2img 切换到 inpaint / outpaint，插件会自动生成一个名为 <em>Mask – Paint White to Mask – temporary</em> 的图层：</p><p><a href="image-20230709152907829.png" class="gallery-item"><img src="image-20230709152907829.png" alt=""></a></p><p>在这个图层里，无论你是用选择工具框选，还是用画笔涂抹，又或是用钢笔精确勾选，总之只要涂白，插件就再也不会傻傻搞错你的蒙版了。</p><h2 id="涂鸦重绘">涂鸦重绘</h2><p>涂鸦重绘也是非常普遍的使用场景。比如我想给这位已经换上蓝色美瞳的女同学戴上一顶希腊式的花冠，通过我高妙的画技，得到这样的结果：</p><p><a href="image-20230709133820611.png" class="gallery-item"><img src="image-20230709133820611.png" alt=""></a></p><p>在 Prompts 增加花冠的描述词：<code>greek flower crown, greek wreath</code>，选中头部，看看图生图能得到怎样的结果：</p><p><a href="girl-with-greek-wreath.png" class="gallery-item"><img src="girl-with-greek-wreath.png" alt=""></a></p><p>插件读懂了我的想法，但完全没有考虑如何与原图融合。调整参数，将 Inpainting conditioning mask strenght 从 1 降到 0.3：</p><p><a href="image-20230709134621361.png" class="gallery-item"><img src="image-20230709134621361.png" alt=""></a></p><p>重新出图：</p><p><a href="girl-with-greek-wreath2.png" class="gallery-item"><img src="girl-with-greek-wreath2.png" alt=""></a></p><p>脸倒是更像原来的脸了，但是这个融合还是很捉急啊，难道我都用上 AI 了，还要手动抠图合成吗？再说这光线也跟原来不一样，重塑光线可太麻烦了。</p><p>没奈何，那还是重绘一下全图试试。<kbd>Ctr</kbd> + <kbd>A</kbd> 选择全图，为了保持女同学的姿势不变，SD4PS 切换到 ControlNet 标签页，激活 slot1，选择 openpose-face 模型：</p><p><a href="image-20230709135356150.png" class="gallery-item"><img src="image-20230709135356150.png" alt=""></a></p><p>回到默认标签，跑图！</p><p><a href="girl-with-greek-wreath-success.png" class="gallery-item"><img src="girl-with-greek-wreath-success.png" alt=""></a><br><a href="girl-with-greek-wreath-success2.png" class="gallery-item"><img src="girl-with-greek-wreath-success2.png" alt=""></a></p><p>挺好，就是背景和光线还是有变化，并且受 <code>greek</code> 影响，背景里出现了希腊的古典建筑。我们尝试将 Inpainting conditioning mask strenght 从 0.3 降到 0.15 试试：</p><p><a href="girl-with-greek-wreath-success3.png" class="gallery-item"><img src="girl-with-greek-wreath-success3.png" alt=""></a></p><p>只能说有一点变化，但不明显。感觉方向不太对，<strong>img2img 适合确定构图之后改变画风或者提升品质和完成度，如果只想调整局部，加一个花冠，添一条项链，或者换一身衣裳，那还是 Inpaint 更合适</strong>。</p><h3 id="inpaint-局部重绘">Inpaint 局部重绘</h3><p>我们将花冠部分涂成白色蒙版：</p><p><a href="image-20230709141737351.png" class="gallery-item"><img src="image-20230709141737351.png" alt=""></a></p><p>为了减轻系统负担，只选中头部：</p><p><a href="image-20230709141826088.png" class="gallery-item"><img src="image-20230709141826088.png" alt=""></a></p><p>跑图：</p><p><a href="girl-with-greek-wreath-success4.png" class="gallery-item"><img src="girl-with-greek-wreath-success4.png" alt=""></a><br><a href="girl-with-greek-wreath-success5.png" class="gallery-item"><img src="girl-with-greek-wreath-success5.png" alt=""></a><br><a href="girl-with-greek-wreath-success6.png" class="gallery-item"><img src="girl-with-greek-wreath-success6.png" alt=""></a></p><p>几乎每一张都得到了可用的结果，Inpaint 永远的神！</p><h2 id="outpaint">Outpaint</h2><p>Outpaint 与 Inpaint 原理基本一致，差别仅在于蒙版是正选还是反选而已，这里暂且不作探讨，以后若有意外发现再增补进来。</p><h2 id="图片保存路径">图片保存路径</h2><p>Web UI 生成的任何图片都可以在 Outputs 文件夹里面找到，而 SD4PS 调用的虽然也是 Stable Diffusion，但它生成的图片却不在 Outputs 文件夹里。如果跑了图却没有另外保存，事后再去找，难免会一时摸不着头绪。</p><p>当然，办法肯定会有的。打开插件的 Settings 标签页，点击最下面的 <strong>Get Path</strong> 按钮，就可以找到文件的保存路径。</p><p><a href="image-20230709160106478.png" class="gallery-item"><img src="image-20230709160106478.png" alt=""></a></p><p>但里面的文件夹名称都是随机生成的字符串，要找指定的文件提供不了任何线索，只能海底捞针逐个翻阅。假如你已经跑过很多图生成了海量文件夹……那场面想想就很酸爽，所以有可能的话，还是养成随手存图的好习惯吧。</p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">给 Photoshop 准备的 Stable Diffusion 操作界面，虽然还称不上尽善尽美，但至少值得一试。</summary>
    
    
    
    <category term="玩艺" scheme="https://kaerozhi.com/categories/playground/"/>
    
    <category term="Stable Diffusion" scheme="https://kaerozhi.com/categories/playground/stable-diffusion/"/>
    
    
    <category term="plugins" scheme="https://kaerozhi.com/tags/plugins/"/>
    
    <category term="stable diffusion" scheme="https://kaerozhi.com/tags/stable-diffusion/"/>
    
    <category term="photoshop" scheme="https://kaerozhi.com/tags/photoshop/"/>
    
  </entry>
  
  <entry>
    <title>用 Stable Diffusion 尝试传统水墨画</title>
    <link href="https://kaerozhi.com/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/"/>
    <id>https://kaerozhi.com/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/</id>
    <published>2023-07-06T05:25:07.000Z</published>
    <updated>2023-07-17T10:36:28.107Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>最近的项目与传统文化相关，主题又含有竹子元素，所以就想着如何用 Stable Diffusion 来输出合适的素材。作为传统的梅兰竹菊四君子之一，竹一直都是文人画里非常重要的元素，找一些相关的素材并不难，不过外面找的毕竟不如自己炼制来得好玩。</p><p>参考知乎上的 <a href="https://www.zhihu.com/question/589056030/answer/2979794738">Ai 绘画有哪些有趣的 prompt？ - 董步云的回答</a>，水墨风格的关键词如下，顺便分解一下词组：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sumi-e style, // 日语水墨</span><br><span class="line">(expressive brush strokes):1.2, // 提升笔触的精致感</span><br><span class="line">ink wash, gradation, monochromatic, // 水墨的层次感，保持黑白色调</span><br><span class="line">poetic atmosphere, delicate balance, // 诗意，平衡</span><br><span class="line">fluid motion // 液态的流动感</span><br></pre></td></tr></table></figure><p>所以输出的是这样的例图，就可以预见了。</p><p><a href="image-20230706132451143.jpeg" title="版权所有 董步云@知乎" class="gallery-item"><img src="image-20230706132451143.jpeg" alt="版权所有 董步云@知乎"><span class="image-caption">版权所有 董步云@知乎</span></a></p><span id="more"></span><p>我们先按照上面的 prompts 来尝试一下，把女孩主题换成我们想画的竹子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">masterpiece, best quality, highres, 8k, </span><br><span class="line">bamboo, falling bamboo leaves, blowing wind, (no humans:1.2), </span><br><span class="line">traditianal chinese ink painting, sumi-e style, (expressive brush strokes):1.2,</span><br><span class="line">ink wash, gradation, monochromatic,</span><br><span class="line">poetic atmosphere, delicate balance,</span><br><span class="line">fluid motion</span><br></pre></td></tr></table></figure><p>依旧是 DreamShaper 作为底模，分辨率 768 x 512px，输出如下：</p><div class="justified-gallery"><p><a href="00049-1493546664.png" class="gallery-item"><img src="00049-1493546664.png" alt=""></a><br><a href="00052-1493546667.png" class="gallery-item"><img src="00052-1493546667.png" alt=""></a><br><a href="00053-1493546668.png" class="gallery-item"><img src="00053-1493546668.png" alt=""></a><br><a href="00059-1493546674.png" class="gallery-item"><img src="00059-1493546674.png" alt=""></a></p></div><p>确实有点意思了。不过 <em>fluid motion</em> 还是导致了一些意外的结果。如以下图：</p><div class="justified-gallery"><p><a href="00048-1493546663.png" class="gallery-item"><img src="00048-1493546663.png" alt=""></a><br><a href="00060-1493546675.png" class="gallery-item"><img src="00060-1493546675.png" alt=""></a><br><a href="00057-1493546672.png" class="gallery-item"><img src="00057-1493546672.png" alt=""></a></p></div><p>过于强调流动感，画面的冲击力是有了，但不太符合我们想要的传统美学。我们去掉 <em>fluid motion</em>，同时将 <em>monochromatic</em> 更换为 <em>turquoise theme</em>，增加假山，这样就可以将黑白的水墨画换成青绿色主题，看看效果如何？</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">masterpiece, best quality, highres, 8k, </span><br><span class="line">bamboo, falling bamboo leaves, chinese style rock garden, blowing wind, (no humans:1.2), </span><br><span class="line">traditianal chinese ink painting, sumi-e style, (expressive brush strokes):1.2,</span><br><span class="line">ink wash, gradation, (turquoise theme),</span><br><span class="line">poetic atmosphere, delicate balance,</span><br></pre></td></tr></table></figure><p>其他参数不变，输出如下：</p><div class="justified-gallery"><p><a href="00066-3843042960.png" class="gallery-item"><img src="00066-3843042960.png" alt=""></a><br><a href="00071-3843042965.png" class="gallery-item"><img src="00071-3843042965.png" alt=""></a><br><a href="00074-3843042968.png" class="gallery-item"><img src="00074-3843042968.png" alt=""></a><br><a href="00078-3843042972.png" class="gallery-item"><img src="00078-3843042972.png" alt=""></a></p></div><p>意境不错，但假山园林的比重太高了。不如化繁为简，专注于竹子，假山可以后期合成。去掉假山的关键词，重新输出：</p><div class="justified-gallery"><p><a href="00081-1987821862.png" class="gallery-item"><img src="00081-1987821862.png" alt=""></a><br><a href="00083-1987821864.png" class="gallery-item"><img src="00083-1987821864.png" alt=""></a><br><a href="00084-1987821865.png" class="gallery-item"><img src="00084-1987821865.png" alt=""></a><br><a href="00087-1987821868.png" class="gallery-item"><img src="00087-1987821868.png" alt=""></a><br><a href="00095-1987821876.png" class="gallery-item"><img src="00095-1987821876.png" alt=""></a></p></div><p>基本上成功。唯一的缺憾是始终没有画出风中飘洒的竹叶，不知道是哪里出了问题。</p><p>突然想起东坡的朱竹，又尝试了一下，结果怎么说呢？有点怪怪的，因为红色的竹子不符合常识，所以AI 很容易偏离到枫叶主题：</p><div class="justified-gallery"><p><a href="00111-671757114.png" class="gallery-item"><img src="00111-671757114.png" alt=""></a><br><a href="00102-671757105.png" class="gallery-item"><img src="00102-671757105.png" alt=""></a></p></div><p>除了竹子之外，画面中还需要一些辅助元素。将竹子替换成流云和烟雾，得到：</p><div class="justified-gallery"><p><a href="00181-2660401093.png" class="gallery-item"><img src="00181-2660401093.png" alt=""></a><br><a href="00182-2660401094.png" class="gallery-item"><img src="00182-2660401094.png" alt=""></a><br><a href="00189-2660401101.png" class="gallery-item"><img src="00189-2660401101.png" alt=""></a></p></div><p>再将主体换成假山和石头，得到：</p><div class="justified-gallery"><p><a href="00194-2660401090.png" class="gallery-item"><img src="00194-2660401090.png" alt=""></a><br><a href="00205-2660401101.png" class="gallery-item"><img src="00205-2660401101.png" alt=""></a><br><a href="00219-2660401099.png" class="gallery-item"><img src="00219-2660401099.png" alt=""></a><br><a href="00221-2660401101.png" class="gallery-item"><img src="00221-2660401101.png" alt=""></a></p></div><p>感觉 AI 对假山还是有误会，本人的英文水平也不太够用，没有找到合适的单词来描述文人画里那些嶙峋奇崛的石头。不过这些也差不多够用了，就此收工。</p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article-gallery&quot;&gt;&lt;p&gt;最近的项目与传统文化相关，主题又含有竹子元素，所以就想着如何用 Stable Diffusion 来输出合适的素材。作为传统的梅兰竹菊四君子之一，竹一直都是文人画里非常重要的元素，找一些相关的素材并不难，不过外面找的毕竟不如自己炼制来得好玩。&lt;/p&gt;
&lt;p&gt;参考知乎上的 &lt;a href=&quot;https://www.zhihu.com/question/589056030/answer/2979794738&quot;&gt;Ai 绘画有哪些有趣的 prompt？ - 董步云的回答&lt;/a&gt;，水墨风格的关键词如下，顺便分解一下词组：&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sumi-e style, // 日语水墨&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(expressive brush strokes):1.2, // 提升笔触的精致感&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ink wash, gradation, monochromatic, // 水墨的层次感，保持黑白色调&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;poetic atmosphere, delicate balance, // 诗意，平衡&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fluid motion // 液态的流动感&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;所以输出的是这样的例图，就可以预见了。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;image-20230706132451143.jpeg&quot; title=&quot;版权所有 董步云@知乎&quot; class=&quot;gallery-item&quot;&gt;&lt;img src=&quot;image-20230706132451143.jpeg&quot; alt=&quot;版权所有 董步云@知乎&quot;&gt;&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="玩艺" scheme="https://kaerozhi.com/categories/playground/"/>
    
    <category term="Stable Diffusion" scheme="https://kaerozhi.com/categories/playground/stable-diffusion/"/>
    
    
    <category term="stable diffusion" scheme="https://kaerozhi.com/tags/stable-diffusion/"/>
    
    <category term="竹子" scheme="https://kaerozhi.com/tags/%E7%AB%B9%E5%AD%90/"/>
    
    <category term="中国水墨画" scheme="https://kaerozhi.com/tags/%E4%B8%AD%E5%9B%BD%E6%B0%B4%E5%A2%A8%E7%94%BB/"/>
    
    <category term="AIGC" scheme="https://kaerozhi.com/tags/AIGC/"/>
    
  </entry>
  
  <entry>
    <title>LORA 日推：梵高风格</title>
    <link href="https://kaerozhi.com/playground/stable-diffusion/van-gogh-style-lora/"/>
    <id>https://kaerozhi.com/playground/stable-diffusion/van-gogh-style-lora/</id>
    <published>2023-07-04T13:52:31.000Z</published>
    <updated>2023-07-17T08:54:07.636Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>今天推荐的 Lora 是 <a href="https://civitai.com/models/100873/van-gogh-style">Van Gogh Style</a>，还原度极高。以 <code>a young beautiful girl</code> 常规起手，底模选用 <a href="https://civitai.com/models/4384/dreamshaper">DreamShaper</a>，Prompts 如下；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">masterpiece, best quality, 8k, ultra detailed, simple background, </span><br><span class="line">a young beautiful girl, &lt;lora:vgv1:1&gt;, vg, painting by van gogh, vincent van gogh style,</span><br></pre></td></tr></table></figure><p><a href="00338-1039788934.png" class="gallery-item"><img src="00338-1039788934.png" alt=""></a></p><p>大笔厚涂，油画颜料的堆叠极富体积感，笔触感极佳，这一点比同类型的 Lora 都要突出，甚至真实得有些叫人心疼，这种画法是不是太费颜料了……</p><span id="more"></span><p>如果觉得皮肤这么画太狂放，毕竟光滑粉嫩还是大家的普遍倾向，那稍微调整一下即可。使用同样的 Seed，将 Lora 的权重降到 0.7；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">masterpiece, best quality, 8k, ultra detailed, simple background, </span><br><span class="line">a young beautiful girl, &lt;lora:vgv1:0.7&gt;, vg, oil painting by van gogh, vincent van gogh style,</span><br></pre></td></tr></table></figure><p><a href="00343-2440416913.png" class="gallery-item"><img src="00343-2440416913.png" alt=""></a></p><p>差不多就完美了。</p><p>像梵高这种风格强烈的大师，我们最爱做的事情就是为我所用，给平淡无奇的素材加上那么一点点艺术性。比如最近热映的电影，陈思成导演的<a href="https://movie.douban.com/subject/35660795/">消失的她</a>，有一组角色海报就是用梵高风格来画的，虽然这个画风更细密，但笔触感也更平了：</p><div class="justified-gallery"><p><a href="3eb095ec066eea0d822b9d0b4c8326b652a3886968b74-FCRgFM_fw1200webp.webp" class="gallery-item"><img src="3eb095ec066eea0d822b9d0b4c8326b652a3886968b74-FCRgFM_fw1200webp.webp" alt=""></a><br><a href="0f1b02c55ec715093329ad4e4ff24ee281bba36c174a47-YtkAd8_fw1200webp.webp" class="gallery-item"><img src="0f1b02c55ec715093329ad4e4ff24ee281bba36c174a47-YtkAd8_fw1200webp.webp" alt=""></a><br><a href="51917fd15362161be6bc03f1ca8221a945cbea0b1317fd-USkgfX_fw1200webp.webp" class="gallery-item"><img src="51917fd15362161be6bc03f1ca8221a945cbea0b1317fd-USkgfX_fw1200webp.webp" alt=""></a><br><a href="image-20230706094111775.jpeg" class="gallery-item"><img src="image-20230706094111775.jpeg" alt=""></a><br><a href="image-20230706094134153.jpeg" class="gallery-item"><img src="image-20230706094134153.jpeg" alt=""></a></p></div><p>这点小伎俩自然骗不过咱们的眼睛，当然也没啥难度。比如牛教授最近用的头像，是许同学亲自创作的和服猫咪食面图。猫咪表情生动，面馆内的布置细节丰富，还能透过窗户和窗外的樱花看到远处的富士山。</p><p><a href="profniu-wechat-avatar.png" class="gallery-item"><img src="profniu-wechat-avatar.png" alt=""></a></p><p>我们丢到图生图，用梵高风格重绘一下：</p><div class="justified-gallery"><p><a href="00017-945388574.png" class="gallery-item"><img src="00017-945388574.png" alt=""></a><br><a href="00025-945388582.png" class="gallery-item"><img src="00025-945388582.png" alt=""></a><br><a href="00030-945388587.png" class="gallery-item"><img src="00030-945388587.png" alt=""></a><br><a href="00059-1511553299.png" class="gallery-item"><img src="00059-1511553299.png" alt=""></a></p></div><p>虽然手的问题一直存在——很显然 AI 也搞不清楚你们这些人类到底是怎么做到一只手拿筷子另外一只手端碗的<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>——但风格还是非常明显，大成功！</p><p>接着我们以阿锅家的法国斗牛犬为创作主题。有一天，阿锅忙于思考人生，家里的小狗只能穿上 Labcoat，替父从军，不，替主人去实验室里搬砖的感人故事：</p><p>第一次就接受这么重大的任务，慎重思考实验方案；</p><p><a href="00160-3920061412.png" class="gallery-item"><img src="00160-3920061412.png" alt=""></a></p><p>有思路了！然后去仓库里拿实验器材：</p><p><a href="00161-3920061413.png" class="gallery-item"><img src="00161-3920061413.png" alt=""></a></p><p>呼呼~ 实验顺利进行中：</p><p><a href="00178-2773427644.png" class="gallery-item"><img src="00178-2773427644.png" alt=""></a></p><p>与实验室同事亲切沟通实验结果，毫无疑问，这次的实验数据很有价值：</p><p><a href="00180-2773427646.png" class="gallery-item"><img src="00180-2773427646.png" alt=""></a></p><p>大成功，来一杯香槟庆祝一下！</p><p><a href="00183-2773427649.png" class="gallery-item"><img src="00183-2773427649.png" alt=""></a><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">1.</span><span style="display: inline; vertical-align: top;">吃拉面也是可以优化的，一位日本玩家特地开发了一个名叫 <a href="https://civitai.com/models/22359/betterrameneating">BetterRamenEating</a> 的 Lora。前面的图只要加上这个 Lora，猫咪就能学会正确的拉面食用姿势了。</span><a href="#fnref:1" rev="footnote"> ↩</a></li></ol></div></div></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article-gallery&quot;&gt;&lt;p&gt;今天推荐的 Lora 是 &lt;a href=&quot;https://civitai.com/models/100873/van-gogh-style&quot;&gt;Van Gogh Style&lt;/a&gt;，还原度极高。以 &lt;code&gt;a young beautiful girl&lt;/code&gt; 常规起手，底模选用 &lt;a href=&quot;https://civitai.com/models/4384/dreamshaper&quot;&gt;DreamShaper&lt;/a&gt;，Prompts 如下；&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;masterpiece, best quality, 8k, ultra detailed, simple background, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a young beautiful girl, &amp;lt;lora:vgv1:1&amp;gt;, vg, painting by van gogh, vincent van gogh style,&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;a href=&quot;00338-1039788934.png&quot; class=&quot;gallery-item&quot;&gt;&lt;img src=&quot;00338-1039788934.png&quot; alt=&quot;&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;大笔厚涂，油画颜料的堆叠极富体积感，笔触感极佳，这一点比同类型的 Lora 都要突出，甚至真实得有些叫人心疼，这种画法是不是太费颜料了……&lt;/p&gt;</summary>
    
    
    
    <category term="玩艺" scheme="https://kaerozhi.com/categories/playground/"/>
    
    <category term="Stable Diffusion" scheme="https://kaerozhi.com/categories/playground/stable-diffusion/"/>
    
    
    <category term="AIGC" scheme="https://kaerozhi.com/tags/AIGC/"/>
    
    <category term="stable-diffusion" scheme="https://kaerozhi.com/tags/stable-diffusion/"/>
    
    <category term="van-gogh" scheme="https://kaerozhi.com/tags/van-gogh/"/>
    
    <category term="LORA" scheme="https://kaerozhi.com/tags/LORA/"/>
    
  </entry>
  
  <entry>
    <title>iPhone 1x 信号故障</title>
    <link href="https://kaerozhi.com/blog/iphone-1x-signal-failure/"/>
    <id>https://kaerozhi.com/blog/iphone-1x-signal-failure/</id>
    <published>2023-06-08T10:31:25.000Z</published>
    <updated>2023-06-08T11:40:25.913Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>下午一点半，陶小婧出门，我则在家校书。</p><p>大概三点钟，电话铃响了。陶小婧说手机很奇怪，没有网络信号。开关飞行模式、重启动手机都试过了，就是连不了网，因为没网络，所以也打不了车，好在还能打电话，只能麻烦我过去接她。</p><p>到地方接着人，顺便检查了一下手机，信号是满格，但后面的文字不是 4G，而是一个从未见过的 1x，果然奇怪。试着进入飞行模式，十秒钟之后再关闭，然而正如陶小婧所说，没有任何效果。</p><p>在路边不便久留，于是先回家。</p><p>回家用 <em>“iPhone 1x 上不了网”</em> 作为关键词搜索了一下。原来 1x 表示 CDMA 的原始速率，该症状一般出现在电信手机上，解决办法各种各样，略举如下：</p><ol><li>用飞行模式重置网络；</li><li>进入菜单，按 <em>“通用 &gt; 关于手机 &gt; 还原 &gt; 还原网络设置”</em> 重置网络；</li><li>关机，重启；</li><li>拔卡重插，重启；</li><li>去电信换张 SIM 卡；</li><li>去苹果天才吧报修；</li></ol><p>前面四种一一试过，症状如故。感觉很棘手，赶紧让陶小婧搜索了 Apple Store 的地址，以备不虞。不过出一趟门毕竟成本太高，还是先弄清楚具体是卡的问题还是手机的问题。把我的手机也拿出来，拔下两台手机的 SIM 卡。陶小婧的电信卡我还用酒精棉仔细擦拭了一遍，然后遍历操作：</p><ol><li>把我的联通卡装到陶小婧的 iPhone 上，网络正常，说明 iPhone 没问题；</li><li>把陶小婧的电信卡装到我的 Vivo 上，嘿，居然也正常，说明 SIM 卡也没问题；</li><li>那到底是什么问题？兼容性问题？但这张卡插在这部手机上已经有三年多了。</li></ol><p>没奈何，把卡各自插回原手机，看看有没有别的办法。然后过了一会，陶小婧惊叫，网络恢复正常了。</p><p>妈的，居然稀里糊涂就好了……</p><p>中间看过 Bilibili 上<a href="https://www.bilibili.com/video/BV19r4y1b7e4">一个视频</a>，有两点可以对得上：先清洁 SIM 卡；再用另外一张卡切换网络。因为陶小婧的 iPhone 只有单卡槽，所以只能通过换我的卡来完成这个过程。</p><p>是为记，希望对发生同样故障的朋友有帮助。</p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article</summary>
      
    
    
    
    <category term="日常" scheme="https://kaerozhi.com/categories/blog/"/>
    
    
    <category term="iPhone" scheme="https://kaerozhi.com/tags/iPhone/"/>
    
    <category term="信号故障" scheme="https://kaerozhi.com/tags/%E4%BF%A1%E5%8F%B7%E6%95%85%E9%9A%9C/"/>
    
  </entry>
  
  <entry>
    <title>SONY 相机文件名前缀的下划线</title>
    <link href="https://kaerozhi.com/playground/gears/sony-camera-filename-underscore/"/>
    <id>https://kaerozhi.com/playground/gears/sony-camera-filename-underscore/</id>
    <published>2023-06-05T07:19:42.000Z</published>
    <updated>2023-06-05T10:42:54.378Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>我用 SONY 相机拍摄的照片，不知为何，文件名都有一条前缀的下划线，比如 <code>_DSC9527.jpg</code>。记得最早是没有的，但因为无伤大雅，就一直略过了。</p><p>最近改用 <a href="/playground/web/hexo-and-new-blog/">Hexo</a>，前缀下划线 <code>_</code> 的文件，Hexo 默认是不处理的。这就导致了一个很尴尬的问题：直接把照片拖入 Obsidian 文档中，生成静态网页之后刷新却不显示。手动去除下划线，问题倒是暂时修复了，不过我还是想弄明白这其中的因果，毕竟照片那么多，也不可能每次都手动纠正。</p><p>一搜索，这个问题似乎确实微不足道，中文网络还不曾有人讨论过。改用英文搜索，很快就有了答案：原来因为把色彩空间设置成了 Adobe RGB。如果进入机身菜单，改回默认的 sRGB，下划线就会消失 <sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>。</p><p>既然规范如此，我又不可能因此放弃 Adobe RGB，那岂不是无法可想，只能每次手动操作，任劳任怨？</p><p>其实也很简单，给文件批量重命名的方法有无数个，自选一种即可。之前给 Obsidian 安装过一个插件，叫做 <a href="https://github.com/RainCat1998/obsidian-custom-attachment-location">Custom Attachment Location</a>，打开插件设置界面，将 <code>Automatically rename attachment files</code> 选项打开。这样每次把照片插入 Obsidian 时，插件就会按照时间码自动将其重命名。</p><p>之前因为命名规则太少，只有时间码和文件名两个参数可用，我嫌它不够灵活就没有考虑启用，没想到有些缘分终究逃不掉。</p><p>搞定收工。<div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">1.</span><span style="display: inline; vertical-align: top;">原帖来自 <a href="https://www.dpreview.com/forums/thread/3976976">DPReview 论坛</a> <em>（这么好的网站居然要 shut down 了，呜呼）</em>，答疑的大佬还给了 SONY 一个清白。因为这并非 SONY 一家的问题，DCF 就是这样规范的，而相机厂商都遵循相同的规范。因为我只有 SONY 的相机，所以无法验证别家的机器是否同样如此。有关 DCF 规范，详见 <a href="https://en.wikipedia.org/wiki/Design_rule_for_Camera_File_system">https://en.wikipedia.org/wiki/Design_rule_for_Camera_File_system</a></span><a href="#fnref:1" rev="footnote"> ↩</a></li></ol></div></div></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article</summary>
      
    
    
    
    <category term="玩艺" scheme="https://kaerozhi.com/categories/playground/"/>
    
    <category term="器用" scheme="https://kaerozhi.com/categories/playground/gears/"/>
    
    
    <category term="SONY" scheme="https://kaerozhi.com/tags/SONY/"/>
    
    <category term="相机" scheme="https://kaerozhi.com/tags/%E7%9B%B8%E6%9C%BA/"/>
    
    <category term="文件名" scheme="https://kaerozhi.com/tags/%E6%96%87%E4%BB%B6%E5%90%8D/"/>
    
  </entry>
  
  <entry>
    <title>夜访山塘</title>
    <link href="https://kaerozhi.com/tours/shantang-at-night/"/>
    <id>https://kaerozhi.com/tours/shantang-at-night/</id>
    <published>2023-06-05T02:13:25.000Z</published>
    <updated>2023-07-13T00:45:27.296Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>周末的山塘令人望而却步。从新民桥下来，仿佛立马被卷入洪流，被熙熙攘攘的人群一直裹挟着向前向前。每个店门外都排着长队，每座石桥上都挤满了取景拍照的游人，每个巷口都盘踞着吃小吃的食客，连屋檐下的每一盏灯笼都有些咄咄逼人似的急于招徕。寄身其中，既不能像逛园林一样从容游览，也不像日常逛街买菜一般轻松自在。</p><span id="more"></span><p>水运被陆运取代以后，苏州繁荣了上千年的河网水道，恐怕只有山塘河靠近阊门这一段依旧忙碌。无论是朝宗阁前，还是御碑亭后，游船码头始终排着长龙。</p><p>朝宗阁码头放着一支大喇叭，开着大音量一直重复：“排队请分成两列，50元的排外侧，100元的排内侧。”特别烦人。我们还没有坐过游船，也不知100元的票能否直通虎丘，体验到完整的七里山塘？</p><p><a href="DSC3440.jpg" title="游船码头排队检票的长队" class="gallery-item"><img src="DSC3440.jpg" alt="游船码头排队检票的长队"><span class="image-caption">游船码头排队检票的长队</span></a><br><a href="DSC3455.jpg" title="人头攒动" class="gallery-item"><img src="DSC3455.jpg" alt="人头攒动"><span class="image-caption">人头攒动</span></a></p><p>从新民桥进山塘街，商会博物馆就在入口不远处。这里原是闽商所建的汀州会馆，苏州总商会的原址在何处，一时查找不到了，不过印象里艺圃倒也做过什么商会的会馆？</p><p>商业发达的地方，民众的物权意识会更早萌发，民间自治团体也更活跃。看展厅内容，自清末民初起，苏州的各种商会、民团、公社都发展迅速，等到红朝建政，就只能团结在红旗下全体起立鼓掌，庆祝公私合营罢了。</p><p><a href="DSC3441.jpg" title="苏州商会博物馆" class="gallery-item"><img src="DSC3441.jpg" alt="苏州商会博物馆"><span class="image-caption">苏州商会博物馆</span></a><br><a href="DSC3443.jpg" title="庭树灯影" class="gallery-item"><img src="DSC3443.jpg" alt="庭树灯影"><span class="image-caption">庭树灯影</span></a></p><p>苏州商号众多，不少民国时期的海报、商标设计都很优秀。</p><p><a href="DSC3442.jpg" title="金阊下塘桃坞市民公社浚河报告册" class="gallery-item"><img src="DSC3442.jpg" alt="金阊下塘桃坞市民公社浚河报告册"><span class="image-caption">金阊下塘桃坞市民公社浚河报告册</span></a><br><a href="DSC3444.jpg" title="民国的设计挺棒" class="gallery-item"><img src="DSC3444.jpg" alt="民国的设计挺棒"><span class="image-caption">民国的设计挺棒</span></a></p><p>从阊门桥右转，便能看到白傅祠宽大的门头，左书山塘始祖，右书乐府诗神。白公真可谓造福一方遗泽千年。</p><p><a href="DSC3459.jpg" title="唐少傅白公祠" class="gallery-item"><img src="DSC3459.jpg" alt="唐少傅白公祠"><span class="image-caption">唐少傅白公祠</span></a></p><p>白傅祠是免费景点，所以进门参观的游人不少。只不过里头远不如大门那么唬人，只有一重院落。穿过主殿，后面就是朝宗阁。</p><p>之前在北码头看到朝宗阁，陶小婧问我是什么地方？我说百鸟朝凤万法朝宗，既然是码头，那旧时的商人载货至此，就免不了上岸拜码头。周礼春官书云：<em>春见曰朝，夏见曰宗，秋见曰觐，冬见曰遇。</em> 客商远来，态度自须恭敬，然而码头上的大佬们飘飘然以朝宗自命，则不免有僭越的嫌疑。好在这些封建残余早已肃清，此处只剩山塘画舫之售票处了。</p><p>朝宗阁的匾额下面挂着寻根祭祖的牌子，也不知是什么操作？</p><p><a href="DSC3465.jpg" title="朝宗阁" class="gallery-item"><img src="DSC3465.jpg" alt="朝宗阁"><span class="image-caption">朝宗阁</span></a></p><p>山塘街无非是白墙黛瓦，画船流水，还有晚上挂起的灯笼。终年灯火鱼龙夜，盛世清明上河图。但最动人的故事往往发生在灯火阑珊处。</p><p><a href="DSC3466.jpg" class="gallery-item"><img src="DSC3466.jpg" alt=""></a><br><a href="DSC3478.jpg" class="gallery-item"><img src="DSC3478.jpg" alt=""></a><br><a href="DSC3480.jpg" class="gallery-item"><img src="DSC3480.jpg" alt=""></a><br><a href="DSC3458.jpg" class="gallery-item"><img src="DSC3458.jpg" alt=""></a></p><p>海市山塘的名字取得很妙，似乎暗示着这一场繁华，原不过是海市蜃楼，迷天幻境。商场内立着几十百面镜子，行走其中，一不留神就容易生出一种恍惚迷离之感。</p><p><a href="DSC3490.jpg" title="海市山塘" class="gallery-item"><img src="DSC3490.jpg" alt="海市山塘"><span class="image-caption">海市山塘</span></a></p><p>不过这套设计确实是极好的。</p><p><a href="DSC3485.jpg" class="gallery-item"><img src="DSC3485.jpg" alt=""></a><br><a href="DSC3486.jpg" class="gallery-item"><img src="DSC3486.jpg" alt=""></a></p><p>国内的文化旅游产业是日趋兴盛了，古镇仿佛也送上了工业大国的生产线，和别的商业地产一样，数年之间即遍布全国，而且还在不断炮制之中。</p><p>苏州的古镇当然自有它的底蕴，但这类面向大众的开放式步行街，商业结构总会慢慢向大众倾斜，注定要失去它的本来面目。而且人气越火爆，竞争压力就越大，经营成本越高，那些立足本地的小而精的东西就越是无法立足，最后变成我们熟悉的低成本快节奏的奶茶果汁小吃烧烤臭豆腐伴手礼。</p><p><a href="DSC3492.jpg" title="等待游客的黄包车" class="gallery-item"><img src="DSC3492.jpg" alt="等待游客的黄包车"><span class="image-caption">等待游客的黄包车</span></a></p><p>晚归之际，霓虹灯影不及笼罩的路侧，停着几辆等待客人光顾的黄包车，一位老车夫讷讷地坐在乘客的位置上，周身披着幽幽的黄色路灯。在一个经济还不够发达的环境里，那些古老的商业模式终将隐退，让位于更时髦更快捷的大众消费。老车夫退休以后，黄包车恐怕也将在山塘街头消失。</p><p>跨上灵活的 72V 电动车，我在晚风中驱动电门，向城北呼啸而去。</p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article-gallery&quot;&gt;&lt;p&gt;周末的山塘令人望而却步。从新民桥下来，仿佛立马被卷入洪流，被熙熙攘攘的人群一直裹挟着向前向前。每个店门外都排着长队，每座石桥上都挤满了取景拍照的游人，每个巷口都盘踞着吃小吃的食客，连屋檐下的每一盏灯笼都有些咄咄逼人似的急于招徕。寄身其中，既不能像逛园林一样从容游览，也不像日常逛街买菜一般轻松自在。&lt;/p&gt;</summary>
    
    
    
    <category term="游历" scheme="https://kaerozhi.com/categories/tours/"/>
    
    
    <category term="苏州" scheme="https://kaerozhi.com/tags/%E8%8B%8F%E5%B7%9E/"/>
    
    <category term="山塘街" scheme="https://kaerozhi.com/tags/%E5%B1%B1%E5%A1%98%E8%A1%97/"/>
    
    <category term="夜游" scheme="https://kaerozhi.com/tags/%E5%A4%9C%E6%B8%B8/"/>
    
  </entry>
  
  <entry>
    <title>曲园的菖蒲</title>
    <link href="https://kaerozhi.com/tours/quyuan-and-calamus/"/>
    <id>https://kaerozhi.com/tours/quyuan-and-calamus/</id>
    <published>2023-06-04T07:31:52.000Z</published>
    <updated>2023-07-17T01:39:06.599Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>曲园这周有个菖蒲展。失业在家，终日都是闲暇，就骑上小电驴载着陶小婧进了城。</p><p>菖蒲自然趁着端午的时令，虽然今年过节颇有些迟。小时候过节，除了粽子，家里还要做咸鸭蛋、茶叶蛋和蒸发糕，有几年还蒸过蒜头。蒜头是成捆蒸的，不知别处有没有这样的吃法。起锅，端上桌，就着腾腾热气剥开蒜皮，辛香扑鼻。蒜子是秀润的白色，入口辣中带甜，并不像配菜的蒜泥那般呛人，只是不知道后来为何不太做了。</p><p>咸鸭蛋是小朋友的最爱，他们倒不是为了吃，而是拿去碰。通常先在盆里翻检一遍，取蛋形长而锐者，握在掌心，掂一掂分量，再举到透光处，仔细观察内部有没有多余的气孔，总之要紧实沉手。选好了，一溜烟奔到屋场，遇到别的小朋友，两边叫阵，各自撸起袖子亮出鸭蛋，定要来一番比试较量。这时免不了群众围观，几个小脑瓜团团围住，中间两位选手凝神屏气，蓄力待发。鸭蛋的两头自是有尖有圆，将咸鸭蛋攥在手心，只露尖头，防止被狡黠的对手从侧面击破。蓦地一声稚叱，好似天雷交地火，火星撞地球，啪的一声，刹那间胜负已分。观者尚未分明，胜者已经欢欣踊跃，气势高扬挑选下一个对手，败者则垂头丧气，默默将破掉的咸鸭蛋剥了壳含泪吞下。</p><p>端午一早晨，大人就会在大门两侧的竹筒内插上菖蒲和艾叶 <em>（艾叶本地又唤作蕲艾）</em>。当时只晓得包粽子的是粽叶，并不知道这透着夏日清香的修长的叶子叫菖蒲。</p><span id="more"></span><p>到了高中，看浪客剑心的漫画，后来又看了追忆篇的 OVA。追忆篇里，小萩屋的老板娘对巴说：“<em>雨中的菖蒲是最香的，在太阳底下味道就隐藏起来了。</em>”</p><p>后来又说：“<em>菖蒲花，是雨中最香的花，即使是血雨腥风中。</em>”</p><p>这几句形容菖蒲花的台词，和追忆篇一道给我留下了极深的印象 <em>（当然还有沉郁悱恻的 OST，个人心中的动漫史最高杰作之一）</em>。</p><p><a href="image-20230604144702408.jpeg" title="追忆篇中的菖蒲花" class="gallery-item"><img src="image-20230604144702408.jpeg" alt="追忆篇中的菖蒲花"><span class="image-caption">追忆篇中的菖蒲花</span></a></p><p>只是真正的菖蒲花，我却至今没有见过。所以一听陶小婧说曲园有菖蒲展出，自然是颇饶兴味，说走就走。</p><p>到曲园停好车，一进大门，就看到醒目的展览主题：清风高洁，2023曲园菖蒲艺术展——暨市级机关政德专题教育活动，隐隐觉得有些不妙。</p><p>乐知堂内人头涌动，想必都是组团前来打卡的公务员，保安在旁维持秩序，只听他不停劝导：“不能摸呀，这个不好摸的呀。”我凑近去一看，才发现里面展出的是一盆盆极细小的水草，和形状各异的小巧太湖石摆在一起，作为盆景放在台案上。</p><p><a href="DSC3285.jpg" title="石菖蒲" class="gallery-item"><img src="DSC3285.jpg" alt="石菖蒲"><span class="image-caption">石菖蒲</span></a></p><p><a href="DSC3276.jpg" title="石菖蒲" class="gallery-item"><img src="DSC3276.jpg" alt="石菖蒲"><span class="image-caption">石菖蒲</span></a><br><a href="DSC3277.jpg" title="石菖蒲" class="gallery-item"><img src="DSC3277.jpg" alt="石菖蒲"><span class="image-caption">石菖蒲</span></a></p><p>既非童年记忆里的菖蒲叶子，期待的菖蒲花也踪影全无，心中失望，差点掉头就走。</p><p>后来回家仔细研究，才知道这是菖蒲科菖蒲属的石菖蒲，自古是风雅之士赏玩的案头清供。又叫金钱蒲，足见君子爱财之本意。</p><p>端午节与艾叶一起挂在门上辟邪的叶子，则是天南星科菖蒲属的菖蒲，它也会开花，但小小一朵，呈黄绿色，极不起眼，也难怪我毫无印象。菖蒲会在秋天结出红色的浆果，小时候倒是经常在田里或是沟边见到，只是全然不知那是菖蒲的果子。</p><p>而此行本欲一睹芳容的紫色菖蒲花，又别是一种，叫做唐菖蒲，是鸢尾科唐菖蒲属，原产于非洲好望角，国内亦有广泛栽培。唐菖蒲是杂交品种，花色繁多，并不限于紫色，但因为不野生，所以上世纪末的乡下老家自然无缘得见。</p><p>至此算是了然了，这三者除了名字相近，都叫菖蒲，生物学意义上本来就没有多大关联 。如果博闻强识，号人肉百科全书如肥猫者，定无此厄，然而我不学无术，自然免不了乘兴而来落寞而归。</p><hr><p>曲园是第二次来，上次来还是<a href="/tours/2020-suzhou/#%E6%9B%B2%E5%9B%AD">三年前</a> <em>（也许是第三次，因为那次已说是重游，只不过更早的一次，我已经没什么印象了，也没有留下文字或照片）</em>。曲园没有大变，倒是自己的生活天翻地覆，从此地的游客变成了居民，抚今追昔，不无沧桑陵谷之思。</p><p><a href="DSC3358.jpg" title="前厅画像" class="gallery-item"><img src="DSC3358.jpg" alt="前厅画像"><span class="image-caption">前厅画像</span></a></p><p>停车靠近侧门，侧门向来是锁闭的，门上贴的春联尚未褪色：</p><blockquote><p>新元肇启开泰运<br>前兔似锦呈吉祥</p></blockquote><p>今年的春节过得略草草，一读才反应过来已是兔年。游到后院，办公室的窗玻璃上也贴着兔年的贴纸，颇为可爱。若按旧俗，虎年的小朋友都十三岁了。真可谓年与时驰，意与日去，接下来可不能悲守穷庐，否则就真变成多不接世，遂成枯落了。</p><p><a href="DSC3251.jpg" title="兔年春联" class="gallery-item"><img src="DSC3251.jpg" alt="兔年春联"><span class="image-caption">兔年春联</span></a><br><a href="DSC3326.jpg" title="窗户上兔年的贴纸" class="gallery-item"><img src="DSC3326.jpg" alt="窗户上兔年的贴纸"><span class="image-caption">窗户上兔年的贴纸</span></a></p><p>在苏州，曲园只是个不见经传的小园子，游客不多，又不收门票，虽然不像艺圃的延光阁一样每天茶客满座，后院亦尽有二三长者，或盘桓屋檐下，或逍遥水池边，从容闲坐，谈天品茗，于小小院落之中各占浮生半日闲，倒显得拍完照就走的我有些匆忙了。</p><p><a href="DSC3352.jpg" title="树荫下聊天的阿姨" class="gallery-item"><img src="DSC3352.jpg" alt="树荫下聊天的阿姨"><span class="image-caption">树荫下聊天的阿姨</span></a></p><p>小竹里馆清幽不减，石榴花也开得极好。蔷薇倒差不多都谢了，只剩认春轩前数朵。</p><p><a href="DSC3377.jpg" title="小竹里馆" class="gallery-item"><img src="DSC3377.jpg" alt="小竹里馆"><span class="image-caption">小竹里馆</span></a><br><a href="DSC3329.jpg" title="石榴花" class="gallery-item"><img src="DSC3329.jpg" alt="石榴花"><span class="image-caption">石榴花</span></a><br><a href="DSC3299.jpg" title="蔷薇" class="gallery-item"><img src="DSC3299.jpg" alt="蔷薇"><span class="image-caption">蔷薇</span></a></p><p>池中锦鲤可百许头，比前几天在耦园看到的多而且活泼。这些鱼也很爱聚众的样子，时东时西，总是抱团游走。</p><p><a href="DSC3350.jpg" title="池鱼" class="gallery-item"><img src="DSC3350.jpg" alt="池鱼"><span class="image-caption">池鱼</span></a></p><p>又在后院刻石上曲园老人的自制印，方圆并济，立意极佳，比例极协调。曲园老人如果生活在当代，想必也足以成为一个了不起的设计师吧？</p><p><a href="DSC3323.jpg" title="曲园" class="gallery-item"><img src="DSC3323.jpg" alt="曲园"><span class="image-caption">曲园</span></a></p><p>最后是陶小婧压轴出场。</p><p><a href="DSC3360.jpg" title="在乐知堂前" class="gallery-item"><img src="DSC3360.jpg" alt="在乐知堂前"><span class="image-caption">在乐知堂前</span></a><br><a href="DSC3331.jpg" title="陶小婧在曲园" class="gallery-item"><img src="DSC3331.jpg" alt="陶小婧在曲园"><span class="image-caption">陶小婧在曲园</span></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article-gallery&quot;&gt;&lt;p&gt;曲园这周有个菖蒲展。失业在家，终日都是闲暇，就骑上小电驴载着陶小婧进了城。&lt;/p&gt;
&lt;p&gt;菖蒲自然趁着端午的时令，虽然今年过节颇有些迟。小时候过节，除了粽子，家里还要做咸鸭蛋、茶叶蛋和蒸发糕，有几年还蒸过蒜头。蒜头是成捆蒸的，不知别处有没有这样的吃法。起锅，端上桌，就着腾腾热气剥开蒜皮，辛香扑鼻。蒜子是秀润的白色，入口辣中带甜，并不像配菜的蒜泥那般呛人，只是不知道后来为何不太做了。&lt;/p&gt;
&lt;p&gt;咸鸭蛋是小朋友的最爱，他们倒不是为了吃，而是拿去碰。通常先在盆里翻检一遍，取蛋形长而锐者，握在掌心，掂一掂分量，再举到透光处，仔细观察内部有没有多余的气孔，总之要紧实沉手。选好了，一溜烟奔到屋场，遇到别的小朋友，两边叫阵，各自撸起袖子亮出鸭蛋，定要来一番比试较量。这时免不了群众围观，几个小脑瓜团团围住，中间两位选手凝神屏气，蓄力待发。鸭蛋的两头自是有尖有圆，将咸鸭蛋攥在手心，只露尖头，防止被狡黠的对手从侧面击破。蓦地一声稚叱，好似天雷交地火，火星撞地球，啪的一声，刹那间胜负已分。观者尚未分明，胜者已经欢欣踊跃，气势高扬挑选下一个对手，败者则垂头丧气，默默将破掉的咸鸭蛋剥了壳含泪吞下。&lt;/p&gt;
&lt;p&gt;端午一早晨，大人就会在大门两侧的竹筒内插上菖蒲和艾叶 &lt;em&gt;（艾叶本地又唤作蕲艾）&lt;/em&gt;。当时只晓得包粽子的是粽叶，并不知道这透着夏日清香的修长的叶子叫菖蒲。&lt;/p&gt;</summary>
    
    
    
    <category term="游历" scheme="https://kaerozhi.com/categories/tours/"/>
    
    
    <category term="苏州" scheme="https://kaerozhi.com/tags/%E8%8B%8F%E5%B7%9E/"/>
    
    <category term="园林" scheme="https://kaerozhi.com/tags/%E5%9B%AD%E6%9E%97/"/>
    
    <category term="曲园" scheme="https://kaerozhi.com/tags/%E6%9B%B2%E5%9B%AD/"/>
    
    <category term="菖蒲" scheme="https://kaerozhi.com/tags/%E8%8F%96%E8%92%B2/"/>
    
  </entry>
  
  <entry>
    <title>相城基督堂</title>
    <link href="https://kaerozhi.com/blog/xiangcheng-christ-church/"/>
    <id>https://kaerozhi.com/blog/xiangcheng-christ-church/</id>
    <published>2023-06-02T00:00:00.000Z</published>
    <updated>2023-07-13T00:48:30.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>散步路过相城基督堂，时值黄昏，教堂方正的轮廓和屋顶的十字架在黯淡的半空中黝黑如铸铁。于路口小伫，晚风颇有些萧瑟，成群的蚊虫在一旁忙碌而自在地嗡嗡盘旋着，不远处是虎丘湿地公园未开发的荒凉草甸，路面上不时有大货车轰隆而来扬尘而去。一时间有些茫然自失，有句话冷不丁在脑中响起：神啊，救救这世人。</p><p>然后反应过来，自己既不信神，世人也无需拯救，一笑遂去。</p><p><a href="DSC3221.jpg" title="相城基督堂" class="gallery-item"><img src="DSC3221.jpg" alt="相城基督堂"><span class="image-caption">相城基督堂</span></a></p><span id="more"></span><p><a href="DSC3209.jpg" title="虎丘湿地公园一角" class="gallery-item"><img src="DSC3209.jpg" alt="虎丘湿地公园一角"><span class="image-caption">虎丘湿地公园一角</span></a></p><p>虎丘湿地公园占地面积怕是有半个苏州城那么大了，一直无缘游赏。今天路过才发现，这地方要全部开发完恐怕还尚需时日，风吹草低，茫茫无际，只欠晚归的牛羊。</p><p>湿地公园边的一条小路上，搭满了长条形的箱式临时房屋，聚居着在此施工的民工与工程相关人员。差不多是晚饭时间了，十几辆三轮车凑成一个临时的廉价市集，大多挂着黄色的白炽灯，供应简餐盒饭与各色熟食，甚至有一辆提供理发服务的小巴士。此地的居民纷纷出动，在这荒废且蓬勃的草甸边缘，倒也自成一番热闹的景象。</p><p><a href="DSC3210.jpg" title="某条小路" class="gallery-item"><img src="DSC3210.jpg" alt="某条小路"><span class="image-caption">某条小路</span></a></p><p>又记，生活在南方，夏天的蚊虫就无可避免。陶小婧每次出门，总不免被叮出满身的包。而非敏感体质的我，顶多也就是几个淡淡的红点而已，令她颇为嫉妒。</p><p>今天更是搞笑，两个虎口外侧各被咬出一个大包，完全对称，看来也有恪守审美之道的讲究蚊子。人要吃饭，蚊子就要吸血，大家都只能遵从自然法则讨生活，Respect。</p><p><a href="DSC3205.jpg" title="两只手叮出来两个对称的包" class="gallery-item"><img src="DSC3205.jpg" alt="两只手叮出来两个对称的包"><span class="image-caption">两只手叮出来两个对称的包</span></a></p><p>又，在河边看到两只水鸟，高额红喙，羽毛全黑，惟两翅有白色，一前一后，悠游水面。后来走入荷叶从中，或相逐嬉戏，或低头啄食。回家搜索资料，原来叫<a href="https://baike.baidu.com/item/%E9%BB%91%E6%B0%B4%E9%B8%A1/4524074">黑水鸡</a>，是鹤形目秧鸡科水鸡属，倒是从前所不知道的新物种。</p><p><a href="DSC3201.jpg" title="荷叶中的黑水鸡" class="gallery-item"><img src="DSC3201.jpg" alt="荷叶中的黑水鸡"><span class="image-caption">荷叶中的黑水鸡</span></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article-gallery&quot;&gt;&lt;p&gt;散步路过相城基督堂，时值黄昏，教堂方正的轮廓和屋顶的十字架在黯淡的半空中黝黑如铸铁。于路口小伫，晚风颇有些萧瑟，成群的蚊虫在一旁忙碌而自在地嗡嗡盘旋着，不远处是虎丘湿地公园未开发的荒凉草甸，路面上不时有大货车轰隆而来扬尘而去。一时间有些茫然自失，有句话冷不丁在脑中响起：神啊，救救这世人。&lt;/p&gt;
&lt;p&gt;然后反应过来，自己既不信神，世人也无需拯救，一笑遂去。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;DSC3221.jpg&quot; title=&quot;相城基督堂&quot; class=&quot;gallery-item&quot;&gt;&lt;img src=&quot;DSC3221.jpg&quot; alt=&quot;相城基督堂&quot;&gt;&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="日常" scheme="https://kaerozhi.com/categories/blog/"/>
    
    
    <category term="苏州" scheme="https://kaerozhi.com/tags/%E8%8B%8F%E5%B7%9E/"/>
    
    <category term="公园" scheme="https://kaerozhi.com/tags/%E5%85%AC%E5%9B%AD/"/>
    
    <category term="虎丘湿地公园" scheme="https://kaerozhi.com/tags/%E8%99%8E%E4%B8%98%E6%B9%BF%E5%9C%B0%E5%85%AC%E5%9B%AD/"/>
    
    <category term="教堂" scheme="https://kaerozhi.com/tags/%E6%95%99%E5%A0%82/"/>
    
  </entry>
  
  <entry>
    <title>用 Synology Drive 同步 Obsidian 仓库</title>
    <link href="https://kaerozhi.com/playground/apps/obsidian-sync-with-synology-drive/"/>
    <id>https://kaerozhi.com/playground/apps/obsidian-sync-with-synology-drive/</id>
    <published>2023-05-31T11:36:27.000Z</published>
    <updated>2023-07-15T07:10:58.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>转用 Hexo 以后，在桌面端更新是没问题了，但如果出门在外，又希望分享一些东西，能否做到呢？</p><p>我平时都用 Obsidian 来写 Markdown，在 <a href="/playground/web/hexo-and-new-blog/">Hexo 的安装与配置</a> 一文中，我介绍了如何配置 Obsidian 与 Hexo 无缝协作。Obsidian 也有移动端 App，所以这两天就想，能否通过网盘同步 Obsidian 的仓库，随时随地写 Hexo 里面的 Markdown 呢？</p><span id="more"></span><p>同时为了开源节流，如果目标能通过 NAS 搞定，就尽量不使用云服务。我家的 NAS 装的是 Unraid，同时也通过虚拟机装了群晖。最近因为 OneDrive 被墙，所以一直考虑逐步用 Synology Drive 作为替代。既然如此，不如就先试试能否用 Synology Drive 来同步 Obsidian 仓库。</p><h2 id="synology-drive 服务器端">Synology Drive 服务器端</h2><p>打开 Synology Drive 管理控制台，在团队文件夹里启用 Hexo 所在的 <code>web</code> 文件夹。</p><p><a href="image-20230605073051037.png" title="Synology Drive 服务器端配置" class="gallery-item"><img src="image-20230605073051037.png" alt="Synology Drive 服务器端配置"><span class="image-caption">Synology Drive 服务器端配置</span></a></p><p>不过团队文件夹只能选择根目录下面的文件夹，不能直接定位至 Markdown 文档所在的 <code>/web/Hexo/source</code>，略有遗憾。</p><h2 id="synology-drive 手机端">Synology Drive 手机端</h2><p>服务器端的配置就到此为止，接下来下载移动端的 Synology Drive。</p><p>我用的是 Android 手机，App 怎么下载不赘述。打开 App，登录到自家的群晖，进入主界面，从下方的主菜单转到“<strong>更多</strong>”。</p><p><a href="synology-drive-settings.png" class="gallery-item"><img src="synology-drive-settings.png" alt=""></a></p><p>然后点击“备份和同步任务”，里面只有两个选项，一个是“照片备份”，群晖用户备份照片肯定用 Synology Photos，这里略过就好。另外一个是“同步任务”：</p><p><a href="bcc97caa90e8e04bfa21ba54643d15a.jpg" title="备份和同步任务" class="gallery-item"><img src="bcc97caa90e8e04bfa21ba54643d15a.jpg" alt="备份和同步任务"><span class="image-caption">备份和同步任务</span></a></p><p>点击同步任务，初次打开列表自然是空白的，直接点击右上角的加号，开始创建任务：</p><p><a href="724ab0f60709fefb8416589d9747982.jpg" title="创建同步任务" class="gallery-item"><img src="724ab0f60709fefb8416589d9747982.jpg" alt="创建同步任务"><span class="image-caption">创建同步任务</span></a></p><p>我们逐个设置界面上的各种选项：</p><ol><li><strong>服务器上的远程路径</strong>，就是我们之前在服务器上指定的 <code>Hexo/source</code> 文件夹；</li><li><strong>本地路径</strong>，Synology Drive 会提示“<em>请先允许 Drive 访问文件夹</em>”，点击确定；<br><a href="15242e4fec999c6c7bea0bd07717729.jpg" title="文件夹权限提示" class="gallery-item"><img src="15242e4fec999c6c7bea0bd07717729.jpg" alt="文件夹权限提示"><span class="image-caption">文件夹权限提示</span></a><br>我们在文件管理器的根目录先新建一个 <code>Hexo</code> 目录，然后在其中再建一个 <code>source</code> 文件夹，这样就与服务器端对应上了；</li><li><strong>模式</strong>一般选择“<strong>双向</strong>”，如果手机上只限于收集和记录灵感，正式的文章留到电脑上再编辑，那选择“<strong>仅上传</strong>”也 OK，需要同步的数据会小很多；</li><li>其他的保持默认即可，也可以根据自身偏好自行配置。</li></ol><p>最后点击右上角的“<strong>完成</strong>”，回到同步任务界面，应该会看到当前的任务已经在同步了。</p><p><a href="sycn-tasks.png" title="任务同步中" class="gallery-item"><img src="sycn-tasks.png" alt="任务同步中"><span class="image-caption">任务同步中</span></a><br>打开系统文件管理器，找到 <code>Hexo/source</code> 文件夹，确认无误，Synology Drive 客户端的配置就完成了。</p><h2 id="obsidian-的配置">Obsidian 的配置</h2><p>同样，先安装 Obsidian App，进入主界面。Obsidian 并不会根据系统语言自动配置界面语言，我们稍后再设置。</p><p><a href="bcee00f2d01f74c79954d1642d9022e.jpg" title="Obisidian 主界面" class="gallery-item"><img src="bcee00f2d01f74c79954d1642d9022e.jpg" alt="Obisidian 主界面"><span class="image-caption">Obisidian 主界面</span></a></p><p>点击主界面上的 <code>Open folder as vault</code>，找到我们之前同步的 <code>Hexo/source</code> 文件夹，选择底部的“<strong>使用此文件夹</strong>”：</p><p><a href="edb4513f05000f3c2feaca8abac6f90.jpg" title="使用此文件夹" class="gallery-item"><img src="edb4513f05000f3c2feaca8abac6f90.jpg" alt="使用此文件夹"><span class="image-caption">使用此文件夹</span></a></p><p>然后就可以将这个文件夹作为 Obsidian 仓库使用了，打开其中的一个 Markdown 文档 试试：</p><p><a href="b668b16e0c90090e71749aaf9469943.jpg" title="Markdown 编辑界面" class="gallery-item"><img src="b668b16e0c90090e71749aaf9469943.jpg" alt="Markdown 编辑界面"><span class="image-caption">Markdown 编辑界面</span></a></p><p>Bingo！</p><p>最后我们手动配置一下界面语言。</p><p>点击右上角的仓库图标，从左侧滑出主菜单，点齿轮图标进入设置界面。选择 <code>About</code>，第二项 <code>Language</code> 找到简体中文，然后 <strong>Relaunch</strong> 重启，就是中文界面了。</p><p><a href="4c13d472221af160f87077403730a06.jpg" title="配置中文界面" class="gallery-item"><img src="4c13d472221af160f87077403730a06.jpg" alt="配置中文界面"><span class="image-caption">配置中文界面</span></a></p><p>至此目标全部达成，撒花~</p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article-gallery&quot;&gt;&lt;p&gt;转用 Hexo 以后，在桌面端更新是没问题了，但如果出门在外，又希望分享一些东西，能否做到呢？&lt;/p&gt;
&lt;p&gt;我平时都用 Obsidian 来写 Markdown，在 &lt;a href=&quot;/playground/web/hexo-and-new-blog/&quot;&gt;Hexo 的安装与配置&lt;/a&gt; 一文中，我介绍了如何配置 Obsidian 与 Hexo 无缝协作。Obsidian 也有移动端 App，所以这两天就想，能否通过网盘同步 Obsidian 的仓库，随时随地写 Hexo 里面的 Markdown 呢？&lt;/p&gt;</summary>
    
    
    
    <category term="玩艺" scheme="https://kaerozhi.com/categories/playground/"/>
    
    <category term="软件" scheme="https://kaerozhi.com/categories/playground/apps/"/>
    
    
    <category term="Obsidian" scheme="https://kaerozhi.com/tags/Obsidian/"/>
    
    <category term="Synology Drive" scheme="https://kaerozhi.com/tags/Synology-Drive/"/>
    
    <category term="NAS" scheme="https://kaerozhi.com/tags/NAS/"/>
    
  </entry>
  
</feed>
