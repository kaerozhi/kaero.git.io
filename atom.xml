<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>waxa.design</title>
  
  <subtitle>Stories should be told.</subtitle>
  <link href="https://waxa.design/atom.xml" rel="self"/>
  
  <link href="https://waxa.design/"/>
  <updated>2023-07-29T08:50:33.768Z</updated>
  <id>https://waxa.design/</id>
  
  <author>
    <name>Kaero</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>姑苏环古城健步</title>
    <link href="https://waxa.design/tours/walk-around-the-ancient-gusu/"/>
    <id>https://waxa.design/tours/walk-around-the-ancient-gusu/</id>
    <published>2023-07-27T13:31:27.000Z</published>
    <updated>2023-07-29T08:50:33.768Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><h2 id="缘起"><a href="#缘起" class="headerlink" title="缘起"></a>缘起</h2><p>越绝书云：<em>吴大城，周四十七里二百一十步二尺。陆门八，其二有楼。水门八。南面十里四十二步五尺，西面七里百一十二步三尺，北面八里二百二十六步三尺，东面十一里七十九步一尺。阖庐所造也。吴郭周六十八里六十步。</em></p><p>吴地记则云：<em>阖闾城，周敬王六年伍子胥筑。大城周回四十二里三十步，小城八里二百六十步。</em></p><p>吴门表隐对苏州的热爱溢于言表，增加了许多普通人关注不到的数字：<em>周四十五里，长五千六百五丈，高二丈八尺，厚一丈八尺，楼六座，垛三千五十一个。</em></p><p>虽然不知道古里与今里的换算比例如何，宋代的吴地记与战汉之间的越绝书规模已略有不同，越绝书中的吴大城，东面最长，南次之，北又次之，西面最短，是个不规则的梯形，而今天的苏州古城则与吴地记年代接近的平江图基本一致，是南北长而东西短的长方形。所以说苏州自建城以来，虽然城址从未更易，但城墙的覆盖范围应该还是动过的。</p><p>按照两步路上网友共享的<a href="https://www.2bulu.com/track/t-c1dA39t2Ld3p%252FR2KBg5Tzw%253D%253D.htm">轨迹</a>，绕城一周，约 16.8 公里，以每小时五公里的配速，大概要花三个半小时。我和陶小婧走走拍拍停停，夏天酷热，今年的高温又格外不正常，所以每次只能走两三个小时，足足走了四趟才走完。</p><span id="more"></span><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p>环城步道的配置非常完善，平均五百米左右就能找到一个公共卫生间，自动售卖机则更多，一般卫生间附近总会有一个。比如齐门公园内的这个卫生间，自动售卖机就立在门外左侧。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2902.jpg" title="耦园东入口外的售卖机" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2902.jpg" alt="耦园东入口外的售卖机"><span class="image-caption">耦园东入口外的售卖机</span></a><br><a href="/tours/walk-around-the-ancient-gusu/DSC2586.jpg" title="齐门附近的公共卫生间" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2586.jpg" alt="齐门附近的公共卫生间"><span class="image-caption">齐门附近的公共卫生间</span></a></p><p>有的售卖机还提供热饮 <em>（不确定是否全部）</em>，秋冬之际转凉，健步途中喝一罐热饮，暖彻心扉，多么美好。现在还是夏天，我们就没有尝试了。当然，售卖机的价格比便利店贵，标准的农夫山泉三块钱一瓶，可以参考。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2589.jpg" title="天冷了还有暖饮供应，可谓贴心。" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2589.jpg" alt="天冷了还有暖饮供应，可谓贴心。"><span class="image-caption">天冷了还有暖饮供应，可谓贴心。</span></a></p><p>护城河畔散落着众多公园，而步道则像一条串绳，将这些公园连在一起，所以经常能看见公园的健身区域，还有锻炼休闲的老年群体。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2592.jpg" title="齐门公园内的健身区域" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2592.jpg" alt="齐门公园内的健身区域"><span class="image-caption">齐门公园内的健身区域</span></a></p><p>步道的每个入口几乎都立了禁止遛狗的警示牌，狗狗很可爱，但如果犬主不提高自身的觉悟，那确实还是禁掉的好。除此之外，还有禁止游泳和垂钓的牌子。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2593.jpg" title="禁止遛狗" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2593.jpg" alt="禁止遛狗"><span class="image-caption">禁止遛狗</span></a></p><h2 id="平门"><a href="#平门" class="headerlink" title="平门"></a>平门</h2><p>因为住在城北，所以每次进城，不是走人民路过平门桥，就是走齐门北大街过齐门桥。不过毕竟还是平门桥更多一点，姑且自平门始。</p><p>吴地记云：<em>平门，北面有水陆通毗陵。子胥平齐大军从此门出，故号平门。东北三里，有殷贤臣申公巫咸坟，亦号巫门。西北二里有吴偏将军孙武坟。西北三里有酱醋城，汉刘濞筑。东北三里有颍川太守陆宏坟。</em></p><p>毗陵即常州，越绝书云：<em>毗陵，故为延陵，吴季子所居</em>，从平门出发是不错的。</p><p>巫咸大概是一个上古时期负责为王室占卜的巫祝氏族，不太可能在当时的吴越活动，所以葬于此处的申公实则是『吴越春秋』中的申公巫臣：<em>「寿梦」二年，楚之亡大夫申公巫臣适吴，以为行人。教吴射御，导之伐楚。楚庄王怒，使子反将，败吴师。二国从斯结雠。于是吴始通中国而与诸侯为敌。</em></p><p>申公巫臣可谓伍子胥的大前辈，一样的生为楚人，却反过来助吴伐楚，大大的楚奸，并且封地都同样在申<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>。虽然巫臣叛楚要比伍子胥奔吴狗血得多，但我们都知道孙武和伍子胥有可能是同一个人，巫臣没准也和伍子胥共享了一部分故事原型。</p><p>孙武坟现已辟为孙武纪念园，与文征明墓毗邻。从孙武纪念园到平门，按照现在的里程有 4.8 公里，若这样换算，宋代的一里岂不等于现在的 2.4 公里？所以这个二里大概是不对的，对照越绝书的说法：<em>巫门外大冢，吴王客齐孙武冢也，去县十里。善为兵法。</em> 十里与现在的 4.8 公里就差不多了。</p><p>至于这位颍川太守陆宏，则应该是吴中四姓之一陆氏的先祖，准确一点应写做陆闳。陆闳的事迹见后汉书独行列传，只有寥寥几句话，因为传主其实是他的孙子陆续：<em>「陆续」祖父闳，字子春，建武中为尚书令。美姿貌，喜著越布单衣，光武见而好之，自是常敕会稽郡献越布</em>。</p><p>巫臣与陆闳的墓，以孙武墓为标尺，大概都在白荡湖以北，那边一大片都是高尔夫球场，平民百姓应该无由得见了。</p><h3 id="平门桥"><a href="#平门桥" class="headerlink" title="平门桥"></a>平门桥</h3><p><a href="/tours/walk-around-the-ancient-gusu/DSC2372.jpg" title="远望平门桥" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2372.jpg" alt="远望平门桥"><span class="image-caption">远望平门桥</span></a></p><p>苏州城一横一竖两条主干道，干将路横穿东西，人民路纵贯南北，所以同样是北门，人民路上的平门桥可比偏东北的齐门桥豪华不少。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2363.jpg" title="平门桥" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2363.jpg" alt="平门桥"><span class="image-caption">平门桥</span></a></p><p>从平门桥西眺，会先看到平门水闸，也修得颇为壮观，若是初来乍到，恐怕容易误会那便是平门的城楼。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2367.jpg" title="平门水闸" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2367.jpg" alt="平门水闸"><span class="image-caption">平门水闸</span></a></p><p>自平门桥入城，很快就到北寺塔。从北寺塔路口右转是桃花坞大道，十五分钟可步行至唐寅故居。去年年底开始计划迁居苏州，在城里看房子，差点就买在桃花坞了，陶小婧至今嗟叹不已。</p><h3 id="平门城楼"><a href="#平门城楼" class="headerlink" title="平门城楼"></a>平门城楼</h3><p>平门城门大概比旁边的水闸更高一倍，城楼上的匾额题着「齐泰平和」。或许是因为齐门已经没了，苏州人心中有愧，不能忘情，所以就放在一起说了。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2392.jpg" title="齐泰平和" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2392.jpg" alt="齐泰平和"><span class="image-caption">齐泰平和</span></a></p><p>苏州火车站与平门隔河相望，大屋顶颇为惹眼。虽说与贝聿铭的苏博一种风格，但我不太喜欢，无论是远观还是近赏，这个屋顶都太重太方正了，实在是颇为压抑。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2382.jpg" title="苏州站近在咫尺" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2382.jpg" alt="苏州站近在咫尺"><span class="image-caption">苏州站近在咫尺</span></a><br><a href="/tours/walk-around-the-ancient-gusu/DSC2387.jpg" title="陶小婧与火车站" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2387.jpg" alt="陶小婧与火车站"><span class="image-caption">陶小婧与火车站</span></a></p><p>火车站南广场立着一座高大的雕像，我非常后知后觉，今年才刚知道那雕像是范仲淹。来苏州之前，对苏州的认知不是吴越争霸就是吴门书画，沈周文征明唐伯虎之类的，来苏州之后才知道范仲淹在苏州的地位有多高。</p><h3 id="桃花坞公园"><a href="#桃花坞公园" class="headerlink" title="桃花坞公园"></a>桃花坞公园</h3><p>苏州的公园都很别致，亭阁廊桥，花草树木，一般都比其他城市多一些楚楚风致，颇有园林的余韵。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2398.jpg" title="小桥" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2398.jpg" alt="小桥"><span class="image-caption">小桥</span></a><br><a href="/tours/walk-around-the-ancient-gusu/DSC2411.jpg" title="树木清幽" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2411.jpg" alt="树木清幽"><span class="image-caption">树木清幽</span></a><br><a href="/tours/walk-around-the-ancient-gusu/DSC2395.jpg" title="岸边的石头亦颇不俗" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2395.jpg" alt="岸边的石头亦颇不俗"><span class="image-caption">岸边的石头亦颇不俗</span></a></p><p>照理说离阊门这么近，桃花坞应该很热闹才对，唐伯虎诗云：</p><blockquote><p>世间乐土是吴中，中有阊门更擅雄。翠袖三千楼上下，黄金百万水西东。五更市卖何曾绝，四远方言总不同。若使画师描作画，画师应道画难工。</p></blockquote><p>但在姑苏城里，这一带应该算是落后的片区，没有知名的旅游景点，配套也不好，人气颇为冷清。唐寅故居开发了好几年，总听说就要开了，但就是没开起来，我们之所以放弃这边的房子，也是嫌商业不够发达，生活可能不便利。</p><p>桃花坞最有名的自然是桃花庵歌：</p><blockquote><p>桃花坞里桃花庵，桃花庵里桃花仙。桃花仙人种桃树，又折花枝当酒钱。酒醒只在花前坐，酒醉还须花下眠。花前花后日复日，酒醉酒醒年复年。不愿鞠躬车马前，但愿老死花酒间。车尘马足贵者趣，酒盏花枝贫者缘。若将富贵比贫贱，一在平地一在天。若将贫贱比车马，他得驱驰我得闲。世人笑我忒疯颠，我笑世人看不穿。不见五陵豪杰墓，无酒无花锄作田。</p></blockquote><p>考其始末，则见于吴门表隐：<em>桃花坞，宋太师章楶所构，多栽桃李，郡人游春于此，时称北章。</em> </p><p>东坡有一阕特别有名的水龙吟：<em>春色三分，二分尘土，一分流水。细看来，不是杨花，点点是离人泪。</em> 题作「次韵章质夫杨花词」，这位章质夫就是桃花坞的初代主人宋太师章楶。楶本为福建南平人，及老，以资政殿学士、中太一宫使致仕，居苏州，为江苏毘陵章氏始祖。毘是毗的异体字，上面已经说过，毘陵即延陵季子的封地常州。</p><p>不过作为公园，人少一些倒更合我的胃口，相比胥门、盘门还有东园的喧闹景象，这里除了偶尔跑步经过的锻炼者，可谓是人迹罕至。</p><h3 id="平民区"><a href="#平民区" class="headerlink" title="平民区"></a>平民区</h3><p>平门往西一带的民居都比较矮小破旧，巷弄里出来活动的人也很少。游览时遇到一位居于此处的大姐，她笑着说这里就是苏州的贫民区，平时没什么人来。</p><p>帝都俗语云：<em>东富西贵南贫北贱</em>，走完一圈，我怀疑苏州城也有类似的格局，齐门也很落寞的样子，不过好歹建了别墅区，多少摆脱了几分贫贱的嫌疑。只不过作为刚刚落脚的外来人口，又不好妄下评断了。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2422.jpg" title="绿化带就当作篱笆了" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2422.jpg" alt="绿化带就当作篱笆了"><span class="image-caption">绿化带就当作篱笆了</span></a><br><a href="/tours/walk-around-the-ancient-gusu/DSC2424.jpg" title="一户人家" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2424.jpg" alt="一户人家"><span class="image-caption">一户人家</span></a></p><p>以前去日本，那边的人家，即便是临街傍路，地方再逼仄，家家户户门口窗前都种着花草，颇可以窥见日本人生活的情趣与追求，国内是比较少见的。但苏州就比较多，即便是看上去破败寥落的这一带，花花草草也随处可见，逛起来饶有兴味。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2432.jpg" title="种花艺草" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2432.jpg" alt="种花艺草"><span class="image-caption">种花艺草</span></a><br><a href="/tours/walk-around-the-ancient-gusu/DSC2429.jpg" title="一朵红色的蔷薇" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2429.jpg" alt="一朵红色的蔷薇"><span class="image-caption">一朵红色的蔷薇</span></a></p><p>大概和公园里的花木楼阁一样，园艺盆景也是由于园林产业发达，风尚流行，普通人家添置起来也较为便捷实惠。说起来皮市街离平门齐门都不远，偶尔去逛逛也不错的。</p><h2 id="齐门"><a href="#齐门" class="headerlink" title="齐门"></a>齐门</h2><p>齐门的修筑伴着一个凄怆惨切的故事。</p><p>吴越春秋：<em>「阖闾」复谋伐齐，齐子使女为质于吴，吴王因为太子波聘齐女。女少思齐，日夜号泣，因乃为病。阖闾乃起北门，名曰望齐门，令女往游其上。女思不止，病日益甚，乃至殂落。女曰：“令死者有知，必葬我于虞山之巅，以望齐国。”阖闾伤之，正如其言，乃葬虞山之巅。</em></p><p>吴地志补了一个结尾：<em>后葬常熟海隅山东南岭，与仲雍、固章等坟相近。葬毕，化白龙冲天而去，今号为母冢坟。</em></p><p>从齐门城上北眺，现在已经很难见到虞山，更不用说遥远的齐国，面对空茫杳渺的无尽平原，少女的悲伤可想而知。</p><p>吴大概和楚一样崇巫好傩，所以死亡往往伴随着荒怪陆离的传说，齐女化白龙冲天而去，阖闾也有个宝贝女儿，据吴越春秋：<em>吴王有女滕玉，因谋伐楚，与夫人及女会蒸鱼，王前尝半而与女，女怒曰：“王食鱼辱我，不忘久生。”乃自杀。阖闾痛之，葬于国西阊门。外凿池积土，文石为椁，题凑为中，金鼎玉杯、银樽珠襦之宝，皆以送女。乃舞白鹤于吴市中，令万民随而观之，还使男女与鹤俱入羡门，因发机以掩之。杀生以送死，国人非之。</em></p><p>羡门即墓门。龙翔虞山，鹤舞吴市，公主们的气性都很大。阖闾掩杀白鹤与随观的男女万民为女儿殉葬，更是残暴不仁，所以吴越春秋随后写道：<em>湛卢之剑，恶阖闾之无道也，乃去而出，水行如楚</em>。</p><p>齐女葬于虞山之后，那位名为波或者终离的吴太子也很快死去，背后是否还有一段荀奉倩一般伤感的爱情故事，我们又不得而知了。</p><p>齐门桥北接齐门北大街，南即齐门路，齐门路下去就是苏州博物馆，苏州博物馆与拙政园忠王府相邻，再走两条巷子又是狮子林，这些名胜又无需赘述了。</p><h3 id="齐门城墙"><a href="#齐门城墙" class="headerlink" title="齐门城墙"></a>齐门城墙</h3><p>自齐门桥下往东数百米，可以看到一段城墙，就是修复过的齐门城墙，高可十余米。拾级而上，薰风吹荡，荒草滋生，虽然一路都配了石凳，但除了一个溜娃的长者，行人寥寥。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2600.jpg" title="拾级而上，可以登上齐门城墙" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2600.jpg" alt="拾级而上，可以登上齐门城墙"><span class="image-caption">拾级而上，可以登上齐门城墙</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2606.jpg" title="城墙上杂草丛生，显然并非游客热衷之地" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2606.jpg" alt="城墙上杂草丛生，显然并非游客热衷之地"><span class="image-caption">城墙上杂草丛生，显然并非游客热衷之地</span></a></p><p>苏州的风情，离不开小桥流水，粉墙黛瓦，自然也还有铺遍巷弄的青石板路。只要留心，就能在一块块的铺地石中发现原有的碑文刻字。我们在城墙上发现的这块郭桂记界，书者娴于魏碑，雍容端正，庸非俗手。只是岁月悠悠，此地今在何处？又属何人？后来者如我已不可考，当年的郭姓主人恐怕也无从预见。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2629.jpg" title="郭桂记界" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2629.jpg" alt="郭桂记界"><span class="image-caption">郭桂记界</span></a></p><p>城墙的修复工作相当考究，用于瞭望的垛口与用于射击的射孔，其开口的角度都由内向外收缩，易守难攻，高度还原。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2610.jpg" title="城墙上的射孔" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2610.jpg" alt="城墙上的射孔"><span class="image-caption">城墙上的射孔</span></a></p><p>城墙下面是护城河，原是大运河水网的一部分，船旅往来如织。而今水运的重要性早已一落千丈，河面上剩下的就只有偶尔通过的游船与清污船了。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2623.jpg" title="护城河对岸" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2623.jpg" alt="护城河对岸"><span class="image-caption">护城河对岸</span></a></p><p>城墙内侧原本是工厂区，随着城区去工业化的滚滚大潮，生产线早已迁出，但改造进程似乎并不理想。其中一栋将原有的红砖墙依照苏州的式样，刷了白色，开了圆形漏窗，做成了酒店或者民宿，其他几栋似乎仍在空置。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2604.jpg" title="城墙内侧的工厂遗址" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2604.jpg" alt="城墙内侧的工厂遗址"><span class="image-caption">城墙内侧的工厂遗址</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2619.jpg" title="辟为民宿的一栋楼" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2619.jpg" alt="辟为民宿的一栋楼"><span class="image-caption">辟为民宿的一栋楼</span></a></p><p>工厂的东侧是一片别墅区，恐怕定价不菲。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2627.jpg" title="毗邻工厂原址的别墅区" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2627.jpg" alt="毗邻工厂原址的别墅区"><span class="image-caption">毗邻工厂原址的别墅区</span></a></p><p>自城墙东端下，有「臣心拱北」的石牌坊，原是顾嗣立题在齐门城楼上的匾额，所以此处极可能是齐门原址。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2640.jpg" title="臣心拱北" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2640.jpg" alt="臣心拱北"><span class="image-caption">臣心拱北</span></a></p><p>牌坊往南是一道直通拙政园的观景长廊，或可一游。</p><h3 id="望齐台"><a href="#望齐台" class="headerlink" title="望齐台"></a>望齐台</h3><p>望齐台就在齐门桥边，傍着护城河，修筑于平地之上。</p><p>台本写作臺，上从高，下从室，也就是高处的房子。说文云：<em>台，观四方而高者</em>。吕氏春秋的注本里，高诱又细化了标准：<em>积土四方高丈曰臺，不方者曰观曰阙</em>。所以我们所熟知的鹿台铜雀台，都是可以登高望远甚至上通神灵的地方。此处平地起台，已是大大的不典，在城墙上都望不见齐国，这里就不用提了。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2351.jpg" title="平齐水韵" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2351.jpg" alt="平齐水韵"><span class="image-caption">平齐水韵</span></a></p><p>望齐台的匾额上题着「平齐水韵」，和平门一样兼顾平齐二门。前方的牌坊两侧是一副对联：</p><blockquote><p>齐女适吴难忘东鲁<br>越臣行贾隐居古陶</p></blockquote><p>上联写齐女，下联写范蠡。勾践卧薪尝胆，三千越甲竟吞吴，苏州人肯定是讨厌勾践的，但对泛舟五湖的范蠡似乎印象还可以。陶邑在今天的山东，即菏泽市定陶区，当时是极为发达的商业大都会，范蠡弃官去陶邑经商，从北边的齐门出发，算是比较合理的推断。</p><p>据说范蠡后来也曾在齐国为相，齐门齐门，齐女别家以此终，范蠡远游以此始，人生的轨迹总是各不相同。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2348.jpg" title="越臣行贾隐居古陶" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2348.jpg" alt="越臣行贾隐居古陶"><span class="image-caption">越臣行贾隐居古陶</span></a></p><p>苏州的园艺太发达了，夏天也时不时见到红叶。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2355.jpg" title="夏天的红叶" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2355.jpg" alt="夏天的红叶"><span class="image-caption">夏天的红叶</span></a></p><h2 id="娄门"><a href="#娄门" class="headerlink" title="娄门"></a>娄门</h2><p>自齐门东，至古城的东北角，望糖坊湾桥，再右转，又一刻钟可至娄门。这一段草木幽深，与民居相隔绝，在环城步道中是很特殊的，若不看对岸的建筑，足以发山林之逸想。</p><div class="justified-gallery"><p><a href="/tours/walk-around-the-ancient-gusu/DSC2681.jpg" title="野花" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2681.jpg" alt="野花"><span class="image-caption">野花</span></a><br><a href="/tours/walk-around-the-ancient-gusu/DSC2684.jpg" title="古木" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2684.jpg" alt="古木"><span class="image-caption">古木</span></a></p></div><p>吴地志云：<em>娄门本号疁门，东南，秦时有古疁县，至汉王莽改为娄县。</em> </p><p>范成大吴郡志：<em>娄县，在昆山县东北三里，一村落也，盖昆山旧治。或云在汉为疁县，后避钱镠讳，改昆山。案吴志，张昭拜辅吴将军，封娄侯，则县之为娄旧矣。汉书云改于王莽时。</em> 则娄县就是昆山的旧称，东吴时曾作为张昭的封地。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2685.jpg" title="游船" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2685.jpg" alt="游船"><span class="image-caption">游船</span></a></p><h3 id="娄上楼"><a href="#娄上楼" class="headerlink" title="娄上楼"></a>娄上楼</h3><p>齐门城墙上已没有城楼，娄门则是有城楼的。娄门桥外接园区，内通拙政园和平江路，是进城游览的必经之路。在苏州八门当中，娄门城楼的存在感数一数二。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2708.jpg" title="娄门城楼" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2708.jpg" alt="娄门城楼"><span class="image-caption">娄门城楼</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2718.jpg" title="江海扬华" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2718.jpg" alt="江海扬华"><span class="image-caption">江海扬华</span></a></p><p>娄门城楼上题着「江海扬华」的匾额。按吴门表隐：<em>六门题字，太史顾嗣立书。阊曰：气通阊阖。胥曰：姑胥拥翠。盘曰：龙蟠水陆。娄曰：江海扬华。齐曰：臣心拱北。葑曰：溪流清映。</em> </p><p>嗣立，字侠君，又字闾丘，号秀野。清康熙八年生，父予咸，顺治十八年以哭庙案失官居家。哭庙案遇难者中最著名者，即号称第一才子的金圣叹，当日江南诸生，一时俱死者十八人，唯一人死里逃生<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>，即予咸也。嗣立少年失学，有理由怀疑其童稚时，予咸已郁郁而终。嗣立至二十岁始学诗，好宾客，立酒人社，嗜酒豪饮，人称酒王酒帝，真乃狂生，在当时算得上大逆不道了。其四十生日自述诗云：<em>爱客常储千日酒，读书曾破万黄金</em>。康熙五十一年，嗣立四十三岁，终于进士及第，选庶吉士，散馆改补知县，看起来仕途不顺，然后便因病告归，至康熙六十一年卒。有秀野草堂诗集。</p><p>现在保留城楼的几座城门，娄门盘门阊门，依然沿用嗣立的题字，而平门与相门，据吴门表隐的记录，当时反而是没有城楼的。</p><p>和其他城楼不同，娄门的城楼上开发了商业，经营起了茶馆，所以人气也殊胜其余。茶馆叫做娄上楼，可谓巧而当矣。</p><p>两侧有联：</p><blockquote><p> 翠堤朱阁金阙玉虹风物四时收眼底<br> 吴苑越台秦疁汉渎江山万里换人间</p></blockquote><p><a href="/tours/walk-around-the-ancient-gusu/DSC2721.jpg" title="娄上楼" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2721.jpg" alt="娄上楼"><span class="image-caption">娄上楼</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2705.jpg" title="娄门城楼下的茶馆" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2705.jpg" alt="娄门城楼下的茶馆"><span class="image-caption">娄门城楼下的茶馆</span></a></p><p>城楼下面是一片商业街区，不知是因为我们来的时间不对，还是受之前疫情的影响，总之看上去非常冷清。两只野猫从草丛中疾迸而出，互相追逐，迅捷如电，忽而又滚作一团，发出低沉凄厉的嘶吼声。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2724.jpg" title="城楼下的商业休闲区" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2724.jpg" alt="城楼下的商业休闲区"><span class="image-caption">城楼下的商业休闲区</span></a></p><h3 id="东园"><a href="#东园" class="headerlink" title="东园"></a>东园</h3><p>从桥下穿过娄门桥，就看到娄隅增辉的牌坊，牌坊南侧便是东园入口。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2753.jpg" title="娄隅增辉" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2753.jpg" alt="娄隅增辉"><span class="image-caption">娄隅增辉</span></a></p><p>几位阿姨爷叔聚在牌坊下的亭子里唱昆曲，一位阿姨立于亭中，披黑色格子罩衫，系黄色丝巾，举着话筒，咿呀呜呕，声音有些沙哑，唱什么听不太懂，却也别有风味。</p><p>东园原为苏州动物园，动物园已于 2016 年迁往吴中的上方山，不过入口处「苏州动物园」的铭牌却仍然保留着。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2757.jpg" title="苏州动物园" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2757.jpg" alt="苏州动物园"><span class="image-caption">苏州动物园</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2838.jpg" title="路牌" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2838.jpg" alt="路牌"><span class="image-caption">路牌</span></a></p><p>东园规模颇大，风景亦佳。去时恰逢六一，小朋友们群聚嬉戏，热闹非凡。动物园的遗存亦不少，水面上的黑天鹅随处可见，还有一只鸳鸯，形单影只，孑孓孤泳，等我们绕着湖走了半圈，却发现另一只和天鹅一起留在岸边，羽毛艳丽，大概是雄的。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2791.jpg" title="天鹅与鸳鸯和谐共处" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2791.jpg" alt="天鹅与鸳鸯和谐共处"><span class="image-caption">天鹅与鸳鸯和谐共处</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2802.jpg" title="没有走丢的丑小鸭" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2802.jpg" alt="没有走丢的丑小鸭"><span class="image-caption">没有走丢的丑小鸭</span></a></p><p>考东园沿革，其地本蒋氏桃园。主人蒋炳章，字季和，号留庵，世为苏州望族。光绪二十四年中进士，掌安徽书院，三十三年授翰林院编修。辛亥革命后，又先后任江苏省议会副议长，江苏教育会总干事，1930 年去世。</p><p>炳章热心公益，创办了苏州电气厂，并主持士绅辟金门、平门。今日的草桥小学、草桥中学，即蒋炳章与王同愈于 1906 年共同创立。</p><p>蒋氏故宅即在仓街东北，人称蒋圃，又称蒋园，广三十余亩，大门约在今天的仓街 156 号。炳章后来移居蒹葭巷，蒋园由长子伯年继承。</p><p>伯年将蒋园改造为中西合璧的庄园，引入法国水蜜桃名种，在园内广为种植。其肉分黄、白二色，号为「黄金」「白玉」，一时风靡姑苏。据金季鹤的文章，蒋园水蜜桃价格昂贵，当时基层公务员的月薪不过区区十元，而一元仅能买蒋园水蜜桃两斤。今昔比照，现在的阳山水蜜桃固不足论矣。</p><p>蒋伯年又在 1933 年 8 月筹建了国内首家汽车学校，名为「私立振吴汽车工业补习学校」。学校设汽车驾驶科、机械修理科，附设内河汽船行使科，皆属国内首创。汽车学校就设在蒋家桃园内，校舍则租用仓街 119 号十余间房屋。</p><p>振吴汽车学校的开幕典礼轰动了苏州全城。仓街本在城东北一隅，商业寥落，连吃食店也没有，俗有饿煞仓街之说。开幕之日，引用记者彼时的报道：<em>一时仓街通衢，车水马龙，大有山阴道上之概。</em> <sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup> 此后蒋园乘势步入全盛，在苏州几乎是家喻户晓。</p><p>蒋伯年于 1945 年病故，蒋园逐渐荒废。七十年代，蒋园被市园林局划为树木基地，再之后改造成苏州动物园，直至 2016 年迁出。</p><p>东园的南部，儿童游乐设施很多，实属溜娃胜地，大人划船也是不错的，更何况免费，有机会必定重游。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2830.jpg" title="六一儿童节" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2830.jpg" alt="六一儿童节"><span class="image-caption">六一儿童节</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2848.jpg" title="丛林探险入口" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2848.jpg" alt="丛林探险入口"><span class="image-caption">丛林探险入口</span></a></p><p>吴楚俗多淫祀，史传不及备载，读吴门表隐，亦半为祠庙。东园入口不远，小坡下有蛇王庙小石亭，香火颇盛。或传即方孝孺庙，孝孺族诛，蛇王或当日避讳之言也。</p><p>清嘉录云：<em>蛇王庙在娄门城下，向在城外，地名毒蛇墩。凡捕蛙者，祭献不绝，明末移建今所。</em></p><h3 id="耦园东侧"><a href="#耦园东侧" class="headerlink" title="耦园东侧"></a>耦园东侧</h3><p>自东园南门出，就到了耦园的东入口。游耦园很多次，但这个入口可能还是第一次见，门前高树扶疏，流波荡漾，长桥一抹，烟瓦万家。凭栏顾盼，风柳轻扬，哀蝉四起，盘桓良久，仿佛置身于城市之外，却要问是水乡何处了。</p><p>当然，这次只是稍作停留，并没有买票进去。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2878.jpg" title="耦园入口" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2878.jpg" alt="耦园入口"><span class="image-caption">耦园入口</span></a></p><p>城曲草堂后面有收费的摇橹体验，屡次经过，未尝一试。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2853.jpg" title="摇橹码头" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2853.jpg" alt="摇橹码头"><span class="image-caption">摇橹码头</span></a></p><p>这次倒是好好地旁观了一次：舟人披蓑戴笠，形象倒是很还原，船体窄小，可对坐五六人。船自西面的码头出发，转至东南角的听橹阁楼下折返，舟人欲逞其能事，中间转角处速度极快，上下颠簸，势若疯狂，纵使来回不过十几分钟，但敏感一些的体质不免吐在当场。在岸边暗自庆幸，还好从来不曾花钱买这等罪受。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2867.jpg" title="耦园摇橹" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2867.jpg" alt="耦园摇橹"><span class="image-caption">耦园摇橹</span></a></p><h2 id="相门"><a href="#相门" class="headerlink" title="相门"></a>相门</h2><p>吴地志云：<em>匠门，又名干将门。东南水陆二路，今陆路废。</em> 是相亦通匠也，今干将路从相门桥出，倒是古今传承如一的。</p><p>吴郡志云：<em>曰将门者，吴王使干将于此铸宝剑。今谓之匠，声之变也。</em> 则将而为匠，匠复为相，声之变而又变者也。</p><p>干将铸剑故事，吴地志又云：<em>出海道，通大莱，沿松江下沪渎，阖闾使干将于此铸剑，材五山之精，合五金之英，使童女三百人祭炉神，鼓橐，金银不销，铁汁不下。其妻莫邪曰：铁汁不下，宁有计？干将曰：先师欧冶铸剑之颖不销，亲铄耳，以然成物，吾何难哉！可女人聘炉神，当得之。莫邪闻语，投入炉中，铁汁出，遂成二剑。雄号干将，作龟文；雌号莫耶，鳗文。余铸得三千，并号作龟文剑。干将进雄剑于吴王，而藏雌剑。时时悲鸣，忆其雄也。</em></p><p>大莱不知现为何处？松江沪渎今日已经反客为主，压倒苏州。干将铸剑，据此就在相门外。仆少时有诗，正用其事云：</p><blockquote><p>昔者金精與鐵英，古來埋沒淄泥輕。良工一旦鑿山得，飛焰三年淬血成。封以玉函牛斗決，投於幽水蛟龍鳴。陸離之佩今何益，拂拭神鋒傷我情。</p></blockquote><p>吴越春秋亦载铸剑故事，大同小异，莫邪并未以身投炉：<em>于是干将妻乃断发剪爪，投于炉中，使童女童男三百人鼓橐装炭，金铁乃濡。遂以成剑，阳曰干将，阴曰莫耶，阳作龟文，阴作漫理。</em> 这样的结果就合理多了。</p><p>吴门表隐亦是匠而非相：<em>匠门自狮子口直东，隋时塞。门外达黄华泾，今有匠门塘。东有干将墓，土宜锻铁。</em> 则相门自隋后淤塞千余年，道光年间只余一塘。</p><p>震涛载顾嗣立六门题字，曰阊、胥、盘、娄、齐、葑，前文已录，则此外包括平门、相门、蛇门在内，大抵皆民国解放以后，甚至晚到改革开放之后才开辟重建的了。</p><p>自相门入城，过桥便是平江小学，原是长洲县学，旧制犹存。再往西数百米，就到了大名鼎鼎的平江路。</p><h3 id="相门城楼"><a href="#相门城楼" class="headerlink" title="相门城楼"></a>相门城楼</h3><p>相门城楼基本可以视作娄门的克隆体，只不过少了一个娄上楼茶馆，人气更冷清罢了。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC3004.jpg" title="自相门桥回望相门城楼" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC3004.jpg" alt="自相门桥回望相门城楼"><span class="image-caption">自相门桥回望相门城楼</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2975.jpg" title="钩邑相徽" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2975.jpg" alt="钩邑相徽"><span class="image-caption">钩邑相徽</span></a></p><p>相门的匾额题作「钩邑相徽」，文法可疑。记者撰文释义，引张衡南都赋云：<em>御房穆以华丽，连阁焕其相徽</em>。又引李善注曰：<em>相徽，言俱美</em>。则徽作辉用。连阁者，阁相连也，互相辉映固然不错。苏州旧号勾吴，称勾邑亦可行。然一邑岂可相辉？勾与邑何足为对？吾不知其可也。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2977.jpg" title="对联" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2977.jpg" alt="对联"><span class="image-caption">对联</span></a></p><p>门柱上有联：</p><blockquote><p>古堞标分野牛斗垂天有龙光夜射；<br>雅韶绕画梁闾阎扑地看紫气东来。</p></blockquote><p>居然上下联的用典都与南昌有关。</p><p>城上悬着一面巨大的铜锣，在古代可能是斥候警报之用。自铜锣一侧攀墙下视，则是相门水路，水闸和配套的绞盘也按原样复制出来了，但恐怕闸门很少有放下去的时候吧。</p><p>相门桥傍城楼而作，因为连通的是主干道干将路，所以车流涌沸，来往不绝。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2982.jpg" title="相门桥" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2982.jpg" alt="相门桥"><span class="image-caption">相门桥</span></a></p><p>城下有城墙博物馆，未入观。</p><h3 id="商业休闲街"><a href="#商业休闲街" class="headerlink" title="商业休闲街"></a>商业休闲街</h3><p>自耦园至相门，穿过一片景观带，是一处看上去已被弃置的码头，数十艘游船停靠在岸边，风霜遍体，锈迹斑斑。</p><p>从码头过去，一直到相门城楼，看起来是一条刚刚修建好的商业休闲街区，不少地方仍在施工，除了溜娃的长者，游人不多。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2934.jpg" title="小郁林巷" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2934.jpg" alt="小郁林巷"><span class="image-caption">小郁林巷</span></a></p><p>内河对岸有一面路牌，写着「小郁林巷」，当出自耦园的旧称。吴门表隐云：<em>涉园在柳贞巷东，保宁知府陆锦建。锦孝友能文，为官清廉，乞归，创始义仓者。园又名<strong>小郁林</strong>，顾司空祖镇书；宛虹桥，蒋司马仙根书。又有沈太史志祖题联曰：「谁知太守山林之乐，时有群贤觞咏其间」。后易祝氏，更属沈藩理沅，顾震涛记。今归顾上舍宗瀚。</em></p><p>郁林，汉武帝灭南越，置郁林郡，大致相当于今天的广西。齐有郁林王萧昭业。小郁林因何得名，待考。</p><p>休闲街的入口有一个皮划艇俱乐部，支架上堆放着各色皮艇几十支。当时觉得以护城河的宽度，皮划艇或许施展不开。等登上城楼，才发现此处河面开阔，已经有两三支皮划艇在上下遨游了。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2933.jpg" title="皮划艇" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2933.jpg" alt="皮划艇"><span class="image-caption">皮划艇</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2968.jpg" title="相门外的皮划艇" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2968.jpg" alt="相门外的皮划艇"><span class="image-caption">相门外的皮划艇</span></a></p><p>休闲街上有一系列的民俗雕塑，制作工致，形象生动，大抵都是清末民初苏州街头常见的情景，诸如代写信、剃头、汰衣裳、小书摊、卖汤圆、小菜的摊子等等。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2930.jpg" title="代写信雕塑" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2930.jpg" alt="代写信雕塑"><span class="image-caption">代写信雕塑</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2991.jpg" title="卖汤圆雕塑" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2991.jpg" alt="卖汤圆雕塑"><span class="image-caption">卖汤圆雕塑</span></a></p><p>这一带的店铺布置都挺雅致，可惜这几年环境下行，人气很寥落，也不知道能不能长期经营下去。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2942.jpg" title="雅致" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2942.jpg" alt="雅致"><span class="image-caption">雅致</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2937.jpg" title="休闲" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2937.jpg" alt="休闲"><span class="image-caption">休闲</span></a></p><h3 id="苏州大学"><a href="#苏州大学" class="headerlink" title="苏州大学"></a>苏州大学</h3><p>从相门桥下穿过，一直到葑门桥，西侧围墙内都是苏州大学的校区，不可不谓之大矣。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC3019.jpg" title="院内的电动车" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC3019.jpg" alt="院内的电动车"><span class="image-caption">院内的电动车</span></a></p><p>在栏杆内窥见敬文书院的名牌。之前买房，古城内标敬文平江的学区房特别多，之前只当寻常名字，查资料才了解朱敬文先生的义行。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC3027.jpg" title="敬文书院" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC3027.jpg" alt="敬文书院"><span class="image-caption">敬文书院</span></a></p><p>步经慎明亭，有联：</p><blockquote><p> 画船著令花俯仰<br> 垂柳解同月徘徊</p></blockquote><p>又经一亭，额曰「桃李芬芳」。亦有联：</p><blockquote><p>月影渐移灯火影<br>桨声常伴读书声</p></blockquote><p>不知苏州大学的同学们是否苦读如此。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC3031.jpg" title="健步道" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC3031.jpg" alt="健步道"><span class="image-caption">健步道</span></a></p><p>这一段步道比较长，也无法通过苏州大学撤离，只能一口气走到南头的葑门。注意保持体力，带好饮料，因为要到葑门附近的公共卫生间才有自动售卖机。</p><p>近葑门，有乐文亭，金文书额。</p><p>葑门路口有一片夹竹桃，几十棵树以差不多的角度倾斜着，白色的花朵在晚风中幽幽颤动，楚楚可观。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC3080.jpg" title="夹竹桃" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC3080.jpg" alt="夹竹桃"><span class="image-caption">夹竹桃</span></a></p><h2 id="葑门"><a href="#葑门" class="headerlink" title="葑门"></a>葑门</h2><p>葑门今无门，但有葑门桥。嗣立所题「溪流清映」，今不知榜于何处。</p><p>吴郡志引伍子胥传吴东门解：<em>东门鱄门，谓䱐门也，今名葑门。越军开示浦，子胥以涛荡罗城开此门，有鱄䱐随涛入，故名。</em> 鱄䱐即江豚。太史公书有子胥传，今无此文，是子胥亦有别传乎？据此，则子胥生，引吴伐楚；子胥死，导越破吴。子胥可谓死生如一，实乃带路党的楷模！</p><p>葑，菰根也，即茭白根。湖泽中葑菱积聚处年久腐化为泥，水涸为田，谓葑田。葑门城外多葑田，葑门或由此得名。</p><p>百度百科有一段文字：<em>摇橹出城，外濠南北横流，北行可往娄门，南行可至灭渡桥 <sub class="note">今名觅渡桥</sub>；南行折东即葑门塘，经近郭市廛，可至荷花荡、黄天荡、金鸡湖。苏州风俗，六月二十四日为荷花生日，士女倾城而出，毕集于荷花荡，楼船画舫小艇，雇觅一空，葑门水门舟楫不绝。</em> 旖旎可爱，未知谁人手笔？</p><p>葑读第四声，音如凤，方回去姑苏诗云：<em>一生心道苏州好，何事摇船出葑门。</em> 今读作阴平，则不协律。</p><p>吴地志又云：<em>「相」门南三里有葑门、赤门，有赤栏将军坟在蛇门东，陆无水道，故名赤门。东南角又有鲂𫚈门，吴曾鲂裈见，因号，并非八门之数也。</em> 葑门至蛇门不过数百米，葑门、赤门与鲂𫚈门，还有同在东南角的蛇门，大概是先后更替，不太可能同时存在。</p><p>吴门表隐云：<em>敌楼有三，高三丈六尺，方广周十三丈。一在木渎市东，一在葑门外，一在枫桥，名铁铃关。</em> 则葑门外原有敌楼，其地应在现在的长岛上。</p><h3 id="葑门桥"><a href="#葑门桥" class="headerlink" title="葑门桥"></a>葑门桥</h3><p>以现在的标准来看，葑门桥很小，对向两车道，人流密集。查资料是 1969 年建成，倒比我想象的要晚一些，我原以为是民国时期修建的。葑门桥过长岛，又有叫做安利桥，因为两桥近而相连，一般统称为葑门安利桥。</p><p>长岛确实很长，自葑门至蛇门，南北正好是一公里。因为与大名鼎鼎的纽约长岛 Long Island 同名，容易让人误会是非常上流的地方，实则过去是堆放煤炭、黄砂、石子的码头。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC4725.jpg" title="葑门桥夜景" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC4725.jpg" alt="葑门桥夜景"><span class="image-caption">葑门桥夜景</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC4719.jpg" title="傍晚的步道" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC4719.jpg" alt="傍晚的步道"><span class="image-caption">傍晚的步道</span></a></p><h3 id="十全街"><a href="#十全街" class="headerlink" title="十全街"></a>十全街</h3><p>葑门桥西就是有名的十全街，老饕钟爱之地，吃食名店极多。</p><p>据吴门表隐，十全街本名十泉街，盖街有十井，十井各在何处，今并不存，记录亦不详。</p><p>另一则云：<em>平江路古名十泉里，有古井十口，华阳桥南一、奚家桥南北各一、徐家弄北一、魏家桥南北各一、朱马高桥北一、混堂巷口一<sub class="note">今无</sub>、张家桥南一、苑桥北一。</em> 原本怀疑十泉街与十泉里可能互有混淆，但平江路现存混堂巷，所以应该是没有讹误的。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC3126.jpg" title="陶小婧在十全街" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC3126.jpg" alt="陶小婧在十全街"><span class="image-caption">陶小婧在十全街</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC3091.jpg" title="三轮车" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC3091.jpg" alt="三轮车"><span class="image-caption">三轮车</span></a></p><h3 id="相王路与相王庙"><a href="#相王路与相王庙" class="headerlink" title="相王路与相王庙"></a>相王路与相王庙</h3><p>自葑门桥循十全街往西，有相王路，苏州初中四大名校之首的振华中学就在这条小路上。</p><p>振华中学旁有相王庙，初不知所祀何人，考吴门表隐：<em>赤阑相王庙在南园赤门傍，行祠在巴家园。神姓桑名湛壁 <sub class="note">旧志作黑莫郝</sub>，亦名荣，封东吴上乡土谷神、织杂诩城隍<sub class="note">五月初六日神诞</sub>，唐时已建，国朝康熙四十年织造李煦重建，请加封护国忠显王。道光元年，织造嘉禄率绅民重建，列入祀典。</em></p><p>又云：<em>相王坟在盘门东城下古蛇门傍，周击贼将军黑莫郝所葬，舟人赛祀不绝。</em></p><p>吴地记云：<em>黑莫郝为南面击贼将军。周敬王六年，筑城死</em>。</p><p>周敬王六年即阖闾元年，也就是伍子胥筑城的那一年，当阖闾时，何来击贼将军？相门之「相」既与「匠」通，则相王更可能是一位匠人首领，在筑城时死于工事。</p><h2 id="蛇门"><a href="#蛇门" class="headerlink" title="蛇门"></a>蛇门</h2><p>自葑门过竹辉桥，到桂花公园，蛇门在桂花公园内。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC3084.jpg" title="竹辉桥" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC3084.jpg" alt="竹辉桥"><span class="image-caption">竹辉桥</span></a></p><p>吴地志云：<em>蛇门，南面有陆无水，春申君造以御越军。在已地，以属蛇，因号蛇门。</em> 越王无彊时，楚破越，尽取钱塘江以西故吴地，其后越乱，诸公子争立。历八十载，而后春申君立，越岂足为患哉？</p><p>吴越春秋云：<em>「吴」欲东并大越，越在东南，故立蛇门以制敌国。吴在辰，其位龙也，故小城南门上反羽为两鲵鱙以象龙角。越在巳地，其位蛇也，故南大门上有木蛇，北向首内，示越属于吴也。</em> 则子胥筑城时，已开蛇门。</p><h3 id="桂花公园"><a href="#桂花公园" class="headerlink" title="桂花公园"></a>桂花公园</h3><p>古城四角都有公园，桂花公园应该是其中规模最大的。又兼周围都是小区，居民也多，进入公园，游人纷沓。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC4629.jpg" title="桂花公园入口的屋顶" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC4629.jpg" alt="桂花公园入口的屋顶"><span class="image-caption">桂花公园入口的屋顶</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC4633.jpg" title="隔壁小区的屋顶" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC4633.jpg" alt="隔壁小区的屋顶"><span class="image-caption">隔壁小区的屋顶</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC4644.jpg" title="桂花公园的内城河" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC4644.jpg" alt="桂花公园的内城河"><span class="image-caption">桂花公园的内城河</span></a></p><p>桂花公园东侧有茶馆，名叫老茶壶，下午五点就歇业了。傍水设座，市民坐而论道，有没有茶水倒也无谓。</p><p>护城河边立着「禁止嬉水」的牌子，河中仍有几个裸汉悠然游荡，水花溅起，岸边的小朋友大为惊怪。</p><h3 id="蛇门城楼"><a href="#蛇门城楼" class="headerlink" title="蛇门城楼"></a>蛇门城楼</h3><p>蛇门废弃得很早，孙吴之时已无蛇门，不妨揣测于勾践破吴之时，这座绝越之门就已经被毁弃了，但吴时的鲂𫚈门倒有可能与蛇门的位置相同。现存的蛇门是苏州决定发展旅游以后，修复最早的春秋八门，才重建起来的。</p><p>从桂花公园东西两边都可以到蛇门，城墙下有小径，亦可绕行。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC4664.jpg" title="蛇门登城道" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC4664.jpg" alt="蛇门登城道"><span class="image-caption">蛇门登城道</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC4671.jpg" title="蛇门城楼" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC4671.jpg" alt="蛇门城楼"><span class="image-caption">蛇门城楼</span></a></p><p>蛇门无旗鼓，亦无水道。登城望觅渡桥，夕阳映照，风景如画。吴门桥可观晚霞，觅渡桥赏日出，或亦大佳。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC4666.jpg" title="蛇门南窥" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC4666.jpg" alt="蛇门南窥"><span class="image-caption">蛇门南窥</span></a></p><p>城墙上藤萝滋盛，到处攀援缠绕，密布垛口，唯蛇门与盘门如此，可能是南方日照充足水土膏润之故。</p><p>筑墙的石头颇多刻字，天色转暗，文字漫灭，不可一一辨识，唯「袁府界」三字可读。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC4655.jpg" title="袁府界" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC4655.jpg" alt="袁府界"><span class="image-caption">袁府界</span></a></p><p>城楼四角各置铜铎，惜天暑不风，梵音难振。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC4681.jpg" title="铜铎" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC4681.jpg" alt="铜铎"><span class="image-caption">铜铎</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC4702.jpg" title="陶小婧" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC4702.jpg" alt="陶小婧"><span class="image-caption">陶小婧</span></a></p><h2 id="盘门"><a href="#盘门" class="headerlink" title="盘门"></a>盘门</h2><p>自蛇门西向，经南园桥、人民桥、蟠龙桥至吴门桥，内即盘门景区。</p><p>人民桥北通平门桥，1951 年初辟城墙修建，此处始通称为南门，后经 1977 年、2003 年两次改建，才成为现在的样子。桥下南岸有苏州轮船码头，对面的北岸则是著名的香雪海饭店。</p><p>吴地志云：<em>盘门，古作蟠门，尝刻木作蟠龙，以此镇越。又云水陆相半，沿洄屈曲，故名盘门。又云吴大帝蟠龙，故名。门内有武烈大帝庙，在祀典。东北二里有后汉破虏将军孙坚坟，又有讨虏将军孙策坟。</em></p><p>盘门内原苏州第一丝厂，故老相传是孙策坟，今经专家考证，更可能是先孙权而死的宣太子孙登墓<sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup>。</p><h3 id="盘门景区"><a href="#盘门景区" class="headerlink" title="盘门景区"></a>盘门景区</h3><p>顾嗣立盘门旧题「龙蟠水陆」，今作「水陆萦回」，虽亦自有出处，但不知何人手笔。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC4579.jpg" title="水陆萦回" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC4579.jpg" alt="水陆萦回"><span class="image-caption">水陆萦回</span></a></p><p>景区曾于五年前游览过，见<a href="/tours/2018-suzhou/">旧文</a>，内有一湖，占地颇广。瑞光塔据传是孙权为其乳母所建，吴门表隐记云：<em>瑞光塔，赤乌十年，吴主孙权建，唐天福二年放光。凡善姓燃灯之夕，太湖渔人网捕无所获。</em></p><h3 id="吴门桥"><a href="#吴门桥" class="headerlink" title="吴门桥"></a>吴门桥</h3><p>吴门桥横跨护城河，宛若长虹，时当黄昏，晚霞漫天，游人特多。桥拱处架起了好几台专业相机，想必是在拍延时风景。我拍了几张匆匆下撤，几位阿姨爷叔却守着延时相机端立不动，脖颈上还另挂了备机拍摄，专业专业，直教人肃然起敬。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC4548.jpg" title="吴门桥" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC4548.jpg" alt="吴门桥"><span class="image-caption">吴门桥</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC4575.jpg" title="吴门桥晚霞" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC4575.jpg" alt="吴门桥晚霞"><span class="image-caption">吴门桥晚霞</span></a></p><p>广场舞音响震天，跳舞的阿姨们活力不减少年。水边还有一位大叔立起了巨大的多声道喇叭，卖力献唱。当时便想，一个人要多孤独，多缺乏认同感才能做到这样的地步？特别震撼。</p><p>几个大叔在桥头放风筝，桥上桥下的游客大半抬头仰望，只见风筝早已渺入天中，线缆上缠满灯珠，闪烁而上。可惜天色还早，否则足以闭月遮星，在黑夜中彰显华丽。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC4577.jpg" title="风筝" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC4577.jpg" alt="风筝"><span class="image-caption">风筝</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC4570.jpg" title="吴门桥上仰望风筝的游人" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC4570.jpg" alt="吴门桥上仰望风筝的游人"><span class="image-caption">吴门桥上仰望风筝的游人</span></a></p><p>此间的游客明显更多，三五分钟就有一班游船自桥下经过，有可能与不远处的轮船码头有关。</p><p><a href="/tours/walk-around-the-ancient-gusu/DSC4586.jpg" title="游船交错" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC4586.jpg" alt="游船交错"><span class="image-caption">游船交错</span></a></p><h2 id="胥门"><a href="#胥门" class="headerlink" title="胥门"></a>胥门</h2><p>吴地志云：<em>胥门，本伍子胥宅，因名。石碑见存。出太湖等道水陆二路，今陆废。门南三里，有储城，越（疑作吴）王贮粮处。十五里有鱼城，越王养鱼处。门西五里有越来溪。</em></p><p>胥门原有城楼，顾嗣立题字「姑胥拥翠」，今门尚在，而楼已不存。公众号还凭空捏造了一个所谓「天门」，其实只是登城入口，平时都是锁闭状态，浮夸造作，颇为可笑。</p><h3 id="胥门公园"><a href="#胥门公园" class="headerlink" title="胥门公园"></a>胥门公园</h3><p><a href="/tours/walk-around-the-ancient-gusu/DSC2534.jpg" title="相土尝水象天法地" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2534.jpg" alt="相土尝水象天法地"><span class="image-caption">相土尝水象天法地</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2537.jpg" title="陶小婧与伍子胥" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2537.jpg" alt="陶小婧与伍子胥"><span class="image-caption">陶小婧与伍子胥</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2526.jpg" title="万年桥" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2526.jpg" alt="万年桥"><span class="image-caption">万年桥</span></a></p><h3 id="胥门城门"><a href="#胥门城门" class="headerlink" title="胥门城门"></a>胥门城门</h3><p>按吴门表隐：<em>胥门城楼有伍子胥像，立于石上。明正统时，知府况锺修城，因其不敬，改坐像。撤石见古铭十字曰：“若要子胥坐，须待二兄来。二兄，况字也。</em></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2540.jpg" title="胥门" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2540.jpg" alt="胥门"><span class="image-caption">胥门</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2547.jpg" title="兽面铜环" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2547.jpg" alt="兽面铜环"><span class="image-caption">兽面铜环</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC4491.jpg" title="所谓天门" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC4491.jpg" alt="所谓天门"><span class="image-caption">所谓天门</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC4490.jpg" title="凌霄" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC4490.jpg" alt="凌霄"><span class="image-caption">凌霄</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC4512.jpg" title="公园内" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC4512.jpg" alt="公园内"><span class="image-caption">公园内</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC4516.jpg" title="民不能忘" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC4516.jpg" alt="民不能忘"><span class="image-caption">民不能忘</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC4526.jpg" title="梅树" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC4526.jpg" alt="梅树"><span class="image-caption">梅树</span></a></p><h2 id="阊门"><a href="#阊门" class="headerlink" title="阊门"></a>阊门</h2><p>吴地志云：<em>阊门，亦号破楚门。吴伐楚，大军从此门出。陆机诗曰：阊门势嵯峨，飞阁跨通波。又孔子登山，望东吴阊门叹曰：吴门有白气如练。今置曳练坊及望舒坊因此。</em></p><h3 id="北码头"><a href="#北码头" class="headerlink" title="北码头"></a>北码头</h3><p><a href="/tours/walk-around-the-ancient-gusu/DSC2455.jpg" title="老阊门" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2455.jpg" alt="老阊门"><span class="image-caption">老阊门</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2449.jpg" title="铜狮" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2449.jpg" alt="铜狮"><span class="image-caption">铜狮</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2450.jpg" title="桌椅" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2450.jpg" alt="桌椅"><span class="image-caption">桌椅</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2448.jpg" title="廊下" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2448.jpg" alt="廊下"><span class="image-caption">廊下</span></a></p><h3 id="阊门城楼"><a href="#阊门城楼" class="headerlink" title="阊门城楼"></a>阊门城楼</h3><p><a href="/tours/walk-around-the-ancient-gusu/DSC2467.jpg" title="阊门城楼" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2467.jpg" alt="阊门城楼"><span class="image-caption">阊门城楼</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2463.jpg" title="对岸的朝宗阁" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2463.jpg" alt="对岸的朝宗阁"><span class="image-caption">对岸的朝宗阁</span></a></p><p><a href="/tours/walk-around-the-ancient-gusu/DSC2470.jpg" title="长者" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2470.jpg" alt="长者"><span class="image-caption">长者</span></a><br><a href="/tours/walk-around-the-ancient-gusu/DSC2484.jpg" title="苏州菜" class="gallery-item"><img src="/tours/walk-around-the-ancient-gusu/DSC2484.jpg" alt="苏州菜"><span class="image-caption">苏州菜</span></a><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">1.</span><span style="display: inline; vertical-align: top;">巫臣之申在南阳，伍子胥亦封于申，但吴国从未染指南阳盆地，其封地或与春申君同，在吴地，或即申沪之申。</span><a href="#fnref:1" rev="footnote"> ↩</a></li><li id="fn:2"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">2.</span><span style="display: inline; vertical-align: top;">详见三联生活周刊，陈飞撰：<a href="https://www.lifeweek.com.cn/article/83214">「性介不阿」顾予咸——重审「哭庙案」之三 </a></span><a href="#fnref:2" rev="footnote"> ↩</a></li><li id="fn:3"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">3.</span><span style="display: inline; vertical-align: top;">详见苏州杂志 2018 年第 5 期，黄恽撰：<a href="https://m.fx361.com/news/2018/0125/15660932.html">振吴汽车学校</a></span><a href="#fnref:3" rev="footnote"> ↩</a></li><li id="fn:4"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">4.</span><span style="display: inline; vertical-align: top;">详见扬子晚报：<a href="https://www.yangtse.com/zncontent/2169369.html">「孙策墓」再起波澜，或是孙登与周瑜之女合葬墓</a></span><a href="#fnref:4" rev="footnote"> ↩</a></li></ol></div></div></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article-gallery&quot;&gt;&lt;h2 id=&quot;缘起&quot;&gt;&lt;a href=&quot;#缘起&quot; class=&quot;headerlink&quot; title=&quot;缘起&quot;&gt;&lt;/a&gt;缘起&lt;/h2&gt;&lt;p&gt;越绝书云：&lt;em&gt;吴大城，周四十七里二百一十步二尺。陆门八，其二有楼。水门八。南面十里四十二步五尺，西面七里百一十二步三尺，北面八里二百二十六步三尺，东面十一里七十九步一尺。阖庐所造也。吴郭周六十八里六十步。&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;吴地记则云：&lt;em&gt;阖闾城，周敬王六年伍子胥筑。大城周回四十二里三十步，小城八里二百六十步。&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;吴门表隐对苏州的热爱溢于言表，增加了许多普通人关注不到的数字：&lt;em&gt;周四十五里，长五千六百五丈，高二丈八尺，厚一丈八尺，楼六座，垛三千五十一个。&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;虽然不知道古里与今里的换算比例如何，宋代的吴地记与战汉之间的越绝书规模已略有不同，越绝书中的吴大城，东面最长，南次之，北又次之，西面最短，是个不规则的梯形，而今天的苏州古城则与吴地记年代接近的平江图基本一致，是南北长而东西短的长方形。所以说苏州自建城以来，虽然城址从未更易，但城墙的覆盖范围应该还是动过的。&lt;/p&gt;
&lt;p&gt;按照两步路上网友共享的&lt;a href=&quot;https://www.2bulu.com/track/t-c1dA39t2Ld3p%252FR2KBg5Tzw%253D%253D.htm&quot;&gt;轨迹&lt;/a&gt;，绕城一周，约 16.8 公里，以每小时五公里的配速，大概要花三个半小时。我和陶小婧走走拍拍停停，夏天酷热，今年的高温又格外不正常，所以每次只能走两三个小时，足足走了四趟才走完。&lt;/p&gt;</summary>
    
    
    
    <category term="游历" scheme="https://waxa.design/categories/tours/"/>
    
    
    <category term="苏州" scheme="https://waxa.design/tags/%E8%8B%8F%E5%B7%9E/"/>
    
    <category term="徒步" scheme="https://waxa.design/tags/%E5%BE%92%E6%AD%A5/"/>
    
    <category term="古城" scheme="https://waxa.design/tags/%E5%8F%A4%E5%9F%8E/"/>
    
    <category term="环游" scheme="https://waxa.design/tags/%E7%8E%AF%E6%B8%B8/"/>
    
    <category term="东园" scheme="https://waxa.design/tags/%E4%B8%9C%E5%9B%AD/"/>
    
  </entry>
  
  <entry>
    <title>Hexo Stylus 渲染的奇怪问题</title>
    <link href="https://waxa.design/playground/web/hexo-renderer-stylus-issue/"/>
    <id>https://waxa.design/playground/web/hexo-renderer-stylus-issue/</id>
    <published>2023-07-21T10:40:00.000Z</published>
    <updated>2023-07-23T01:00:48.255Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>给网站首页加了一个满屏图文，不料遇上一个奇怪的问题。原本想根据屏幕宽度自动调整标题大小，<code>hero.styl</code> 是这样写的：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="selector-tag">h2</span></span><br><span class="line"><span class="attribute">font-size</span>: <span class="built_in">clamp</span>(<span class="number">5em</span>, <span class="number">5em</span> + <span class="number">2.5vw</span>, <span class="number">10em</span>)</span><br><span class="line"><span class="attribute">line-height</span>: <span class="number">1em</span></span><br><span class="line"><span class="attribute">letter-spacing</span>: -<span class="number">0.05rem</span></span><br></pre></td></tr></table></figure><p>但渲染出来的 styles.css 却是这样：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">h2</span> &#123;</span><br><span class="line"><span class="attribute">font-size</span>: <span class="built_in">clamp</span>(<span class="number">5em</span>, <span class="number">7.5em</span>, <span class="number">10em</span>);</span><br><span class="line"><span class="attribute">line-height</span>: <span class="number">1em</span>;</span><br><span class="line"><span class="attribute">letter-spacing</span>: -.<span class="number">05rem</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>不知为何，两个不同的单位直接相加了，原本的变量变成了固定的 <code>7.5em</code>，这转换得也太过耿直了吧。去看了一下 <a href="https://github.com/hexojs/hexo-renderer-stylus">hexo-renderer-stylus</a> 的源代码，但搜了一下 <code>em</code>、<code>vw</code>，没有结果，所以也摸不着头绪，总之此时的效果是这样的：</p><p><a href="/playground/web/hexo-renderer-stylus-issue/image-20230721185609916.png" title="错误的呈现结果" class="gallery-item"><img src="/playground/web/hexo-renderer-stylus-issue/image-20230721185609916.png" alt="错误的呈现结果"><span class="image-caption">错误的呈现结果</span></a></p><p>而预想的结果，它应该是这样的：</p><p><a href="/playground/web/hexo-renderer-stylus-issue/image-20230721185825969.png" title="预想的呈现结果" class="gallery-item"><img src="/playground/web/hexo-renderer-stylus-issue/image-20230721185825969.png" alt="预想的呈现结果"><span class="image-caption">预想的呈现结果</span></a></p><span id="more"></span><p>换到另一个以 <a href="https://getbootstrap.com/">Bootstrap</a> 为框架的主题，CSS 正常渲染。为了确认原因，将主题换成同样采用 Stylus 的 <a href="https://theme-next.js.org/">Next</a>，果然出现了同样的问题，那应该没有疑问了，大概率就是 hexo-renderer-stylus 的锅。</p><p>不过试了一下，<code>font-size: clamp(5em, 5vw, 10em)</code> 倒是 OK，姑且先这么用着，从长计议，看看能不能解决这个奇怪的计算问题。</p><p>另一种办法是把变量存储在 <code>.yml</code> 或者 <code>.json</code> 里面，再通过 CSS 读取，Wordpress 主题已经很流行这么做了，也可以尝试。</p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article-gallery&quot;&gt;&lt;p&gt;给网站首页加了一个满屏图文，不料遇上一个奇怪的问题。原本想根据屏幕宽度自动调整标题大小，&lt;code&gt;hero.styl&lt;/code&gt; 是这样写的：&lt;/p&gt;
&lt;figure class=&quot;highlight stylus&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;selector-tag&quot;&gt;h2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;font-size&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;clamp&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;5em&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;5em&lt;/span&gt; + &lt;span class=&quot;number&quot;&gt;2.5vw&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10em&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;line-height&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;1em&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;attribute&quot;&gt;letter-spacing&lt;/span&gt;: -&lt;span class=&quot;number&quot;&gt;0.05rem&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;但渲染出来的 styles.css 却是这样：&lt;/p&gt;
&lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;selector-tag&quot;&gt;h2&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attribute&quot;&gt;font-size&lt;/span&gt;: &lt;span class=&quot;built_in&quot;&gt;clamp&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;5em&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;7.5em&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;10em&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attribute&quot;&gt;line-height&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;1em&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;attribute&quot;&gt;letter-spacing&lt;/span&gt;: -.&lt;span class=&quot;number&quot;&gt;05rem&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;不知为何，两个不同的单位直接相加了，原本的变量变成了固定的 &lt;code&gt;7.5em&lt;/code&gt;，这转换得也太过耿直了吧。去看了一下 &lt;a href=&quot;https://github.com/hexojs/hexo-renderer-stylus&quot;&gt;hexo-renderer-stylus&lt;/a&gt; 的源代码，但搜了一下 &lt;code&gt;em&lt;/code&gt;、&lt;code&gt;vw&lt;/code&gt;，没有结果，所以也摸不着头绪，总之此时的效果是这样的：&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/playground/web/hexo-renderer-stylus-issue/image-20230721185609916.png&quot; title=&quot;错误的呈现结果&quot; class=&quot;gallery-item&quot;&gt;&lt;img src=&quot;/playground/web/hexo-renderer-stylus-issue/image-20230721185609916.png&quot; alt=&quot;错误的呈现结果&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;而预想的结果，它应该是这样的：&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/playground/web/hexo-renderer-stylus-issue/image-20230721185825969.png&quot; title=&quot;预想的呈现结果&quot; class=&quot;gallery-item&quot;&gt;&lt;img src=&quot;/playground/web/hexo-renderer-stylus-issue/image-20230721185825969.png&quot; alt=&quot;预想的呈现结果&quot;&gt;&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="玩艺" scheme="https://waxa.design/categories/playground/"/>
    
    <category term="网站" scheme="https://waxa.design/categories/playground/web/"/>
    
    
    <category term="Hexo" scheme="https://waxa.design/tags/Hexo/"/>
    
    <category term="Stylus" scheme="https://waxa.design/tags/Stylus/"/>
    
    <category term="CSS" scheme="https://waxa.design/tags/CSS/"/>
    
  </entry>
  
  <entry>
    <title>虎丘湿地公园</title>
    <link href="https://waxa.design/photography/huqiu-wetland-park/"/>
    <id>https://waxa.design/photography/huqiu-wetland-park/</id>
    <published>2023-07-19T04:01:00.000Z</published>
    <updated>2023-07-20T08:46:26.078Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><span id="more"></span></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article-gallery&quot;&gt;</summary>
    
    
    
    <category term="影像" scheme="https://waxa.design/categories/photography/"/>
    
    
    <category term="苏州" scheme="https://waxa.design/tags/%E8%8B%8F%E5%B7%9E/"/>
    
    <category term="公园" scheme="https://waxa.design/tags/%E5%85%AC%E5%9B%AD/"/>
    
    <category term="虎丘湿地公园" scheme="https://waxa.design/tags/%E8%99%8E%E4%B8%98%E6%B9%BF%E5%9C%B0%E5%85%AC%E5%9B%AD/"/>
    
  </entry>
  
  <entry>
    <title>给 Hexo 添加搜索模块</title>
    <link href="https://waxa.design/playground/web/hexo-local-search/"/>
    <id>https://waxa.design/playground/web/hexo-local-search/</id>
    <published>2023-07-17T02:04:00.000Z</published>
    <updated>2023-07-21T08:08:45.283Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>咳咳，作为受益无穷的免费用户，我不是在抱怨，但除了一个合适的框架以外，Acorn 的功能确实过于简略。这几天先后搞定了 Github 同步以及评论系统，但仔细想来，网站亟需完善的功能和模块还有以下几个：</p><ul><li><input checked="" disabled="" type="checkbox"> <del>添加评论系统，已达成</del>；</li><li><input checked="" disabled="" type="checkbox"> <del>添加搜索模块</del>；</li><li><input checked="" disabled="" type="checkbox"> <del>目前的组图功能不太完善，考虑移植 Justfied Gallery</del>；</li><li><input disabled="" type="checkbox"> 增加更多可选 Layout，比如黑色背景与全屏宽度；</li><li><input disabled="" type="checkbox"> 能否将视频作为头图的可选项？</li><li><input disabled="" type="checkbox"> 首页与影像、案例页面的内容梳理；</li></ul><p>确实是任重道远，扶额。</p><span id="more"></span><h2 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h2><p>首先，我们需要安装 <a href="https://github.com/wzpan/hexo-generator-search">hexo-generator-search plugin</a>，输入命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure><p>编辑 Hexo 根目录下的配置文件 <code>_config.yml</code>，添加以下代码：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">search:</span>  </span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span>  </span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span>  </span><br><span class="line">  <span class="attr">content:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><code>field</code> 指定搜索的覆盖范围，可选项有 <code>post / page / all</code>，分别覆盖文章、页面，<code>all</code> 则两者兼顾，个人偏向 all 选项，各位可以自行选择。</p><p>但插件装好之后，就会发现它除了在根目录生成 <code>search.xml</code>，并不提供搜索的交互界面，需要我们自行添加。</p><h2 id="新增搜索界面"><a href="#新增搜索界面" class="headerlink" title="新增搜索界面"></a>新增搜索界面</h2><p>打开 <a href="https://github.com/barretlee/hexo-search-plugin-snippets">hexo-search-plugin-snippets</a>，下载 <code>snippets</code> 文件夹内的三个文件，分别放到对应的文件夹：</p><ul><li><code>search.ejs</code> &gt;  <code>/themes/acorn/layout/search.ejs</code>;</li><li><code>search.js</code> &gt; <code>/themes/acorn/source/js/search.js</code>;</li><li><code>search.stylus</code> &gt; <code>/themes/acorn/source/css/_partial/search.styl</code>。</li></ul><p>接着打开 <code>/themes/acorn/layout/_partial/menu.ejs</code>，因为我们打算把搜索框放到顶部的导航栏，在 <code>&lt;/ul&gt;</code> 的闭合标签之前插入：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;li&gt;</span><br><span class="line">  &lt;%- <span class="title function_">partial</span>(<span class="string">&#x27;_partial/search&#x27;</span>, &#123;<span class="attr">wrapStyle</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">inputStyle</span>: <span class="string">&#x27;&#x27;</span>&#125;) %&gt;</span><br><span class="line">&lt;/li&gt;</span><br></pre></td></tr></table></figure><p>然后打开 <code>/themes/acorn/layout/_partial/after-footer.ejs</code>，找个合适的地方插入：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引用 JQuery</span></span><br><span class="line">&lt;script src=<span class="string">&quot;https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 移动设备侦测</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">var</span> isMobile = &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title class_">Android</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> navigator.<span class="property">userAgent</span>.<span class="title function_">match</span>(<span class="regexp">/Android/i</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title class_">BlackBerry</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> navigator.<span class="property">userAgent</span>.<span class="title function_">match</span>(<span class="regexp">/BlackBerry/i</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">iOS</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> navigator.<span class="property">userAgent</span>.<span class="title function_">match</span>(<span class="regexp">/iPhone|iPad|iPod/i</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title class_">Opera</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> navigator.<span class="property">userAgent</span>.<span class="title function_">match</span>(<span class="regexp">/Opera Mini/i</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title class_">Windows</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> navigator.<span class="property">userAgent</span>.<span class="title function_">match</span>(<span class="regexp">/IEMobile/i</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">any</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> (isMobile.<span class="title class_">Android</span>() || isMobile.<span class="title class_">BlackBerry</span>() || isMobile.<span class="title function_">iOS</span>() || isMobile.<span class="title class_">Opera</span>() || isMobile.<span class="title class_">Windows</span>());</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">if</span> ($(<span class="string">&#x27;.local-search&#x27;</span>).<span class="title function_">resize</span>() &amp;&amp; !isMobile.<span class="title function_">any</span>()) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">$.<span class="title function_">getScript</span>(<span class="string">&#x27;/js/search.js&#x27;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">searchFunc</span>(<span class="string">&quot;/search.xml&quot;</span>, <span class="string">&#x27;local-search-input&#x27;</span>, <span class="string">&#x27;local-search-result&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>再打开 <code>/themes/acorn/source/css/style.styl</code>，插入：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@import &quot;_partial/search&quot;</span><br></pre></td></tr></table></figure><p>Acorn 主题用户请注意，一定要把文件名从 <code>search.stylus</code> 改为 <code>search.styl</code>。稳妥起见，最好把语法重新整理一遍，否则可能会出现渲染错误。</p><p>最后 <code>hexo clean &amp;&amp; hexo g</code>，搜索模块应该就出现了，调整一下外观样式，收工。</p><hr><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://qiuyiwu.github.io/2019/01/25/Hexo-LocalSearch/">Create Local Search for Your Hexo Blog</a></li><li><a href="https://github.com/barretlee/hexo-search-plugin-snippets">hexo-search-plugin-snippets</a></li></ul></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">即便是静态博客，站内搜索功能也是必须的。</summary>
    
    
    
    <category term="玩艺" scheme="https://waxa.design/categories/playground/"/>
    
    <category term="网站" scheme="https://waxa.design/categories/playground/web/"/>
    
    
    <category term="plugins" scheme="https://waxa.design/tags/plugins/"/>
    
    <category term="Hexo" scheme="https://waxa.design/tags/Hexo/"/>
    
    <category term="search" scheme="https://waxa.design/tags/search/"/>
    
  </entry>
  
  <entry>
    <title>给 Hexo 增加 Gitalk 评论系统</title>
    <link href="https://waxa.design/playground/web/hexo-add-gitalk-comment/"/>
    <id>https://waxa.design/playground/web/hexo-add-gitalk-comment/</id>
    <published>2023-07-16T10:42:00.000Z</published>
    <updated>2023-07-16T12:39:25.064Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>原来的 Minos 主题自带 Disqus 评论系统，换到 Acorn 以后，默认不带评论功能，所以打算研究一下如何自行配置。考虑到已经同步到 GitPage 了，不如就用 Gitment 或者 Gitalk，兼容性应该可以做到最好。</p><span id="more"></span><p>按照 <a href="https://www.itfanr.cc/2019/04/30/hexo-add-gitalk-comment/">Hexo 博客添加 Gitalk 评论系统 </a> 的引导，流程非常顺利，细节满满。但因为大佬用的是 Swig 渲染器，而 Acorn 的渲染器是 EJS，所以细节略有不同，在此把过程分享出来，希望能对 EJS 用户有所启发。</p><h2 id="创建-Github-OAuth-Apps"><a href="#创建-Github-OAuth-Apps" class="headerlink" title="创建 Github OAuth Apps"></a>创建 Github OAuth Apps</h2><p>打开 Github 上的 <a href="https://github.com/settings/developers">OAuth Apps</a>，点击右上角 <code>New OAuth App</code> ，逐项填写相应内容即可。</p><p><a href="/playground/web/hexo-add-gitalk-comment/image-20230716191104781.png" title="注册界面" class="gallery-item"><img src="/playground/web/hexo-add-gitalk-comment/image-20230716191104781.png" alt="注册界面"><span class="image-caption">注册界面</span></a></p><p><code>Homepage URL</code> 即 Hexo 的主页地址，<code>Authorization callback URL</code> 为站点的回调地址，一般和主页相同即可。</p><p>提交之后，得到 <code>Client ID</code> 和 <code>Client Secret</code> 备用。</p><h2 id="自定义主题配置"><a href="#自定义主题配置" class="headerlink" title="自定义主题配置"></a>自定义主题配置</h2><p>打开主题的配置文件，Acorn 的路径是 <code>/themes/acorn/_config.yml</code>，添加 Gitalk 相关参数：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">gitalk:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">ClientID:</span> <span class="string">xxxxxx</span> <span class="string">//</span> <span class="string">上一步得到的</span> <span class="string">Client</span> <span class="string">ID</span></span><br><span class="line">  <span class="attr">ClientSecret:</span> <span class="string">xxxxxxxxxxxx</span> <span class="string">//</span> <span class="string">上一步得到的</span> <span class="string">Client</span> <span class="string">Secret</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">kaerozhi.github.io</span> <span class="string">//</span> <span class="string">仓库可以和</span> <span class="string">Hexo</span> <span class="string">一样</span></span><br><span class="line">  <span class="attr">owner:</span> <span class="string">kaerozhi</span></span><br><span class="line">  <span class="attr">adminUser:</span> <span class="string">kaerozhi</span></span><br><span class="line">  <span class="attr">IdPrefix:</span> <span class="string">gitalk</span></span><br><span class="line">  <span class="attr">labels:</span> <span class="string">gitalk</span></span><br><span class="line">  <span class="attr">perPage:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">pagerDirection:</span> <span class="string">last</span></span><br><span class="line">  <span class="attr">createIssueManually:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">distractionFreeMode:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><h2 id="Gitalk-模板"><a href="#Gitalk-模板" class="headerlink" title="Gitalk 模板"></a>Gitalk 模板</h2><p>按照 Acorn 的文件结构，在 <code>/themes/acorn/layout/_partial/post/</code> 文件夹内添加 <code>gitalk.ejs</code>，代码如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;https://unpkg.com/gitalk/dist/gitalk.css&quot;</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/gitalk/dist/gitalk.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;gitalk-container&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">var</span> gitalk = <span class="keyword">new</span> <span class="title class_">Gitalk</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">clientID</span>: <span class="string">&#x27;&lt;%- theme.gitalk.ClientID %&gt;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">clientSecret</span>: <span class="string">&#x27;&lt;%- theme.gitalk.ClientSecret %&gt;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">repo</span>: <span class="string">&#x27;&lt;%- theme.gitalk.repo %&gt;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">owner</span>: <span class="string">&#x27;&lt;%- theme.gitalk.owner %&gt;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">admin</span>: [<span class="string">&#x27;&lt;%- theme.gitalk.adminUser %&gt;&#x27;</span>],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">id</span>:<span class="string">&#x27;&lt;%- theme.gitalk.IdPrefix || gitalk %&gt;_&lt;%- date(page.date, &quot;YYYYMMDDHHmmss&quot;) %&gt;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">labels</span>: <span class="string">&#x27;&lt;%- theme.gitalk.labels %&gt;&#x27;</span>.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>).<span class="title function_">filter</span>(<span class="function"><span class="params">l</span> =&gt;</span> l),</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">perPage</span>: &lt;%- theme.<span class="property">gitalk</span>.<span class="property">perPage</span> %&gt;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">pagerDirection</span>: <span class="string">&#x27;&lt;%- theme.gitalk.pagerDirection %&gt;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">createIssueManually</span>: &lt;%- theme.<span class="property">gitalk</span>.<span class="property">createIssueManually</span> %&gt;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">distractionFreeMode</span>: &lt;%- theme.<span class="property">gitalk</span>.<span class="property">distractionFreeMode</span> %&gt;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    gitalk.<span class="title function_">render</span>(<span class="string">&#x27;gitalk-container&#x27;</span>)           </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>因为所有参数都在主题配置文件里添加好了，这里直接调用，所以应该无需作任何改动。</p><p>按照我们的想法，只有文章页开启评论，其他页面不开启，所以打开 <code>/themes/acorn/layout/_partial/article.ejs</code>，找到 <code>&lt;%- partial(&#39;post/tag&#39;) %&gt;</code>，换行，添加以下代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> &lt;% <span class="keyword">if</span> (theme.<span class="property">gitalk</span>.<span class="property">enable</span> &amp;&amp; <span class="title function_">is_post</span>() &amp;&amp; page.<span class="property">comments</span> != <span class="literal">false</span>) &#123; %&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">&quot;artile-comments gitalk&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  &lt;%- partial(&#x27;post/gitalk&#x27;) %&gt;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span></span><br><span class="line"> &lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>这里为开启评论加了三个前置判断，分别是：</p><ol><li><code>theme.gitalk.enable</code>，主题配置中启用了 Gitalk 评论；</li><li><code>is_post()</code>，仅文章页启用评论；</li><li><code>page.comments != false</code> 只要在指定文章的 Front Matter 内加入 <code>comments: false</code>，则可以手动关闭评论。</li></ol><h2 id="初始化创建"><a href="#初始化创建" class="headerlink" title="初始化创建"></a>初始化创建</h2><p>至此前期的准备工作就完成了，重新生成并 Deploy 至 Github，就可以在文章底部初始化创建评论了。</p><p>如果你跟我一样，历史数据比较多，一篇一篇手动启用未免太累了，那也可以参考这篇文章：<a href="https://blog.jijian.link/2020-01-10/hexo-gitalk-auto-init/">Hexo Gitalk 评论自动初始化</a>。</p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article-gallery&quot;&gt;&lt;p&gt;原来的 Minos 主题自带 Disqus 评论系统，换到 Acorn 以后，默认不带评论功能，所以打算研究一下如何自行配置。考虑到已经同步到 GitPage 了，不如就用 Gitment 或者 Gitalk，兼容性应该可以做到最好。&lt;/p&gt;</summary>
    
    
    
    <category term="玩艺" scheme="https://waxa.design/categories/playground/"/>
    
    <category term="网站" scheme="https://waxa.design/categories/playground/web/"/>
    
    
    <category term="Hexo" scheme="https://waxa.design/tags/Hexo/"/>
    
    <category term="Gitalk" scheme="https://waxa.design/tags/Gitalk/"/>
    
    <category term="Github" scheme="https://waxa.design/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>Hexo 同步 Github Page</title>
    <link href="https://waxa.design/playground/web/hexo-deploy-to-gitpage/"/>
    <id>https://waxa.design/playground/web/hexo-deploy-to-gitpage/</id>
    <published>2023-07-15T08:26:00.000Z</published>
    <updated>2023-07-16T05:28:09.706Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>说起 Hexo，用户最熟悉的操作自然是 <code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</code>，但很不幸的是，不知是哪里出了错，我的 <code>hexo d</code> 还从未操作成功过。</p><span id="more"></span><p>可能我的部署环境比较特殊，是一台黑群晖。按照<a href="https://hexo.io/zh-cn/docs/one-command-deployment.html">官方文档</a>配置 <code>_config.yml</code>：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/kaerozhi/kaerozhi.bitbucket.io</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br><span class="line">  <span class="attr">token:</span> [<span class="string">token</span>]</span><br></pre></td></tr></table></figure><p>运行 <code>hexo d</code> 之后会提示输入用户名和密码，然后报错：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">remote: Support <span class="keyword">for</span> password authentication was removed on August 13, 2021.</span><br><span class="line">remote: Please see https://docs.github.com/en/get-started/getting-started-with-git/about-remote-repositories<span class="comment">#cloning-with-https-urls for information on currently recommended modes of authentication.</span></span><br><span class="line">fatal: Authentication failed <span class="keyword">for</span> <span class="string">&#x27;https://github.com/kaerozhi/kaerozhi.github.io.git/&#x27;</span></span><br><span class="line">FATAL Something<span class="string">&#x27;s wrong. Maybe you can find the solution here: https://hexo.io/docs/troubleshooting.html</span></span><br><span class="line"><span class="string">Error: Spawn failed</span></span><br><span class="line"><span class="string">    at ChildProcess.&lt;anonymous&gt; (/volume1/web/Hexo/node_modules/hexo-util/lib/spawn.js:51:21)</span></span><br><span class="line"><span class="string">    at ChildProcess.emit (node:events:513:28)</span></span><br><span class="line"><span class="string">    at ChildProcess._handle.onexit (node:internal/child_process:291:12)</span></span><br></pre></td></tr></table></figure><p>搜索了很多解决办法。首先，按照 <a href="https://blog.csdn.net/qq_43659183/article/details/126041835">使用 personal token 将 Hexo 本地文件推到 GitHub</a> 的办法，将 Token 加入 repo：     </p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://[token]@github.com/kaerozhi/kaerozhi.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">main</span></span><br></pre></td></tr></table></figure><p>可惜仍然报错：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fatal: unable to stat &#x27;tags/Blog-Tools/index.html&#x27;: No such file or directory</span><br></pre></td></tr></table></figure><p>只不过这个错误跟之前不太一样，看起来是个权限问题。</p><p>既然此路不通，那就跳船。按照这篇文章；<a href="https://ayase.moe/2023/02/12/deploy-hexo-in-2023/">2023 年了，怎么用 Github Action 与 hexo 发布在 Github Pages 上发布文章</a> ，配置需要更新写法：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">https://github.com/aaaa/bbb.git</span></span><br><span class="line">  <span class="attr">token:</span> <span class="string">&#x27;&#x27;</span> <span class="comment"># ❌</span></span><br><span class="line"></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span></span><br><span class="line">    <span class="attr">github:</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">https://github.com/aaaa/bbb.git</span></span><br><span class="line">      <span class="attr">token:</span> <span class="string">&#x27;&#x27;</span> <span class="comment"># ✅</span></span><br></pre></td></tr></table></figure><p>这次运行了一段时间才报错：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fatal: unable to access <span class="string">&#x27;https://github.com/kaerozhi/kaerozhi.github.io.git/&#x27;</span>: HTTP/2 stream 1 was not closed cleanly before end of the underlying stream</span><br></pre></td></tr></table></figure><p>还是有权限问题？实在没辙，只能再看看 SSH 能否奏效。但该文所说的「在部署前增加一个配置 SSH 的 action」，我不明白应该在什么地方操作，不知是 Github 还是本地？总之拿不太准，只能再换参考。</p><p>然后找到这一篇：<a href="https://www.cnblogs.com/v1coder/p/16358864.html">使用 Hexo 在 Github 上建博客</a>，因为 SSH Keys 已经生成过了，所以直接输入：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> ~/.ssh/id_rsa.pub</span><br></pre></td></tr></table></figure><p>将内容复制到 GitHub –&gt; Settings –&gt; SSH and GPG keys –&gt; NEW SSH key。然后将 <code>_config.yml</code> 里的 deploy 部分改成以下格式：</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Deployment</span></span><br><span class="line"><span class="comment">## Docs: https://hexo.io/docs/deployment.html</span></span><br><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repository:</span> <span class="string">git@github.com:yourname/yourname.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><p>运行 <code>hexo d</code>，居然跑通了！泪流满面~  之前也上传过 SSH Key，但可能配置文件并不是这个格式写的，真是太折腾人了。</p><p>不过又遇到了新的问题，文件夹太大了，囧：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">remote: fatal: pack exceeds maximum allowed size (2.00 GiB)</span><br></pre></td></tr></table></figure><p>检查了一下文件夹，发现游记里的图片过于巨大，动辄五六百M。赶紧用 Photoshop 批处理至 1920x1080px，把整个包压缩到了 1G 以内。<del>然后来一发爽快的 Hexo 三连，顺利收工。</del> 翌日起床，发现最后还是超了上限，也不知道什么原因，只能继续给文件夹瘦身，但再试依然失败。一怒之下删了整个 <code>.deploy_git</code> 文件夹，然后一键三连，嘿嘿，这次终于成功。</p><p>此时访问 <a href="https://kaerozhi.github.io/">https://kaerozhi.github.io</a> ，应该能正常浏览了，稍后再设置一个自定义域名。</p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">只求一键三连能成功！</summary>
    
    
    
    <category term="玩艺" scheme="https://waxa.design/categories/playground/"/>
    
    <category term="网站" scheme="https://waxa.design/categories/playground/web/"/>
    
    
    <category term="Hexo" scheme="https://waxa.design/tags/Hexo/"/>
    
    <category term="Github" scheme="https://waxa.design/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>Hexo 新主题：基于 Acorn 定制</title>
    <link href="https://waxa.design/playground/web/hexo-new-theme-based-on-acorn/"/>
    <id>https://waxa.design/playground/web/hexo-new-theme-based-on-acorn/</id>
    <published>2023-07-13T11:30:00.000Z</published>
    <updated>2023-07-14T14:03:01.374Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><div class="foreword"><p>离职以后，一直忙于搬家和新房装修，两头奔走，除了前期试水之外，后面就没找过工作。其实心里也早就做好了打算，一把年纪了，再去跟年轻人卷实在力有未逮，索性安定下来就转型自由设计师。</p><p>不过网站不能再和以前一样简简单单写博客，现在得展示更多的专业能力。出于这样的动机，去 <a href="https://hexo.io/themes/">Hexo 官方主题站</a>里翻检了几遍，发现 <a href="https://acorn.imaging.xin/">Acorn</a> 还挺合适的，下载到本地试着配置了一下，立马有改头换面的感觉，于是开始定制细节。</p></div><span id="more"></span><h2 id="关于-Acorn"><a href="#关于-Acorn" class="headerlink" title="关于 Acorn"></a>关于 Acorn</h2><p>关于 Acorn 主题，官方是这样介绍的：</p><blockquote><p>Acorn 是一“颗”免费且开源的 <a href="https://hexo.io/">Hexo</a> 主题，可适用于中小型企业门户或工作室等展示类网站的简单建设。如果你对 Hexo 基本操作已经很熟悉了，那么本文将会辅助你轻松使用 Acorn 主题搭建自己的网站， 亦或者你可以先阅读一下 <a href="https://hexo.io/zh-cn/docs/">Hexo 文档</a>。</p><p>Acorn 未使用任何前端框架，所以优秀的小盆友们可以任意发挥，突破自我。</p></blockquote><p>虽然确实没有用框架，但 Stylus 比 CSS 门槛还是高出那么一点点……</p><p><a href="/playground/web/hexo-new-theme-based-on-acorn/image-20230713203301498.png" title="Acorn 官方网站" class="gallery-item"><img src="/playground/web/hexo-new-theme-based-on-acorn/image-20230713203301498.png" alt="Acorn 官方网站"><span class="image-caption">Acorn 官方网站</span></a></p><p>因为设计的目标就是企业建站，所以 Acorn 的定制性基本满足需求。需要强调的是：<strong>安装完之后，一定要立刻下载<a href="https://github.com/zhwangart/acorn-sample-data">配套数据包</a>，光看文档是没办法顺利上手的。</strong></p><p>不过还是得吐槽，官方文档并不是特别完备，比如内置的几个插件，Swiper &#x2F; TocBot 应该如何配置，「吃瓜妹子」绝对是毫无头绪的。即便是稍微进阶一点的用户如我，没有文档也需要研究很久。</p><h2 id="修改列表样式"><a href="#修改列表样式" class="headerlink" title="修改列表样式"></a>修改列表样式</h2><p>基本的字体和配色就略过了，根据个人喜好来就行。</p><p><a href="/playground/web/hexo-new-theme-based-on-acorn/image-20230713211817051.png" title="Acorn 原生的文章列表" class="gallery-item"><img src="/playground/web/hexo-new-theme-based-on-acorn/image-20230713211817051.png" alt="Acorn 原生的文章列表"><span class="image-caption">Acorn 原生的文章列表</span></a></p><p>Acorn 默认的图文列表中规中矩，效果尚可，但标题和正文会按照限定的行数自动裁切，我不太喜欢这样把文字切得细碎的处理方式，主题都交代不完整，所以就做了改动：把正文去掉，保留标题，标题最多容纳三行文字，除了特别长的英文标题，基本上都能正常显示。</p><p>图文列表的模板是 <code>/themes/acorn/layout/partial/archive-post.ejs</code>，打开源文件：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;col-3&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;archive-article archive-type-&lt;%= post.layout %&gt;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card rounded&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &lt;%- partial(&#x27;post/gallery&#x27;) %&gt; // 预览图</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-body bg-light&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &lt;%- partial(&#x27;post/title&#x27;, &#123;class_name: &#x27;article-title mb-0 line-clamp line-clamp-1&#x27;&#125;) %&gt; // 标题，line-clamp-1 用 CSS 限定行数为 1</span></span><br><span class="line"><span class="language-xml">        &lt;%- partial(&#x27;post/date&#x27;, &#123;class_name: &#x27;article-date&#x27;, date_format: null&#125;) %&gt; // 日期</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-text mt-3 line-clamp line-clamp-2&quot;</span>&gt;</span>&lt;%- post.excerpt %&gt;<span class="tag">&lt;/<span class="name">div</span>&gt;</span> // 正文摘抄，line-clamp-2 限定行数为 2</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">hr</span> <span class="attr">class</span>=<span class="string">&quot;hr&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &lt;% if (theme.excerpt_link)&#123; %&gt; // 阅读更多的链接</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;article-more-link&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%- url_for(post.path) %&gt;#more&quot;</span>&gt;</span>&lt;%= theme.excerpt_link %&gt;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &lt;% &#125; %&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>把横线、裁切过的正文和「阅读更多」的链接统统删除，在标题上面增加分类，调整过的代码如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="keyword">class</span>=<span class="string">&quot;col-3&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">article</span> <span class="attr">class</span>=<span class="string">&quot;archive-article archive-type-&lt;%= post.layout %&gt;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card rounded&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &lt;%- partial(&#x27;post/gallery&#x27;) %&gt;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-body bg-light&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &lt;%- partial(&#x27;post/category&#x27;, &#123;class_name: &#x27;mb-1&#x27;&#125;) %&gt; // 增加分类</span></span><br><span class="line"><span class="language-xml">        &lt;%- partial(&#x27;post/title&#x27;, &#123;class_name: &#x27;article-title mb-1 line-clamp line-clamp-3&#x27;&#125;) %&gt; // CSS 类改为 line-clamp-3，扩展为三行</span></span><br><span class="line"><span class="language-xml">        &lt;%- partial(&#x27;post/date&#x27;, &#123;class_name: &#x27;article-date&#x27;, date_format: null&#125;) %&gt; // 保留日期，其他删除</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span></span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>修改之后的列表是这样的：</p><p><a href="/playground/web/hexo-new-theme-based-on-acorn/image-20230713211525981.png" title="修改后的列表" class="gallery-item"><img src="/playground/web/hexo-new-theme-based-on-acorn/image-20230713211525981.png" alt="修改后的列表"><span class="image-caption">修改后的列表</span></a></p><p>个人觉得清爽了不少。</p><p>此外还有一个问题，配置好 Acorn 之后，Archives 每页显示 10 篇文章，这个问题不大，但不知为何首页同样显示 10 篇，而不是我想要的 4 篇。在主题文件夹研究了半天，没找到线索，最后才发现这个是由 Hexo 的 <code>config.yml</code> 全局控制的：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">...</span></span><br><span class="line"><span class="attr">index_generator:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line">  <span class="attr">order_by:</span> <span class="string">&#x27;-date&#x27;</span></span><br><span class="line"><span class="string">...</span></span><br><span class="line"><span class="attr">per_page:</span> <span class="number">10</span></span><br><span class="line"><span class="string">...</span></span><br></pre></td></tr></table></figure><p><code>index_generator</code> 下面的 <code>per_page</code> 控制首页显示的条数，首页要显示一行四条，把 10 改成 4 即可，如果想显示两行，则可以改成 8。另外一个 <code>per_page</code> 则控制列表页每页显示的条数，我直接改成了 20。</p><h2 id="默认预览图"><a href="#默认预览图" class="headerlink" title="默认预览图"></a>默认预览图</h2><p>之前的文章大部分没有配置预览图，没预览图的条目比有图的低一半左右，这样的列表页肯定不怎么好看。</p><p><a href="/playground/web/hexo-new-theme-based-on-acorn/image-20230713213833206.png" title="有预览图和没预览图的排在一行，低低高高，不太好看。" class="gallery-item"><img src="/playground/web/hexo-new-theme-based-on-acorn/image-20230713213833206.png" alt="有预览图和没预览图的排在一行，低低高高，不太好看。"><span class="image-caption">有预览图和没预览图的排在一行，低低高高，不太好看。</span></a></p><p>我们先准备好一张图，可以命名为 <code>post-preview.png</code>，丢在 <code>/source/images/</code> 文件夹里。此时有两种思路，其一是修改 <code>/themes/acorn/layout/partial/post/gallery.ejs</code>，这样不管是列表还是文章页，只要没有预览图，都会显示我们前面准备的这张  <code>post-preview.png</code>。但个人以为，列表页必须兼顾表现的一致性，才需要默认的预览图补位，但文章页搭配这张图没有多大意义，徒然浪费空间。</p><p>所以不如换另外一个思路，只改列表页就好，顺藤摸瓜，还是找到 <code>/themes/acorn/layout/partial/archive-post.ejs</code>，将 <code>&lt;%- partial(&#39;post/gallery&#39;) %&gt;</code> 替换为以下代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (post.<span class="property">photos</span> &amp;&amp; post.<span class="property">photos</span>.<span class="property">length</span>)&#123; %&gt; <span class="comment">// 如果配置了预览图就正常显示</span></span><br><span class="line">  &lt;%- <span class="title function_">partial</span>(<span class="string">&#x27;post/gallery&#x27;</span>) %&gt;</span><br><span class="line">&lt;% &#125; <span class="keyword">else</span> &#123;%&gt;  <span class="comment">// 如果没有，则显示 post-preview.png    </span></span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;card-img-link&quot;</span> <span class="attr">href</span>=<span class="string">&quot;&lt;%- url_for(post.path) %&gt;&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;gallery_&lt;%= post._id %&gt;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">class</span>=<span class="string">&quot;card-img lazyload&quot;</span> <span class="attr">data-src</span>=<span class="string">&quot;/images/post-preview.png&quot;</span> <span class="attr">itemprop</span>=<span class="string">&quot;image&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;gallery&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&lt;% &#125; %&gt;</span></span><br></pre></td></tr></table></figure><p>测试之后发现没问题，搞定。</p><h2 id="控制预览图比例"><a href="#控制预览图比例" class="headerlink" title="控制预览图比例"></a>控制预览图比例</h2><p>现在列表里的预览图都有了，但问题还在：Acorn 默认是不管你配置的是怎样的预览图，它都给你原样显示出来。但这些图的比例可能参差不齐，有纵向的，有横向的，有 4:3 的，有 16:9 的，没准还有正方形 1:1 的，所以我们得控制一下图片的比例。</p><p>这个倒是比较简单，不需要改模板，只要改 CSS 文件就好。打开 <code>/themes/acorn/source/css/_partial/archive.styl</code>，在 <code>.archives-wrap</code> 下面增加以下代码：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.archives</span></span><br><span class="line">  <span class="selector-class">.row</span></span><br><span class="line">    <span class="selector-class">.card-img-link</span></span><br><span class="line">      <span class="attribute">display</span>: flex</span><br><span class="line">      width: <span class="number">100%</span></span><br><span class="line">      aspect-ratio: <span class="number">16</span> / <span class="number">9</span> // 指定比例为 <span class="number">16</span>:<span class="number">9</span></span><br><span class="line">      overflow: hidden // 超过的部分不可见</span><br><span class="line">      align-items: center // 纵向居中</span><br><span class="line">      .card-img</span><br><span class="line">        width: <span class="number">100%</span></span><br></pre></td></tr></table></figure><h2 id="列表的节奏变化"><a href="#列表的节奏变化" class="headerlink" title="列表的节奏变化"></a>列表的节奏变化</h2><p>现在图文列表显示都正常了，但还比较单调，我希望能有一点节奏变化。</p><p>一开始的思路是在 CSS 里面按照 <code>nth-child[]</code>来调整不同的样式，但尝试了一下，发现成本极高，因为要适配不同的屏幕尺寸。</p><p>然后就尝试在模板文件里加一个前置判断，原本所有的列表项，其类别都是统一的 <code>col-3</code>，调整之后，根据排序的不同，第一个的类别改成 <code>col-12</code>，第二至第五改成 <code>col-6</code>。这些类别 Acorn 已经做好了屏幕适配，不存在兼容性问题。</p><p>加判断虽然简单，但这个序号要如何取得？研究了老半天，最后发现只要调用模板的时候传递一个变量即可。在 <code>/themes/acorn/layout/_partial/archive.ejs</code> 找到这一行：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%- <span class="title function_">partial</span>(<span class="string">&#x27;archive-post&#x27;</span>, &#123;<span class="attr">post</span>: post, <span class="attr">even</span>: i % <span class="number">2</span> == <span class="number">0</span>&#125;) %&gt;</span><br></pre></td></tr></table></figure><p>增加一个变量 <code>orderid</code>，值等于 Query 循环里面的 i：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%- <span class="title function_">partial</span>(<span class="string">&#x27;archive-post&#x27;</span>, &#123;<span class="attr">post</span>: post, <span class="attr">even</span>: i % <span class="number">2</span> == <span class="number">0</span>, <span class="attr">orderid</span>: i&#125;) %&gt;</span><br></pre></td></tr></table></figure><p>然后再次打开 <code>/themes/acorn/layout/partial/archive-post.ejs</code>，将里面的 <code>&lt;div class=&quot;col-3&quot;&gt;</code>替换为：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if (is_home())&#123;%&gt; // 首页都是统一的小号样式</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-3&quot;</span>&gt;</span></span><br><span class="line">&lt;% &#125; else &#123; %&gt;</span><br><span class="line">  &lt;% if ( orderid == 0)&#123;%&gt; // 第一个大号</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-12&quot;</span>&gt;</span></span><br><span class="line">  &lt;% &#125; else if ( orderid &gt; 0 &amp;&amp; orderid &lt; 5)&#123; %&gt; // 二至四中号</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-6&quot;</span>&gt;</span></span><br><span class="line">  &lt;% &#125; else &#123; %&gt; // 其他仍然小号</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;col-3&quot;</span>&gt;</span></span><br><span class="line">  &lt;% &#125; %&gt;</span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>列表就变成现在的样子了，撒花~</p><p>当然这个结果并不完美，因为现在的列表会根据年份断开，导致 <code>col-6</code> 后面紧跟两个 <code>col-3</code>，还是不整齐，太纠结了。</p><h2 id="启用-Tocbot"><a href="#启用-Tocbot" class="headerlink" title="启用 Tocbot"></a>启用 Tocbot</h2><p><a href="/playground/web/hexo-new-theme-based-on-acorn/image-20230714092041702.png" title="Acorn 文档页面的目录" class="gallery-item"><img src="/playground/web/hexo-new-theme-based-on-acorn/image-20230714092041702.png" alt="Acorn 文档页面的目录"><span class="image-caption">Acorn 文档页面的目录</span></a></p><p>Acorn 内置了 <a href="https://tscanlin.github.io/tocbot/">Tocbot</a>，技术文档也是有目录的，但本地如何启用？在 <code>/themes/acorn/_config.yml</code> 设置好 <code>toc: true</code>，发现没有效果。但也没有与之对应的模板，所以到底该怎么办呢？</p><p>打开 <code>/themes/acorn/layout/_partial/after-footer.ejs</code>，发现 tocbot 的相关代码确实已经加载好了：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;% <span class="keyword">if</span> (theme.<span class="property">toc</span>)&#123; %&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&lt;%- url_for(theme.libs.tocbot) %&gt;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    tocbot.<span class="title function_">init</span>(&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// Where to render the table of contents.</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">tocSelector</span>: <span class="string">&#x27;.js-toc&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// Where to grab the headings to build the table of contents.</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">contentSelector</span>: <span class="string">&#x27;.js-toc-content&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// Which headings to grab inside of the contentSelector element.</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">headingSelector</span>: <span class="string">&#x27;h2, h3&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// For headings inside relative or absolute positioned containers within content.</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">hasInnerContainers</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>对应的两个类分别是：<code>.js-toc</code> 用于挂载目录，<code>.js-toc-content</code> 则是需要生成目录的内容。我们试着将这两个类添加到 <code>/themes/acorn/layout/_partial/article.ejs</code>，找到这一行：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;article-entry&quot;</span> <span class="attr">itemprop</span>=<span class="string">&quot;articleBody&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>将它修改为：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;js-toc&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;article-entry js-toc-content&quot;</span> <span class="attr">itemprop</span>=<span class="string">&quot;articleBody&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>刷新，目录果然出现了。</p><p>当然，除非像本文一样啰嗦，大部分的文章篇幅都不长，并不需要目录，所以我们可以给目录设置一个开关。将上面的代码扩充一下，加一个判断：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;% if ( post.toc == true)&#123; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">nav</span> <span class="attr">class</span>=<span class="string">&quot;js-toc&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">nav</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;article-entry js-toc-content&quot;</span> <span class="attr">itemprop</span>=<span class="string">&quot;articleBody&quot;</span>&gt;</span></span><br><span class="line">&lt;% &#125; else &#123; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;article-entry&quot;</span> <span class="attr">itemprop</span>=<span class="string">&quot;articleBody&quot;</span>&gt;</span></span><br><span class="line">&lt;% &#125; %&gt;</span><br></pre></td></tr></table></figure><p>这样一来，默认不生成目录，但可以通过文章前面的 Front Matter 里加上一行 <code>toc: true</code> 手动加载，完美。</p><h2 id="启用-Swiper"><a href="#启用-Swiper" class="headerlink" title="启用 Swiper"></a>启用 Swiper</h2><p><a href="https://swiperjs.com/">Swiper</a> 也是 Acorn 内置的组件，但既然官方没有说明怎么用，那就只能自力更生去查文档。</p><p>按照 Swiper 首页的范例，以下是最简单的用法：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/swiper@10/swiper-element-bundle.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">swiper-container</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper-slide</span>&gt;</span>Slide 1<span class="tag">&lt;/<span class="name">swiper-slide</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper-slide</span>&gt;</span>Slide 2<span class="tag">&lt;/<span class="name">swiper-slide</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper-slide</span>&gt;</span>Slide 3<span class="tag">&lt;/<span class="name">swiper-slide</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">swiper-slide</span>&gt;</span>Slide ...<span class="tag">&lt;/<span class="name">swiper-slide</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">swiper-container</span>&gt;</span></span><br></pre></td></tr></table></figure><p>试了一下，并无效果。然后文档里发现另外一个范例：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Slider main container --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Additional required wrapper --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-wrapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Slides --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span>Slide 1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span>Slide 2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span>Slide 3<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- If we need pagination --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-pagination&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- If we need navigation buttons --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-button-prev&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-button-next&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">&lt;!-- If we need scrollbar --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-scrollbar&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>粘贴进来，发现框架已经搭好，但不能滑动，打开 <code>/themes/acorn/layout/_partial/after-footer.ejs</code>，发现触发的类名是 <code>oneSwiper</code>，加上之后就正常了。</p><div class="swiper oneSwiper"><div class="swiper-wrapper"><div class="swiper-slide"><p><a href="/playground/web/hexo-new-theme-based-on-acorn/image-20230714142643620.png" class="gallery-item"><img src="/playground/web/hexo-new-theme-based-on-acorn/image-20230714142643620.png"></a></p></div><div class="swiper-slide"><p><a href="/playground/web/hexo-new-theme-based-on-acorn/image-20230714142629684.png" class="gallery-item"><img src="/playground/web/hexo-new-theme-based-on-acorn/image-20230714142629684.png"></a></p></div><div class="swiper-slide"><p><a href="/playground/web/hexo-new-theme-based-on-acorn/image-20230714142552538.png" class="gallery-item"><img src="/playground/web/hexo-new-theme-based-on-acorn/image-20230714142552538.png"></a></p></div></div><div class="swiper-pagination"></div></div><p>然而又发现了新的问题，与这些 HTML 代码混用之后，Markdown 无法渲染，图片自然也不能正常显示。研究了一下 <sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>，发现 Markdown 与 HTML 混用时，HTML 代码不能缩进，并且与 Makrdown 内容之间必须空一行，如下所示：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper oneSwiper&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-wrapper&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">![](image-20230714142643620.png)</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">![](image-20230714142629684.png)</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-slide&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">![](image-20230714142552538.png)</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;swiper-pagination&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>刷新，搞定。</p><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">1.</span><span style="display: inline; vertical-align: top;">可参阅： https://daringfireball.net/projects/markdown/syntax</span><a href="#fnref:1" rev="footnote"> ↩</a></li></ol></div></div></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">更丰富的展示模块，更深度的细节定制。</summary>
    
    
    
    <category term="玩艺" scheme="https://waxa.design/categories/playground/"/>
    
    <category term="网站" scheme="https://waxa.design/categories/playground/web/"/>
    
    
    <category term="Theme" scheme="https://waxa.design/tags/Theme/"/>
    
    <category term="Hexo" scheme="https://waxa.design/tags/Hexo/"/>
    
    <category term="Acorn" scheme="https://waxa.design/tags/Acorn/"/>
    
    <category term="Web Development" scheme="https://waxa.design/tags/Web-Development/"/>
    
  </entry>
  
  <entry>
    <title>Auto Photoshop Stable Diffusion Plugin</title>
    <link href="https://waxa.design/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/"/>
    <id>https://waxa.design/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/</id>
    <published>2023-07-09T02:55:00.000Z</published>
    <updated>2023-07-10T11:54:19.002Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>因为名字太长，为行文方便，后文一律简称为 SD4PS。<a href="https://github.com/AbdullahAlfaraj/Auto-Photoshop-StableDiffusion-Plugin"><strong>Github 传送门</strong></a></p><p>这款插件其实已经推出有一段时间了，但国内好像没有太具深度的介绍，介绍完如何安装，随便生成几张图片，就点到为止了。还有普遍反应的安装报错，但我按照说明文档中的标准流程走下来，基本上通行无阻，可能是人品比较好？</p><p>至于现阶段的体验，个人觉得远不如想象的那么趁手。基本的 txt2img &#x2F; img2img 虽然简单，但因为不能像 Web UI 那样存储预设，浏览和切换模型 &#x2F; Lora &#x2F; Embeddings 也不方便，所以得先在 Web UI 里面把包括 LORA 在内的 Prompts 写好，然后再粘贴到 SD4PS——多试几遍就反应过来了，这不是多此一举吗？还不如 Web UI 出图，然后 Photoshop 打开来得便捷。</p><p>当然，安装这个插件肯定是为了 Inpaint &#x2F; Outpaint，毕竟绘制草图和处理蒙版，Photoshop 可不知比 Web UI 强到哪里去了。</p><span id="more"></span><h2 id="Inpaint-体验"><a href="#Inpaint-体验" class="headerlink" title="Inpaint 体验"></a>Inpaint 体验</h2><p>我们先在 Photoshop 里面生成一张图，模型还是 DreamShaper 7，<code>a beautiful young girl</code>常规起手。注意这个插件不兼容画板，新建文档的时候记得取消画板选项，分辨率依旧是 512x768。走起：</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/output_image.png" title="A beautiful young girl" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/output_image.png" alt="A beautiful young girl"><span class="image-caption">A beautiful young girl</span></a></p><p>我们从生成的结果中选了一张比较满意的，但希望把眼睛换成绿色。试着用白色画笔涂抹眼睛，作为 Inpaint 蒙版：</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/eyes-white-mask.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/eyes-white-mask.png"></a></p><p>此时维持原 Prompts 不变，选中整张图片，在原来的 Prompts 基础上增加眼睛的描述：<code>green eyes, light green pupils, high detailed eyes</code>，绘图模式切换至 Inpaint，点击 Generate Inpaint，五选一之后得到：</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/girl-with-green-eyes.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/girl-with-green-eyes.png"></a></p><p>效果不错。注意 SD4PS 选项卡，原图和蒙版都识别得很准确——不要以为这很正常，其实这就是该插件最容易翻车的地方。</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/image-20230709122410457.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/image-20230709122410457.png"></a></p><h3 id="局部重绘"><a href="#局部重绘" class="headerlink" title="局部重绘"></a>局部重绘</h3><p>当然也有第二种方法，就是框选局部再重绘，这也是绘画和修图时最常用的场景。</p><p>此时建议将 Prompts 内关于人物整体的部分去掉，只需要眼睛的描述即可，因为我们重绘的部分只包括眼睛，保留人物的描述反而会造成干扰。而且该方法重绘的面积更小，理论上消耗的资源更低。</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/eyes-selected.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/eyes-selected.png"></a></p><p>出图之前记得检查一下重绘部分的分辨率，因为插件的比例控制非常任性。本来是为了节省资源才选择局部重绘，结果一不小心，插件给出 33.83 倍的放大比率，电脑差点当场崩溃……</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/image-20230709123540396.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/image-20230709123540396.png"></a></p><p>风扇狂转了十几分钟之后，出来的结果令我……大失所望，眼睛套眼睛，右边还套歪了：</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/eyes-regenerate-result.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/eyes-regenerate-result.png"></a></p><p>怀疑是局部重绘的计算量太小，导致重绘的部分无法完美融合。既然如此，那就尝试调整参数，将 SD4PS 底部的 Mask Content 选项从 Fill 更改为 Original，此时 AI 会更多地参考原图，理论上会降低翻车的机率。</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/image-20230709125451268.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/image-20230709125451268.png"></a></p><p>在重绘的过程中注意到原图和蒙版缩略图是这样的：</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/image-20230709125612522.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/image-20230709125612522.png"></a></p><p>不用想，这次肯定翻车。出图之后果不其然，比上一次还离谱：</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/eyes-regenerate-failed-result.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/eyes-regenerate-failed-result.png"></a></p><p>这也是这款插件最不稳定最令人揪心的地方，操作没变，但插件并不是每次都能准确识别原图和蒙版。</p><p>再次尝试，可惜还是很魔性：</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/eyes-regenerate-failed-result2.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/eyes-regenerate-failed-result2.png"></a></p><p>既然如此，那我们就扩大框选面积，选中整个面部，增加 <code>beautiful face</code> 关键词。为了与之前的结果有所差异，改成蓝色眼睛。</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/image-20230709131016550.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/image-20230709131016550.png"></a></p><p>这样参考的要素更多，理论上会画得更好一点。再次重绘：</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/girl-with-blue-eyes.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/girl-with-blue-eyes.png"></a></p><p>成功。</p><p>由此可见，参考的像素越少，翻车的机率越大，即便我们希望节省系统资源，但还是要拿捏好尺度，过于局部的细节 AI 很难控制。</p><h3 id="精确控制蒙版"><a href="#精确控制蒙版" class="headerlink" title="精确控制蒙版"></a>精确控制蒙版</h3><p>使用几天之后，我发现其实精确控制蒙版并不难。</p><p>起初在网上看视频，想当然地认为涂白之后，插件自动将其识别为蒙版，但这样的结果就是看人品，有时候 ok，有时候叫人抓狂。但稍加注意就能发现，如果你从 txt2img &#x2F; img2img 切换到 inpaint &#x2F; outpaint，插件会自动生成一个名为 <em>Mask – Paint White to Mask – temporary</em> 的图层：</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/image-20230709152907829.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/image-20230709152907829.png"></a></p><p>在这个图层里，无论你是用选择工具框选，还是用画笔涂抹，又或是用钢笔精确勾选，总之只要涂白，插件就再也不会傻傻搞错你的蒙版了。</p><h2 id="涂鸦重绘"><a href="#涂鸦重绘" class="headerlink" title="涂鸦重绘"></a>涂鸦重绘</h2><p>涂鸦重绘也是非常普遍的使用场景。比如我想给这位已经换上蓝色美瞳的女同学戴上一顶希腊式的花冠，通过我高妙的画技，得到这样的结果：</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/image-20230709133820611.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/image-20230709133820611.png"></a></p><p>在 Prompts 增加花冠的描述词：<code>greek flower crown, greek wreath</code>，选中头部，看看图生图能得到怎样的结果：</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/girl-with-greek-wreath.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/girl-with-greek-wreath.png"></a></p><p>插件读懂了我的想法，但完全没有考虑如何与原图融合。调整参数，将 Inpainting conditioning mask strenght 从 1 降到 0.3：</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/image-20230709134621361.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/image-20230709134621361.png"></a></p><p>重新出图：</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/girl-with-greek-wreath2.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/girl-with-greek-wreath2.png"></a></p><p>脸倒是更像原来的脸了，但是这个融合还是很捉急啊，难道我都用上 AI 了，还要手动抠图合成吗？再说这光线也跟原来不一样，重塑光线可太麻烦了。</p><p>没奈何，那还是重绘一下全图试试。<kbd>Ctr</kbd> + <kbd>A</kbd> 选择全图，为了保持女同学的姿势不变，SD4PS 切换到 ControlNet 标签页，激活 slot1，选择 openpose-face 模型：</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/image-20230709135356150.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/image-20230709135356150.png"></a></p><p>回到默认标签，跑图！</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/girl-with-greek-wreath-success.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/girl-with-greek-wreath-success.png"></a><br><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/girl-with-greek-wreath-success2.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/girl-with-greek-wreath-success2.png"></a></p><p>挺好，就是背景和光线还是有变化，并且受 <code>greek</code> 影响，背景里出现了希腊的古典建筑。我们尝试将 Inpainting conditioning mask strenght 从 0.3 降到 0.15 试试：</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/girl-with-greek-wreath-success3.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/girl-with-greek-wreath-success3.png"></a></p><p>只能说有一点变化，但不明显。感觉方向不太对，<strong>img2img 适合确定构图之后改变画风或者提升品质和完成度，如果只想调整局部，加一个花冠，添一条项链，或者换一身衣裳，那还是 Inpaint 更合适</strong>。</p><h3 id="Inpaint-局部重绘"><a href="#Inpaint-局部重绘" class="headerlink" title="Inpaint 局部重绘"></a>Inpaint 局部重绘</h3><p>我们将花冠部分涂成白色蒙版：</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/image-20230709141737351.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/image-20230709141737351.png"></a></p><p>为了减轻系统负担，只选中头部：</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/image-20230709141826088.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/image-20230709141826088.png"></a></p><p>跑图：</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/girl-with-greek-wreath-success4.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/girl-with-greek-wreath-success4.png"></a><br><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/girl-with-greek-wreath-success5.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/girl-with-greek-wreath-success5.png"></a><br><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/girl-with-greek-wreath-success6.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/girl-with-greek-wreath-success6.png"></a></p><p>几乎每一张都得到了可用的结果，Inpaint 永远的神！</p><h2 id="Outpaint"><a href="#Outpaint" class="headerlink" title="Outpaint"></a>Outpaint</h2><p>Outpaint 与 Inpaint 原理基本一致，差别仅在于蒙版是正选还是反选而已，这里暂且不作探讨，以后若有意外发现再增补进来。</p><h2 id="图片保存路径"><a href="#图片保存路径" class="headerlink" title="图片保存路径"></a>图片保存路径</h2><p>Web UI 生成的任何图片都可以在 Outputs 文件夹里面找到，而 SD4PS 调用的虽然也是 Stable Diffusion，但它生成的图片却不在 Outputs 文件夹里。如果跑了图却没有另外保存，事后再去找，难免会一时摸不着头绪。</p><p>当然，办法肯定会有的。打开插件的 Settings 标签页，点击最下面的 <strong>Get Path</strong> 按钮，就可以找到文件的保存路径。</p><p><a href="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/image-20230709160106478.png" class="gallery-item"><img src="/playground/stable-diffusion/stable-diffusion-plugin-for-photoshop/image-20230709160106478.png"></a></p><p>但里面的文件夹名称都是随机生成的字符串，要找指定的文件提供不了任何线索，只能海底捞针逐个翻阅。假如你已经跑过很多图生成了海量文件夹……那场面想想就很酸爽，所以有可能的话，还是养成随手存图的好习惯吧。</p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">给 Photoshop 准备的 Stable Diffusion 操作界面，虽然还称不上尽善尽美，但至少值得一试。</summary>
    
    
    
    <category term="玩艺" scheme="https://waxa.design/categories/playground/"/>
    
    <category term="Stable Diffusion" scheme="https://waxa.design/categories/playground/stable-diffusion/"/>
    
    
    <category term="plugins" scheme="https://waxa.design/tags/plugins/"/>
    
    <category term="stable diffusion" scheme="https://waxa.design/tags/stable-diffusion/"/>
    
    <category term="photoshop" scheme="https://waxa.design/tags/photoshop/"/>
    
  </entry>
  
  <entry>
    <title>用 Stable Diffusion 尝试传统水墨画</title>
    <link href="https://waxa.design/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/"/>
    <id>https://waxa.design/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/</id>
    <published>2023-07-06T05:25:07.000Z</published>
    <updated>2023-07-17T10:36:28.107Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>最近的项目与传统文化相关，主题又含有竹子元素，所以就想着如何用 Stable Diffusion 来输出合适的素材。作为传统的梅兰竹菊四君子之一，竹一直都是文人画里非常重要的元素，找一些相关的素材并不难，不过外面找的毕竟不如自己炼制来得好玩。</p><p>参考知乎上的 <a href="https://www.zhihu.com/question/589056030/answer/2979794738">Ai 绘画有哪些有趣的 prompt？ - 董步云的回答</a>，水墨风格的关键词如下，顺便分解一下词组：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sumi-e style, // 日语水墨</span><br><span class="line">(expressive brush strokes):1.2, // 提升笔触的精致感</span><br><span class="line">ink wash, gradation, monochromatic, // 水墨的层次感，保持黑白色调</span><br><span class="line">poetic atmosphere, delicate balance, // 诗意，平衡</span><br><span class="line">fluid motion // 液态的流动感</span><br></pre></td></tr></table></figure><p>所以输出的是这样的例图，就可以预见了。</p><p><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/image-20230706132451143.jpeg" title="版权所有 董步云@知乎" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/image-20230706132451143.jpeg" alt="版权所有 董步云@知乎"><span class="image-caption">版权所有 董步云@知乎</span></a></p><span id="more"></span><p>我们先按照上面的 prompts 来尝试一下，把女孩主题换成我们想画的竹子：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">masterpiece, best quality, highres, 8k, </span><br><span class="line">bamboo, falling bamboo leaves, blowing wind, (no humans:1.2), </span><br><span class="line">traditianal chinese ink painting, sumi-e style, (expressive brush strokes):1.2,</span><br><span class="line">ink wash, gradation, monochromatic,</span><br><span class="line">poetic atmosphere, delicate balance,</span><br><span class="line">fluid motion</span><br></pre></td></tr></table></figure><p>依旧是 DreamShaper 作为底模，分辨率 768 x 512px，输出如下：</p><div class="justified-gallery"><p><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00049-1493546664.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00049-1493546664.png"></a><br><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00052-1493546667.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00052-1493546667.png"></a><br><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00053-1493546668.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00053-1493546668.png"></a><br><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00059-1493546674.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00059-1493546674.png"></a></p></div><p>确实有点意思了。不过 <em>fluid motion</em> 还是导致了一些意外的结果。如以下图：</p><div class="justified-gallery"><p><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00048-1493546663.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00048-1493546663.png"></a><br><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00060-1493546675.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00060-1493546675.png"></a><br><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00057-1493546672.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00057-1493546672.png"></a></p></div><p>过于强调流动感，画面的冲击力是有了，但不太符合我们想要的传统美学。我们去掉 <em>fluid motion</em>，同时将 <em>monochromatic</em> 更换为 <em>turquoise theme</em>，增加假山，这样就可以将黑白的水墨画换成青绿色主题，看看效果如何？</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">masterpiece, best quality, highres, 8k, </span><br><span class="line">bamboo, falling bamboo leaves, chinese style rock garden, blowing wind, (no humans:1.2), </span><br><span class="line">traditianal chinese ink painting, sumi-e style, (expressive brush strokes):1.2,</span><br><span class="line">ink wash, gradation, (turquoise theme),</span><br><span class="line">poetic atmosphere, delicate balance,</span><br></pre></td></tr></table></figure><p>其他参数不变，输出如下：</p><div class="justified-gallery"><p><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00066-3843042960.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00066-3843042960.png"></a><br><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00071-3843042965.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00071-3843042965.png"></a><br><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00074-3843042968.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00074-3843042968.png"></a><br><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00078-3843042972.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00078-3843042972.png"></a></p></div><p>意境不错，但假山园林的比重太高了。不如化繁为简，专注于竹子，假山可以后期合成。去掉假山的关键词，重新输出：</p><div class="justified-gallery"><p><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00081-1987821862.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00081-1987821862.png"></a><br><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00083-1987821864.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00083-1987821864.png"></a><br><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00084-1987821865.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00084-1987821865.png"></a><br><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00087-1987821868.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00087-1987821868.png"></a><br><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00095-1987821876.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00095-1987821876.png"></a></p></div><p>基本上成功。唯一的缺憾是始终没有画出风中飘洒的竹叶，不知道是哪里出了问题。</p><p>突然想起东坡的朱竹，又尝试了一下，结果怎么说呢？有点怪怪的，因为红色的竹子不符合常识，所以AI 很容易偏离到枫叶主题：</p><div class="justified-gallery"><p><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00111-671757114.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00111-671757114.png"></a><br><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00102-671757105.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00102-671757105.png"></a></p></div><p>除了竹子之外，画面中还需要一些辅助元素。将竹子替换成流云和烟雾，得到：</p><div class="justified-gallery"><p><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00181-2660401093.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00181-2660401093.png"></a><br><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00182-2660401094.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00182-2660401094.png"></a><br><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00189-2660401101.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00189-2660401101.png"></a></p></div><p>再将主体换成假山和石头，得到：</p><div class="justified-gallery"><p><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00194-2660401090.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00194-2660401090.png"></a><br><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00205-2660401101.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00205-2660401101.png"></a><br><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00219-2660401099.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00219-2660401099.png"></a><br><a href="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00221-2660401101.png" class="gallery-item"><img src="/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/00221-2660401101.png"></a></p></div><p>感觉 AI 对假山还是有误会，本人的英文水平也不太够用，没有找到合适的单词来描述文人画里那些嶙峋奇崛的石头。不过这些也差不多够用了，就此收工。</p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article-gallery&quot;&gt;&lt;p&gt;最近的项目与传统文化相关，主题又含有竹子元素，所以就想着如何用 Stable Diffusion 来输出合适的素材。作为传统的梅兰竹菊四君子之一，竹一直都是文人画里非常重要的元素，找一些相关的素材并不难，不过外面找的毕竟不如自己炼制来得好玩。&lt;/p&gt;
&lt;p&gt;参考知乎上的 &lt;a href=&quot;https://www.zhihu.com/question/589056030/answer/2979794738&quot;&gt;Ai 绘画有哪些有趣的 prompt？ - 董步云的回答&lt;/a&gt;，水墨风格的关键词如下，顺便分解一下词组：&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sumi-e style, // 日语水墨&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(expressive brush strokes):1.2, // 提升笔触的精致感&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ink wash, gradation, monochromatic, // 水墨的层次感，保持黑白色调&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;poetic atmosphere, delicate balance, // 诗意，平衡&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;fluid motion // 液态的流动感&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;所以输出的是这样的例图，就可以预见了。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/image-20230706132451143.jpeg&quot; title=&quot;版权所有 董步云@知乎&quot; class=&quot;gallery-item&quot;&gt;&lt;img src=&quot;/playground/stable-diffusion/traditional-chinese-ink-painting-by-stable-diffusion/image-20230706132451143.jpeg&quot; alt=&quot;版权所有 董步云@知乎&quot;&gt;&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="玩艺" scheme="https://waxa.design/categories/playground/"/>
    
    <category term="Stable Diffusion" scheme="https://waxa.design/categories/playground/stable-diffusion/"/>
    
    
    <category term="stable diffusion" scheme="https://waxa.design/tags/stable-diffusion/"/>
    
    <category term="竹子" scheme="https://waxa.design/tags/%E7%AB%B9%E5%AD%90/"/>
    
    <category term="中国水墨画" scheme="https://waxa.design/tags/%E4%B8%AD%E5%9B%BD%E6%B0%B4%E5%A2%A8%E7%94%BB/"/>
    
    <category term="AIGC" scheme="https://waxa.design/tags/AIGC/"/>
    
  </entry>
  
  <entry>
    <title>LORA 日推：梵高风格</title>
    <link href="https://waxa.design/playground/stable-diffusion/van-gogh-style-lora/"/>
    <id>https://waxa.design/playground/stable-diffusion/van-gogh-style-lora/</id>
    <published>2023-07-04T13:52:31.000Z</published>
    <updated>2023-07-17T08:54:07.636Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>今天推荐的 Lora 是 <a href="https://civitai.com/models/100873/van-gogh-style">Van Gogh Style</a>，还原度极高。以 <code>a young beautiful girl</code> 常规起手，底模选用 <a href="https://civitai.com/models/4384/dreamshaper">DreamShaper</a>，Prompts 如下；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">masterpiece, best quality, 8k, ultra detailed, simple background, </span><br><span class="line">a young beautiful girl, &lt;lora:vgv1:1&gt;, vg, painting by van gogh, vincent van gogh style,</span><br></pre></td></tr></table></figure><p><a href="/playground/stable-diffusion/van-gogh-style-lora/00338-1039788934.png" class="gallery-item"><img src="/playground/stable-diffusion/van-gogh-style-lora/00338-1039788934.png"></a></p><p>大笔厚涂，油画颜料的堆叠极富体积感，笔触感极佳，这一点比同类型的 Lora 都要突出，甚至真实得有些叫人心疼，这种画法是不是太费颜料了……</p><span id="more"></span><p>如果觉得皮肤这么画太狂放，毕竟光滑粉嫩还是大家的普遍倾向，那稍微调整一下即可。使用同样的 Seed，将 Lora 的权重降到 0.7；</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">masterpiece, best quality, 8k, ultra detailed, simple background, </span><br><span class="line">a young beautiful girl, &lt;lora:vgv1:0.7&gt;, vg, oil painting by van gogh, vincent van gogh style,</span><br></pre></td></tr></table></figure><p><a href="/playground/stable-diffusion/van-gogh-style-lora/00343-2440416913.png" class="gallery-item"><img src="/playground/stable-diffusion/van-gogh-style-lora/00343-2440416913.png"></a></p><p>差不多就完美了。</p><p>像梵高这种风格强烈的大师，我们最爱做的事情就是为我所用，给平淡无奇的素材加上那么一点点艺术性。比如最近热映的电影，陈思成导演的<a href="https://movie.douban.com/subject/35660795/">消失的她</a>，有一组角色海报就是用梵高风格来画的，虽然这个画风更细密，但笔触感也更平了：</p><div class="justified-gallery"><p><a href="/playground/stable-diffusion/van-gogh-style-lora/3eb095ec066eea0d822b9d0b4c8326b652a3886968b74-FCRgFM_fw1200webp.webp" class="gallery-item"><img src="/playground/stable-diffusion/van-gogh-style-lora/3eb095ec066eea0d822b9d0b4c8326b652a3886968b74-FCRgFM_fw1200webp.webp"></a><br><a href="/playground/stable-diffusion/van-gogh-style-lora/0f1b02c55ec715093329ad4e4ff24ee281bba36c174a47-YtkAd8_fw1200webp.webp" class="gallery-item"><img src="/playground/stable-diffusion/van-gogh-style-lora/0f1b02c55ec715093329ad4e4ff24ee281bba36c174a47-YtkAd8_fw1200webp.webp"></a><br><a href="/playground/stable-diffusion/van-gogh-style-lora/51917fd15362161be6bc03f1ca8221a945cbea0b1317fd-USkgfX_fw1200webp.webp" class="gallery-item"><img src="/playground/stable-diffusion/van-gogh-style-lora/51917fd15362161be6bc03f1ca8221a945cbea0b1317fd-USkgfX_fw1200webp.webp"></a><br><a href="/playground/stable-diffusion/van-gogh-style-lora/image-20230706094111775.jpeg" class="gallery-item"><img src="/playground/stable-diffusion/van-gogh-style-lora/image-20230706094111775.jpeg"></a><br><a href="/playground/stable-diffusion/van-gogh-style-lora/image-20230706094134153.jpeg" class="gallery-item"><img src="/playground/stable-diffusion/van-gogh-style-lora/image-20230706094134153.jpeg"></a></p></div><p>这点小伎俩自然骗不过咱们的眼睛，当然也没啥难度。比如牛教授最近用的头像，是许同学亲自创作的和服猫咪食面图。猫咪表情生动，面馆内的布置细节丰富，还能透过窗户和窗外的樱花看到远处的富士山。</p><p><a href="/playground/stable-diffusion/van-gogh-style-lora/profniu-wechat-avatar.png" class="gallery-item"><img src="/playground/stable-diffusion/van-gogh-style-lora/profniu-wechat-avatar.png"></a></p><p>我们丢到图生图，用梵高风格重绘一下：</p><div class="justified-gallery"><p><a href="/playground/stable-diffusion/van-gogh-style-lora/00017-945388574.png" class="gallery-item"><img src="/playground/stable-diffusion/van-gogh-style-lora/00017-945388574.png"></a><br><a href="/playground/stable-diffusion/van-gogh-style-lora/00025-945388582.png" class="gallery-item"><img src="/playground/stable-diffusion/van-gogh-style-lora/00025-945388582.png"></a><br><a href="/playground/stable-diffusion/van-gogh-style-lora/00030-945388587.png" class="gallery-item"><img src="/playground/stable-diffusion/van-gogh-style-lora/00030-945388587.png"></a><br><a href="/playground/stable-diffusion/van-gogh-style-lora/00059-1511553299.png" class="gallery-item"><img src="/playground/stable-diffusion/van-gogh-style-lora/00059-1511553299.png"></a></p></div><p>虽然手的问题一直存在——很显然 AI 也搞不清楚你们这些人类到底是怎么做到一只手拿筷子另外一只手端碗的<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>——但风格还是非常明显，大成功！</p><p>接着我们以阿锅家的法国斗牛犬为创作主题。有一天，阿锅忙于思考人生，家里的小狗只能穿上 Labcoat，替父从军，不，替主人去实验室里搬砖的感人故事：</p><p>第一次就接受这么重大的任务，慎重思考实验方案；</p><p><a href="/playground/stable-diffusion/van-gogh-style-lora/00160-3920061412.png" class="gallery-item"><img src="/playground/stable-diffusion/van-gogh-style-lora/00160-3920061412.png"></a></p><p>有思路了！然后去仓库里拿实验器材：</p><p><a href="/playground/stable-diffusion/van-gogh-style-lora/00161-3920061413.png" class="gallery-item"><img src="/playground/stable-diffusion/van-gogh-style-lora/00161-3920061413.png"></a></p><p>呼呼~ 实验顺利进行中：</p><p><a href="/playground/stable-diffusion/van-gogh-style-lora/00178-2773427644.png" class="gallery-item"><img src="/playground/stable-diffusion/van-gogh-style-lora/00178-2773427644.png"></a></p><p>与实验室同事亲切沟通实验结果，毫无疑问，这次的实验数据很有价值：</p><p><a href="/playground/stable-diffusion/van-gogh-style-lora/00180-2773427646.png" class="gallery-item"><img src="/playground/stable-diffusion/van-gogh-style-lora/00180-2773427646.png"></a></p><p>大成功，来一杯香槟庆祝一下！</p><p><a href="/playground/stable-diffusion/van-gogh-style-lora/00183-2773427649.png" class="gallery-item"><img src="/playground/stable-diffusion/van-gogh-style-lora/00183-2773427649.png"></a><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">1.</span><span style="display: inline; vertical-align: top;">吃拉面也是可以优化的，一位日本玩家特地开发了一个名叫 <a href="https://civitai.com/models/22359/betterrameneating">BetterRamenEating</a> 的 Lora。前面的图只要加上这个 Lora，猫咪就能学会正确的拉面食用姿势了。</span><a href="#fnref:1" rev="footnote"> ↩</a></li></ol></div></div></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article-gallery&quot;&gt;&lt;p&gt;今天推荐的 Lora 是 &lt;a href=&quot;https://civitai.com/models/100873/van-gogh-style&quot;&gt;Van Gogh Style&lt;/a&gt;，还原度极高。以 &lt;code&gt;a young beautiful girl&lt;/code&gt; 常规起手，底模选用 &lt;a href=&quot;https://civitai.com/models/4384/dreamshaper&quot;&gt;DreamShaper&lt;/a&gt;，Prompts 如下；&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;masterpiece, best quality, 8k, ultra detailed, simple background, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;a young beautiful girl, &amp;lt;lora:vgv1:1&amp;gt;, vg, painting by van gogh, vincent van gogh style,&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;&lt;a href=&quot;/playground/stable-diffusion/van-gogh-style-lora/00338-1039788934.png&quot; class=&quot;gallery-item&quot;&gt;&lt;img src=&quot;/playground/stable-diffusion/van-gogh-style-lora/00338-1039788934.png&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;大笔厚涂，油画颜料的堆叠极富体积感，笔触感极佳，这一点比同类型的 Lora 都要突出，甚至真实得有些叫人心疼，这种画法是不是太费颜料了……&lt;/p&gt;</summary>
    
    
    
    <category term="玩艺" scheme="https://waxa.design/categories/playground/"/>
    
    <category term="Stable Diffusion" scheme="https://waxa.design/categories/playground/stable-diffusion/"/>
    
    
    <category term="AIGC" scheme="https://waxa.design/tags/AIGC/"/>
    
    <category term="stable-diffusion" scheme="https://waxa.design/tags/stable-diffusion/"/>
    
    <category term="van-gogh" scheme="https://waxa.design/tags/van-gogh/"/>
    
    <category term="LORA" scheme="https://waxa.design/tags/LORA/"/>
    
  </entry>
  
  <entry>
    <title>iPhone 1x 信号故障</title>
    <link href="https://waxa.design/blog/iphone-1x-signal-failure/"/>
    <id>https://waxa.design/blog/iphone-1x-signal-failure/</id>
    <published>2023-06-08T10:31:25.000Z</published>
    <updated>2023-06-08T11:40:25.913Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>下午一点半，陶小婧出门，我则在家校书。</p><p>大概三点钟，电话铃响了。陶小婧说手机很奇怪，没有网络信号。开关飞行模式、重启动手机都试过了，就是连不了网，因为没网络，所以也打不了车，好在还能打电话，只能麻烦我过去接她。</p><p>到地方接着人，顺便检查了一下手机，信号是满格，但后面的文字不是 4G，而是一个从未见过的 1x，果然奇怪。试着进入飞行模式，十秒钟之后再关闭，然而正如陶小婧所说，没有任何效果。</p><p>在路边不便久留，于是先回家。</p><p>回家用 <em>“iPhone 1x 上不了网”</em> 作为关键词搜索了一下。原来 1x 表示 CDMA 的原始速率，该症状一般出现在电信手机上，解决办法各种各样，略举如下：</p><ol><li>用飞行模式重置网络；</li><li>进入菜单，按 <em>“通用 &gt; 关于手机 &gt; 还原 &gt; 还原网络设置”</em> 重置网络；</li><li>关机，重启；</li><li>拔卡重插，重启；</li><li>去电信换张 SIM 卡；</li><li>去苹果天才吧报修；</li></ol><p>前面四种一一试过，症状如故。感觉很棘手，赶紧让陶小婧搜索了 Apple Store 的地址，以备不虞。不过出一趟门毕竟成本太高，还是先弄清楚具体是卡的问题还是手机的问题。把我的手机也拿出来，拔下两台手机的 SIM 卡。陶小婧的电信卡我还用酒精棉仔细擦拭了一遍，然后遍历操作：</p><ol><li>把我的联通卡装到陶小婧的 iPhone 上，网络正常，说明 iPhone 没问题；</li><li>把陶小婧的电信卡装到我的 Vivo 上，嘿，居然也正常，说明 SIM 卡也没问题；</li><li>那到底是什么问题？兼容性问题？但这张卡插在这部手机上已经有三年多了。</li></ol><p>没奈何，把卡各自插回原手机，看看有没有别的办法。然后过了一会，陶小婧惊叫，网络恢复正常了。</p><p>妈的，居然稀里糊涂就好了……</p><p>中间看过 Bilibili 上<a href="https://www.bilibili.com/video/BV19r4y1b7e4">一个视频</a>，有两点可以对得上：先清洁 SIM 卡；再用另外一张卡切换网络。因为陶小婧的 iPhone 只有单卡槽，所以只能通过换我的卡来完成这个过程。</p><p>是为记，希望对发生同样故障的朋友有帮助。</p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article</summary>
      
    
    
    
    <category term="日常" scheme="https://waxa.design/categories/blog/"/>
    
    
    <category term="iPhone" scheme="https://waxa.design/tags/iPhone/"/>
    
    <category term="信号故障" scheme="https://waxa.design/tags/%E4%BF%A1%E5%8F%B7%E6%95%85%E9%9A%9C/"/>
    
  </entry>
  
  <entry>
    <title>SONY 相机文件名前缀的下划线</title>
    <link href="https://waxa.design/playground/gears/sony-camera-filename-underscore/"/>
    <id>https://waxa.design/playground/gears/sony-camera-filename-underscore/</id>
    <published>2023-06-05T07:19:42.000Z</published>
    <updated>2023-06-05T10:42:54.378Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>我用 SONY 相机拍摄的照片，不知为何，文件名都有一条前缀的下划线，比如 <code>_DSC9527.jpg</code>。记得最早是没有的，但因为无伤大雅，就一直略过了。</p><p>最近改用 <a href="/playground/web/hexo-and-new-blog/">Hexo</a>，前缀下划线 <code>_</code> 的文件，Hexo 默认是不处理的。这就导致了一个很尴尬的问题：直接把照片拖入 Obsidian 文档中，生成静态网页之后刷新却不显示。手动去除下划线，问题倒是暂时修复了，不过我还是想弄明白这其中的因果，毕竟照片那么多，也不可能每次都手动纠正。</p><p>一搜索，这个问题似乎确实微不足道，中文网络还不曾有人讨论过。改用英文搜索，很快就有了答案：原来因为把色彩空间设置成了 Adobe RGB。如果进入机身菜单，改回默认的 sRGB，下划线就会消失 <sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>。</p><p>既然规范如此，我又不可能因此放弃 Adobe RGB，那岂不是无法可想，只能每次手动操作，任劳任怨？</p><p>其实也很简单，给文件批量重命名的方法有无数个，自选一种即可。之前给 Obsidian 安装过一个插件，叫做 <a href="https://github.com/RainCat1998/obsidian-custom-attachment-location">Custom Attachment Location</a>，打开插件设置界面，将 <code>Automatically rename attachment files</code> 选项打开。这样每次把照片插入 Obsidian 时，插件就会按照时间码自动将其重命名。</p><p>之前因为命名规则太少，只有时间码和文件名两个参数可用，我嫌它不够灵活就没有考虑启用，没想到有些缘分终究逃不掉。</p><p>搞定收工。<div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">1.</span><span style="display: inline; vertical-align: top;">原帖来自 <a href="https://www.dpreview.com/forums/thread/3976976">DPReview 论坛</a> <em>（这么好的网站居然要 shut down 了，呜呼）</em>，答疑的大佬还给了 SONY 一个清白。因为这并非 SONY 一家的问题，DCF 就是这样规范的，而相机厂商都遵循相同的规范。因为我只有 SONY 的相机，所以无法验证别家的机器是否同样如此。有关 DCF 规范，详见 <a href="https://en.wikipedia.org/wiki/Design_rule_for_Camera_File_system">https://en.wikipedia.org/wiki/Design_rule_for_Camera_File_system</a></span><a href="#fnref:1" rev="footnote"> ↩</a></li></ol></div></div></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article</summary>
      
    
    
    
    <category term="玩艺" scheme="https://waxa.design/categories/playground/"/>
    
    <category term="器用" scheme="https://waxa.design/categories/playground/gears/"/>
    
    
    <category term="SONY" scheme="https://waxa.design/tags/SONY/"/>
    
    <category term="相机" scheme="https://waxa.design/tags/%E7%9B%B8%E6%9C%BA/"/>
    
    <category term="文件名" scheme="https://waxa.design/tags/%E6%96%87%E4%BB%B6%E5%90%8D/"/>
    
  </entry>
  
  <entry>
    <title>夜访山塘</title>
    <link href="https://waxa.design/tours/shantang-at-night/"/>
    <id>https://waxa.design/tours/shantang-at-night/</id>
    <published>2023-06-05T02:13:25.000Z</published>
    <updated>2023-07-13T00:45:27.296Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>周末的山塘令人望而却步。从新民桥下来，仿佛立马被卷入洪流，被熙熙攘攘的人群一直裹挟着向前向前。每个店门外都排着长队，每座石桥上都挤满了取景拍照的游人，每个巷口都盘踞着吃小吃的食客，连屋檐下的每一盏灯笼都有些咄咄逼人似的急于招徕。寄身其中，既不能像逛园林一样从容游览，也不像日常逛街买菜一般轻松自在。</p><span id="more"></span><p>水运被陆运取代以后，苏州繁荣了上千年的河网水道，恐怕只有山塘河靠近阊门这一段依旧忙碌。无论是朝宗阁前，还是御碑亭后，游船码头始终排着长龙。</p><p>朝宗阁码头放着一支大喇叭，开着大音量一直重复：“排队请分成两列，50元的排外侧，100元的排内侧。”特别烦人。我们还没有坐过游船，也不知100元的票能否直通虎丘，体验到完整的七里山塘？</p><p><a href="/tours/shantang-at-night/DSC3440.jpg" title="游船码头排队检票的长队" class="gallery-item"><img src="/tours/shantang-at-night/DSC3440.jpg" alt="游船码头排队检票的长队"><span class="image-caption">游船码头排队检票的长队</span></a><br><a href="/tours/shantang-at-night/DSC3455.jpg" title="人头攒动" class="gallery-item"><img src="/tours/shantang-at-night/DSC3455.jpg" alt="人头攒动"><span class="image-caption">人头攒动</span></a></p><p>从新民桥进山塘街，商会博物馆就在入口不远处。这里原是闽商所建的汀州会馆，苏州总商会的原址在何处，一时查找不到了，不过印象里艺圃倒也做过什么商会的会馆？</p><p>商业发达的地方，民众的物权意识会更早萌发，民间自治团体也更活跃。看展厅内容，自清末民初起，苏州的各种商会、民团、公社都发展迅速，等到红朝建政，就只能团结在红旗下全体起立鼓掌，庆祝公私合营罢了。</p><p><a href="/tours/shantang-at-night/DSC3441.jpg" title="苏州商会博物馆" class="gallery-item"><img src="/tours/shantang-at-night/DSC3441.jpg" alt="苏州商会博物馆"><span class="image-caption">苏州商会博物馆</span></a><br><a href="/tours/shantang-at-night/DSC3443.jpg" title="庭树灯影" class="gallery-item"><img src="/tours/shantang-at-night/DSC3443.jpg" alt="庭树灯影"><span class="image-caption">庭树灯影</span></a></p><p>苏州商号众多，不少民国时期的海报、商标设计都很优秀。</p><p><a href="/tours/shantang-at-night/DSC3442.jpg" title="金阊下塘桃坞市民公社浚河报告册" class="gallery-item"><img src="/tours/shantang-at-night/DSC3442.jpg" alt="金阊下塘桃坞市民公社浚河报告册"><span class="image-caption">金阊下塘桃坞市民公社浚河报告册</span></a><br><a href="/tours/shantang-at-night/DSC3444.jpg" title="民国的设计挺棒" class="gallery-item"><img src="/tours/shantang-at-night/DSC3444.jpg" alt="民国的设计挺棒"><span class="image-caption">民国的设计挺棒</span></a></p><p>从阊门桥右转，便能看到白傅祠宽大的门头，左书山塘始祖，右书乐府诗神。白公真可谓造福一方遗泽千年。</p><p><a href="/tours/shantang-at-night/DSC3459.jpg" title="唐少傅白公祠" class="gallery-item"><img src="/tours/shantang-at-night/DSC3459.jpg" alt="唐少傅白公祠"><span class="image-caption">唐少傅白公祠</span></a></p><p>白傅祠是免费景点，所以进门参观的游人不少。只不过里头远不如大门那么唬人，只有一重院落。穿过主殿，后面就是朝宗阁。</p><p>之前在北码头看到朝宗阁，陶小婧问我是什么地方？我说百鸟朝凤万法朝宗，既然是码头，那旧时的商人载货至此，就免不了上岸拜码头。周礼春官书云：<em>春见曰朝，夏见曰宗，秋见曰觐，冬见曰遇。</em> 客商远来，态度自须恭敬，然而码头上的大佬们飘飘然以朝宗自命，则不免有僭越的嫌疑。好在这些封建残余早已肃清，此处只剩山塘画舫之售票处了。</p><p>朝宗阁的匾额下面挂着寻根祭祖的牌子，也不知是什么操作？</p><p><a href="/tours/shantang-at-night/DSC3465.jpg" title="朝宗阁" class="gallery-item"><img src="/tours/shantang-at-night/DSC3465.jpg" alt="朝宗阁"><span class="image-caption">朝宗阁</span></a></p><p>山塘街无非是白墙黛瓦，画船流水，还有晚上挂起的灯笼。终年灯火鱼龙夜，盛世清明上河图。但最动人的故事往往发生在灯火阑珊处。</p><p><a href="/tours/shantang-at-night/DSC3466.jpg" class="gallery-item"><img src="/tours/shantang-at-night/DSC3466.jpg"></a><br><a href="/tours/shantang-at-night/DSC3478.jpg" class="gallery-item"><img src="/tours/shantang-at-night/DSC3478.jpg"></a><br><a href="/tours/shantang-at-night/DSC3480.jpg" class="gallery-item"><img src="/tours/shantang-at-night/DSC3480.jpg"></a><br><a href="/tours/shantang-at-night/DSC3458.jpg" class="gallery-item"><img src="/tours/shantang-at-night/DSC3458.jpg"></a></p><p>海市山塘的名字取得很妙，似乎暗示着这一场繁华，原不过是海市蜃楼，迷天幻境。商场内立着几十百面镜子，行走其中，一不留神就容易生出一种恍惚迷离之感。</p><p><a href="/tours/shantang-at-night/DSC3490.jpg" title="海市山塘" class="gallery-item"><img src="/tours/shantang-at-night/DSC3490.jpg" alt="海市山塘"><span class="image-caption">海市山塘</span></a></p><p>不过这套设计确实是极好的。</p><p><a href="/tours/shantang-at-night/DSC3485.jpg" class="gallery-item"><img src="/tours/shantang-at-night/DSC3485.jpg"></a><br><a href="/tours/shantang-at-night/DSC3486.jpg" class="gallery-item"><img src="/tours/shantang-at-night/DSC3486.jpg"></a></p><p>国内的文化旅游产业是日趋兴盛了，古镇仿佛也送上了工业大国的生产线，和别的商业地产一样，数年之间即遍布全国，而且还在不断炮制之中。</p><p>苏州的古镇当然自有它的底蕴，但这类面向大众的开放式步行街，商业结构总会慢慢向大众倾斜，注定要失去它的本来面目。而且人气越火爆，竞争压力就越大，经营成本越高，那些立足本地的小而精的东西就越是无法立足，最后变成我们熟悉的低成本快节奏的奶茶果汁小吃烧烤臭豆腐伴手礼。</p><p><a href="/tours/shantang-at-night/DSC3492.jpg" title="等待游客的黄包车" class="gallery-item"><img src="/tours/shantang-at-night/DSC3492.jpg" alt="等待游客的黄包车"><span class="image-caption">等待游客的黄包车</span></a></p><p>晚归之际，霓虹灯影不及笼罩的路侧，停着几辆等待客人光顾的黄包车，一位老车夫讷讷地坐在乘客的位置上，周身披着幽幽的黄色路灯。在一个经济还不够发达的环境里，那些古老的商业模式终将隐退，让位于更时髦更快捷的大众消费。老车夫退休以后，黄包车恐怕也将在山塘街头消失。</p><p>跨上灵活的 72V 电动车，我在晚风中驱动电门，向城北呼啸而去。</p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article-gallery&quot;&gt;&lt;p&gt;周末的山塘令人望而却步。从新民桥下来，仿佛立马被卷入洪流，被熙熙攘攘的人群一直裹挟着向前向前。每个店门外都排着长队，每座石桥上都挤满了取景拍照的游人，每个巷口都盘踞着吃小吃的食客，连屋檐下的每一盏灯笼都有些咄咄逼人似的急于招徕。寄身其中，既不能像逛园林一样从容游览，也不像日常逛街买菜一般轻松自在。&lt;/p&gt;</summary>
    
    
    
    <category term="游历" scheme="https://waxa.design/categories/tours/"/>
    
    
    <category term="苏州" scheme="https://waxa.design/tags/%E8%8B%8F%E5%B7%9E/"/>
    
    <category term="山塘街" scheme="https://waxa.design/tags/%E5%B1%B1%E5%A1%98%E8%A1%97/"/>
    
    <category term="夜游" scheme="https://waxa.design/tags/%E5%A4%9C%E6%B8%B8/"/>
    
  </entry>
  
  <entry>
    <title>曲园的菖蒲</title>
    <link href="https://waxa.design/tours/quyuan-and-calamus/"/>
    <id>https://waxa.design/tours/quyuan-and-calamus/</id>
    <published>2023-06-04T07:31:52.000Z</published>
    <updated>2023-07-17T01:39:06.599Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>曲园这周有个菖蒲展。失业在家，终日都是闲暇，就骑上小电驴载着陶小婧进了城。</p><p>菖蒲自然趁着端午的时令，虽然今年过节颇有些迟。小时候过节，除了粽子，家里还要做咸鸭蛋、茶叶蛋和蒸发糕，有几年还蒸过蒜头。蒜头是成捆蒸的，不知别处有没有这样的吃法。起锅，端上桌，就着腾腾热气剥开蒜皮，辛香扑鼻。蒜子是秀润的白色，入口辣中带甜，并不像配菜的蒜泥那般呛人，只是不知道后来为何不太做了。</p><p>咸鸭蛋是小朋友的最爱，他们倒不是为了吃，而是拿去碰。通常先在盆里翻检一遍，取蛋形长而锐者，握在掌心，掂一掂分量，再举到透光处，仔细观察内部有没有多余的气孔，总之要紧实沉手。选好了，一溜烟奔到屋场，遇到别的小朋友，两边叫阵，各自撸起袖子亮出鸭蛋，定要来一番比试较量。这时免不了群众围观，几个小脑瓜团团围住，中间两位选手凝神屏气，蓄力待发。鸭蛋的两头自是有尖有圆，将咸鸭蛋攥在手心，只露尖头，防止被狡黠的对手从侧面击破。蓦地一声稚叱，好似天雷交地火，火星撞地球，啪的一声，刹那间胜负已分。观者尚未分明，胜者已经欢欣踊跃，气势高扬挑选下一个对手，败者则垂头丧气，默默将破掉的咸鸭蛋剥了壳含泪吞下。</p><p>端午一早晨，大人就会在大门两侧的竹筒内插上菖蒲和艾叶 <em>（艾叶本地又唤作蕲艾）</em>。当时只晓得包粽子的是粽叶，并不知道这透着夏日清香的修长的叶子叫菖蒲。</p><span id="more"></span><p>到了高中，看浪客剑心的漫画，后来又看了追忆篇的 OVA。追忆篇里，小萩屋的老板娘对巴说：“<em>雨中的菖蒲是最香的，在太阳底下味道就隐藏起来了。</em>”</p><p>后来又说：“<em>菖蒲花，是雨中最香的花，即使是血雨腥风中。</em>”</p><p>这几句形容菖蒲花的台词，和追忆篇一道给我留下了极深的印象 <em>（当然还有沉郁悱恻的 OST，个人心中的动漫史最高杰作之一）</em>。</p><p><a href="/tours/quyuan-and-calamus/image-20230604144702408.jpeg" title="追忆篇中的菖蒲花" class="gallery-item"><img src="/tours/quyuan-and-calamus/image-20230604144702408.jpeg" alt="追忆篇中的菖蒲花"><span class="image-caption">追忆篇中的菖蒲花</span></a></p><p>只是真正的菖蒲花，我却至今没有见过。所以一听陶小婧说曲园有菖蒲展出，自然是颇饶兴味，说走就走。</p><p>到曲园停好车，一进大门，就看到醒目的展览主题：清风高洁，2023曲园菖蒲艺术展——暨市级机关政德专题教育活动，隐隐觉得有些不妙。</p><p>乐知堂内人头涌动，想必都是组团前来打卡的公务员，保安在旁维持秩序，只听他不停劝导：“不能摸呀，这个不好摸的呀。”我凑近去一看，才发现里面展出的是一盆盆极细小的水草，和形状各异的小巧太湖石摆在一起，作为盆景放在台案上。</p><p><a href="/tours/quyuan-and-calamus/DSC3285.jpg" title="石菖蒲" class="gallery-item"><img src="/tours/quyuan-and-calamus/DSC3285.jpg" alt="石菖蒲"><span class="image-caption">石菖蒲</span></a></p><p><a href="/tours/quyuan-and-calamus/DSC3276.jpg" title="石菖蒲" class="gallery-item"><img src="/tours/quyuan-and-calamus/DSC3276.jpg" alt="石菖蒲"><span class="image-caption">石菖蒲</span></a><br><a href="/tours/quyuan-and-calamus/DSC3277.jpg" title="石菖蒲" class="gallery-item"><img src="/tours/quyuan-and-calamus/DSC3277.jpg" alt="石菖蒲"><span class="image-caption">石菖蒲</span></a></p><p>既非童年记忆里的菖蒲叶子，期待的菖蒲花也踪影全无，心中失望，差点掉头就走。</p><p>后来回家仔细研究，才知道这是菖蒲科菖蒲属的石菖蒲，自古是风雅之士赏玩的案头清供。又叫金钱蒲，足见君子爱财之本意。</p><p>端午节与艾叶一起挂在门上辟邪的叶子，则是天南星科菖蒲属的菖蒲，它也会开花，但小小一朵，呈黄绿色，极不起眼，也难怪我毫无印象。菖蒲会在秋天结出红色的浆果，小时候倒是经常在田里或是沟边见到，只是全然不知那是菖蒲的果子。</p><p>而此行本欲一睹芳容的紫色菖蒲花，又别是一种，叫做唐菖蒲，是鸢尾科唐菖蒲属，原产于非洲好望角，国内亦有广泛栽培。唐菖蒲是杂交品种，花色繁多，并不限于紫色，但因为不野生，所以上世纪末的乡下老家自然无缘得见。</p><p>至此算是了然了，这三者除了名字相近，都叫菖蒲，生物学意义上本来就没有多大关联 。如果博闻强识，号人肉百科全书如肥猫者，定无此厄，然而我不学无术，自然免不了乘兴而来落寞而归。</p><hr><p>曲园是第二次来，上次来还是<a href="/tours/2020-suzhou/#%E6%9B%B2%E5%9B%AD">三年前</a> <em>（也许是第三次，因为那次已说是重游，只不过更早的一次，我已经没什么印象了，也没有留下文字或照片）</em>。曲园没有大变，倒是自己的生活天翻地覆，从此地的游客变成了居民，抚今追昔，不无沧桑陵谷之思。</p><p><a href="/tours/quyuan-and-calamus/DSC3358.jpg" title="前厅画像" class="gallery-item"><img src="/tours/quyuan-and-calamus/DSC3358.jpg" alt="前厅画像"><span class="image-caption">前厅画像</span></a></p><p>停车靠近侧门，侧门向来是锁闭的，门上贴的春联尚未褪色：</p><blockquote><p>新元肇启开泰运<br>前兔似锦呈吉祥</p></blockquote><p>今年的春节过得略草草，一读才反应过来已是兔年。游到后院，办公室的窗玻璃上也贴着兔年的贴纸，颇为可爱。若按旧俗，虎年的小朋友都十三岁了。真可谓年与时驰，意与日去，接下来可不能悲守穷庐，否则就真变成多不接世，遂成枯落了。</p><p><a href="/tours/quyuan-and-calamus/DSC3251.jpg" title="兔年春联" class="gallery-item"><img src="/tours/quyuan-and-calamus/DSC3251.jpg" alt="兔年春联"><span class="image-caption">兔年春联</span></a><br><a href="/tours/quyuan-and-calamus/DSC3326.jpg" title="窗户上兔年的贴纸" class="gallery-item"><img src="/tours/quyuan-and-calamus/DSC3326.jpg" alt="窗户上兔年的贴纸"><span class="image-caption">窗户上兔年的贴纸</span></a></p><p>在苏州，曲园只是个不见经传的小园子，游客不多，又不收门票，虽然不像艺圃的延光阁一样每天茶客满座，后院亦尽有二三长者，或盘桓屋檐下，或逍遥水池边，从容闲坐，谈天品茗，于小小院落之中各占浮生半日闲，倒显得拍完照就走的我有些匆忙了。</p><p><a href="/tours/quyuan-and-calamus/DSC3352.jpg" title="树荫下聊天的阿姨" class="gallery-item"><img src="/tours/quyuan-and-calamus/DSC3352.jpg" alt="树荫下聊天的阿姨"><span class="image-caption">树荫下聊天的阿姨</span></a></p><p>小竹里馆清幽不减，石榴花也开得极好。蔷薇倒差不多都谢了，只剩认春轩前数朵。</p><p><a href="/tours/quyuan-and-calamus/DSC3377.jpg" title="小竹里馆" class="gallery-item"><img src="/tours/quyuan-and-calamus/DSC3377.jpg" alt="小竹里馆"><span class="image-caption">小竹里馆</span></a><br><a href="/tours/quyuan-and-calamus/DSC3329.jpg" title="石榴花" class="gallery-item"><img src="/tours/quyuan-and-calamus/DSC3329.jpg" alt="石榴花"><span class="image-caption">石榴花</span></a><br><a href="/tours/quyuan-and-calamus/DSC3299.jpg" title="蔷薇" class="gallery-item"><img src="/tours/quyuan-and-calamus/DSC3299.jpg" alt="蔷薇"><span class="image-caption">蔷薇</span></a></p><p>池中锦鲤可百许头，比前几天在耦园看到的多而且活泼。这些鱼也很爱聚众的样子，时东时西，总是抱团游走。</p><p><a href="/tours/quyuan-and-calamus/DSC3350.jpg" title="池鱼" class="gallery-item"><img src="/tours/quyuan-and-calamus/DSC3350.jpg" alt="池鱼"><span class="image-caption">池鱼</span></a></p><p>又在后院刻石上曲园老人的自制印，方圆并济，立意极佳，比例极协调。曲园老人如果生活在当代，想必也足以成为一个了不起的设计师吧？</p><p><a href="/tours/quyuan-and-calamus/DSC3323.jpg" title="曲园" class="gallery-item"><img src="/tours/quyuan-and-calamus/DSC3323.jpg" alt="曲园"><span class="image-caption">曲园</span></a></p><p>最后是陶小婧压轴出场。</p><p><a href="/tours/quyuan-and-calamus/DSC3360.jpg" title="在乐知堂前" class="gallery-item"><img src="/tours/quyuan-and-calamus/DSC3360.jpg" alt="在乐知堂前"><span class="image-caption">在乐知堂前</span></a><br><a href="/tours/quyuan-and-calamus/DSC3331.jpg" title="陶小婧在曲园" class="gallery-item"><img src="/tours/quyuan-and-calamus/DSC3331.jpg" alt="陶小婧在曲园"><span class="image-caption">陶小婧在曲园</span></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article-gallery&quot;&gt;&lt;p&gt;曲园这周有个菖蒲展。失业在家，终日都是闲暇，就骑上小电驴载着陶小婧进了城。&lt;/p&gt;
&lt;p&gt;菖蒲自然趁着端午的时令，虽然今年过节颇有些迟。小时候过节，除了粽子，家里还要做咸鸭蛋、茶叶蛋和蒸发糕，有几年还蒸过蒜头。蒜头是成捆蒸的，不知别处有没有这样的吃法。起锅，端上桌，就着腾腾热气剥开蒜皮，辛香扑鼻。蒜子是秀润的白色，入口辣中带甜，并不像配菜的蒜泥那般呛人，只是不知道后来为何不太做了。&lt;/p&gt;
&lt;p&gt;咸鸭蛋是小朋友的最爱，他们倒不是为了吃，而是拿去碰。通常先在盆里翻检一遍，取蛋形长而锐者，握在掌心，掂一掂分量，再举到透光处，仔细观察内部有没有多余的气孔，总之要紧实沉手。选好了，一溜烟奔到屋场，遇到别的小朋友，两边叫阵，各自撸起袖子亮出鸭蛋，定要来一番比试较量。这时免不了群众围观，几个小脑瓜团团围住，中间两位选手凝神屏气，蓄力待发。鸭蛋的两头自是有尖有圆，将咸鸭蛋攥在手心，只露尖头，防止被狡黠的对手从侧面击破。蓦地一声稚叱，好似天雷交地火，火星撞地球，啪的一声，刹那间胜负已分。观者尚未分明，胜者已经欢欣踊跃，气势高扬挑选下一个对手，败者则垂头丧气，默默将破掉的咸鸭蛋剥了壳含泪吞下。&lt;/p&gt;
&lt;p&gt;端午一早晨，大人就会在大门两侧的竹筒内插上菖蒲和艾叶 &lt;em&gt;（艾叶本地又唤作蕲艾）&lt;/em&gt;。当时只晓得包粽子的是粽叶，并不知道这透着夏日清香的修长的叶子叫菖蒲。&lt;/p&gt;</summary>
    
    
    
    <category term="游历" scheme="https://waxa.design/categories/tours/"/>
    
    
    <category term="苏州" scheme="https://waxa.design/tags/%E8%8B%8F%E5%B7%9E/"/>
    
    <category term="园林" scheme="https://waxa.design/tags/%E5%9B%AD%E6%9E%97/"/>
    
    <category term="曲园" scheme="https://waxa.design/tags/%E6%9B%B2%E5%9B%AD/"/>
    
    <category term="菖蒲" scheme="https://waxa.design/tags/%E8%8F%96%E8%92%B2/"/>
    
  </entry>
  
  <entry>
    <title>相城基督堂</title>
    <link href="https://waxa.design/blog/xiangcheng-christ-church/"/>
    <id>https://waxa.design/blog/xiangcheng-christ-church/</id>
    <published>2023-06-02T00:00:00.000Z</published>
    <updated>2023-07-13T00:48:30.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>散步路过相城基督堂，时值黄昏，教堂方正的轮廓和屋顶的十字架在黯淡的半空中黝黑如铸铁。于路口小伫，晚风颇有些萧瑟，成群的蚊虫在一旁忙碌而自在地嗡嗡盘旋着，不远处是虎丘湿地公园未开发的荒凉草甸，路面上不时有大货车轰隆而来扬尘而去。一时间有些茫然自失，有句话冷不丁在脑中响起：神啊，救救这世人。</p><p>然后反应过来，自己既不信神，世人也无需拯救，一笑遂去。</p><p><a href="/blog/xiangcheng-christ-church/DSC3221.jpg" title="相城基督堂" class="gallery-item"><img src="/blog/xiangcheng-christ-church/DSC3221.jpg" alt="相城基督堂"><span class="image-caption">相城基督堂</span></a></p><span id="more"></span><p><a href="/blog/xiangcheng-christ-church/DSC3209.jpg" title="虎丘湿地公园一角" class="gallery-item"><img src="/blog/xiangcheng-christ-church/DSC3209.jpg" alt="虎丘湿地公园一角"><span class="image-caption">虎丘湿地公园一角</span></a></p><p>虎丘湿地公园占地面积怕是有半个苏州城那么大了，一直无缘游赏。今天路过才发现，这地方要全部开发完恐怕还尚需时日，风吹草低，茫茫无际，只欠晚归的牛羊。</p><p>湿地公园边的一条小路上，搭满了长条形的箱式临时房屋，聚居着在此施工的民工与工程相关人员。差不多是晚饭时间了，十几辆三轮车凑成一个临时的廉价市集，大多挂着黄色的白炽灯，供应简餐盒饭与各色熟食，甚至有一辆提供理发服务的小巴士。此地的居民纷纷出动，在这荒废且蓬勃的草甸边缘，倒也自成一番热闹的景象。</p><p><a href="/blog/xiangcheng-christ-church/DSC3210.jpg" title="某条小路" class="gallery-item"><img src="/blog/xiangcheng-christ-church/DSC3210.jpg" alt="某条小路"><span class="image-caption">某条小路</span></a></p><p>又记，生活在南方，夏天的蚊虫就无可避免。陶小婧每次出门，总不免被叮出满身的包。而非敏感体质的我，顶多也就是几个淡淡的红点而已，令她颇为嫉妒。</p><p>今天更是搞笑，两个虎口外侧各被咬出一个大包，完全对称，看来也有恪守审美之道的讲究蚊子。人要吃饭，蚊子就要吸血，大家都只能遵从自然法则讨生活，Respect。</p><p><a href="/blog/xiangcheng-christ-church/DSC3205.jpg" title="两只手叮出来两个对称的包" class="gallery-item"><img src="/blog/xiangcheng-christ-church/DSC3205.jpg" alt="两只手叮出来两个对称的包"><span class="image-caption">两只手叮出来两个对称的包</span></a></p><p>又，在河边看到两只水鸟，高额红喙，羽毛全黑，惟两翅有白色，一前一后，悠游水面。后来走入荷叶从中，或相逐嬉戏，或低头啄食。回家搜索资料，原来叫<a href="https://baike.baidu.com/item/%E9%BB%91%E6%B0%B4%E9%B8%A1/4524074">黑水鸡</a>，是鹤形目秧鸡科水鸡属，倒是从前所不知道的新物种。</p><p><a href="/blog/xiangcheng-christ-church/DSC3201.jpg" title="荷叶中的黑水鸡" class="gallery-item"><img src="/blog/xiangcheng-christ-church/DSC3201.jpg" alt="荷叶中的黑水鸡"><span class="image-caption">荷叶中的黑水鸡</span></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article-gallery&quot;&gt;&lt;p&gt;散步路过相城基督堂，时值黄昏，教堂方正的轮廓和屋顶的十字架在黯淡的半空中黝黑如铸铁。于路口小伫，晚风颇有些萧瑟，成群的蚊虫在一旁忙碌而自在地嗡嗡盘旋着，不远处是虎丘湿地公园未开发的荒凉草甸，路面上不时有大货车轰隆而来扬尘而去。一时间有些茫然自失，有句话冷不丁在脑中响起：神啊，救救这世人。&lt;/p&gt;
&lt;p&gt;然后反应过来，自己既不信神，世人也无需拯救，一笑遂去。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/blog/xiangcheng-christ-church/DSC3221.jpg&quot; title=&quot;相城基督堂&quot; class=&quot;gallery-item&quot;&gt;&lt;img src=&quot;/blog/xiangcheng-christ-church/DSC3221.jpg&quot; alt=&quot;相城基督堂&quot;&gt;&lt;/a&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="日常" scheme="https://waxa.design/categories/blog/"/>
    
    
    <category term="苏州" scheme="https://waxa.design/tags/%E8%8B%8F%E5%B7%9E/"/>
    
    <category term="公园" scheme="https://waxa.design/tags/%E5%85%AC%E5%9B%AD/"/>
    
    <category term="虎丘湿地公园" scheme="https://waxa.design/tags/%E8%99%8E%E4%B8%98%E6%B9%BF%E5%9C%B0%E5%85%AC%E5%9B%AD/"/>
    
    <category term="教堂" scheme="https://waxa.design/tags/%E6%95%99%E5%A0%82/"/>
    
  </entry>
  
  <entry>
    <title>用 Synology Drive 同步 Obsidian 仓库</title>
    <link href="https://waxa.design/playground/apps/obsidian-sync-with-synology-drive/"/>
    <id>https://waxa.design/playground/apps/obsidian-sync-with-synology-drive/</id>
    <published>2023-05-31T11:36:27.000Z</published>
    <updated>2023-07-15T07:10:58.000Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>转用 Hexo 以后，在桌面端更新是没问题了，但如果出门在外，又希望分享一些东西，能否做到呢？</p><p>我平时都用 Obsidian 来写 Markdown，在 <a href="/playground/web/hexo-and-new-blog/">Hexo 的安装与配置</a> 一文中，我介绍了如何配置 Obsidian 与 Hexo 无缝协作。Obsidian 也有移动端 App，所以这两天就想，能否通过网盘同步 Obsidian 的仓库，随时随地写 Hexo 里面的 Markdown 呢？</p><span id="more"></span><p>同时为了开源节流，如果目标能通过 NAS 搞定，就尽量不使用云服务。我家的 NAS 装的是 Unraid，同时也通过虚拟机装了群晖。最近因为 OneDrive 被墙，所以一直考虑逐步用 Synology Drive 作为替代。既然如此，不如就先试试能否用 Synology Drive 来同步 Obsidian 仓库。</p><h2 id="Synology-Drive-服务器端"><a href="#Synology-Drive-服务器端" class="headerlink" title="Synology Drive 服务器端"></a>Synology Drive 服务器端</h2><p>打开 Synology Drive 管理控制台，在团队文件夹里启用 Hexo 所在的 <code>web</code> 文件夹。</p><p><a href="/playground/apps/obsidian-sync-with-synology-drive/image-20230605073051037.png" title="Synology Drive 服务器端配置" class="gallery-item"><img src="/playground/apps/obsidian-sync-with-synology-drive/image-20230605073051037.png" alt="Synology Drive 服务器端配置"><span class="image-caption">Synology Drive 服务器端配置</span></a></p><p>不过团队文件夹只能选择根目录下面的文件夹，不能直接定位至 Markdown 文档所在的 <code>/web/Hexo/source</code>，略有遗憾。</p><h2 id="Synology-Drive-手机端"><a href="#Synology-Drive-手机端" class="headerlink" title="Synology Drive 手机端"></a>Synology Drive 手机端</h2><p>服务器端的配置就到此为止，接下来下载移动端的 Synology Drive。</p><p>我用的是 Android 手机，App 怎么下载不赘述。打开 App，登录到自家的群晖，进入主界面，从下方的主菜单转到“<strong>更多</strong>”。</p><p><a href="/playground/apps/obsidian-sync-with-synology-drive/synology-drive-settings.png" class="gallery-item"><img src="/playground/apps/obsidian-sync-with-synology-drive/synology-drive-settings.png"></a></p><p>然后点击“备份和同步任务”，里面只有两个选项，一个是“照片备份”，群晖用户备份照片肯定用 Synology Photos，这里略过就好。另外一个是“同步任务”：</p><p><a href="/playground/apps/obsidian-sync-with-synology-drive/bcc97caa90e8e04bfa21ba54643d15a.jpg" title="备份和同步任务" class="gallery-item"><img src="/playground/apps/obsidian-sync-with-synology-drive/bcc97caa90e8e04bfa21ba54643d15a.jpg" alt="备份和同步任务"><span class="image-caption">备份和同步任务</span></a></p><p>点击同步任务，初次打开列表自然是空白的，直接点击右上角的加号，开始创建任务：</p><p><a href="/724ab0f60709fefb8416589d9747982.jpg" title="创建同步任务" class="gallery-item"><img src="/724ab0f60709fefb8416589d9747982.jpg" alt="创建同步任务"><span class="image-caption">创建同步任务</span></a></p><p>我们逐个设置界面上的各种选项：</p><ol><li><strong>服务器上的远程路径</strong>，就是我们之前在服务器上指定的 <code>Hexo/source</code> 文件夹；</li><li><strong>本地路径</strong>，Synology Drive 会提示“<em>请先允许 Drive 访问文件夹</em>”，点击确定；<br><a href="/15242e4fec999c6c7bea0bd07717729.jpg" title="文件夹权限提示" class="gallery-item"><img src="/15242e4fec999c6c7bea0bd07717729.jpg" alt="文件夹权限提示"><span class="image-caption">文件夹权限提示</span></a><br>我们在文件管理器的根目录先新建一个 <code>Hexo</code> 目录，然后在其中再建一个 <code>source</code> 文件夹，这样就与服务器端对应上了；</li><li><strong>模式</strong>一般选择“<strong>双向</strong>”，如果手机上只限于收集和记录灵感，正式的文章留到电脑上再编辑，那选择“<strong>仅上传</strong>”也 OK，需要同步的数据会小很多；</li><li>其他的保持默认即可，也可以根据自身偏好自行配置。</li></ol><p>最后点击右上角的“<strong>完成</strong>”，回到同步任务界面，应该会看到当前的任务已经在同步了。</p><p><a href="/playground/apps/obsidian-sync-with-synology-drive/sycn-tasks.png" title="任务同步中" class="gallery-item"><img src="/playground/apps/obsidian-sync-with-synology-drive/sycn-tasks.png" alt="任务同步中"><span class="image-caption">任务同步中</span></a><br>打开系统文件管理器，找到 <code>Hexo/source</code> 文件夹，确认无误，Synology Drive 客户端的配置就完成了。</p><h2 id="Obsidian-的配置"><a href="#Obsidian-的配置" class="headerlink" title="Obsidian 的配置"></a>Obsidian 的配置</h2><p>同样，先安装 Obsidian App，进入主界面。Obsidian 并不会根据系统语言自动配置界面语言，我们稍后再设置。</p><p><a href="/playground/apps/obsidian-sync-with-synology-drive/bcee00f2d01f74c79954d1642d9022e.jpg" title="Obisidian 主界面" class="gallery-item"><img src="/playground/apps/obsidian-sync-with-synology-drive/bcee00f2d01f74c79954d1642d9022e.jpg" alt="Obisidian 主界面"><span class="image-caption">Obisidian 主界面</span></a></p><p>点击主界面上的 <code>Open folder as vault</code>，找到我们之前同步的 <code>Hexo/source</code> 文件夹，选择底部的“<strong>使用此文件夹</strong>”：</p><p><a href="/playground/apps/obsidian-sync-with-synology-drive/edb4513f05000f3c2feaca8abac6f90.jpg" title="使用此文件夹" class="gallery-item"><img src="/playground/apps/obsidian-sync-with-synology-drive/edb4513f05000f3c2feaca8abac6f90.jpg" alt="使用此文件夹"><span class="image-caption">使用此文件夹</span></a></p><p>然后就可以将这个文件夹作为 Obsidian 仓库使用了，打开其中的一个 Markdown 文档 试试：</p><p><a href="/playground/apps/obsidian-sync-with-synology-drive/b668b16e0c90090e71749aaf9469943.jpg" title="Markdown 编辑界面" class="gallery-item"><img src="/playground/apps/obsidian-sync-with-synology-drive/b668b16e0c90090e71749aaf9469943.jpg" alt="Markdown 编辑界面"><span class="image-caption">Markdown 编辑界面</span></a></p><p>Bingo！</p><p>最后我们手动配置一下界面语言。</p><p>点击右上角的仓库图标，从左侧滑出主菜单，点齿轮图标进入设置界面。选择 <code>About</code>，第二项 <code>Language</code> 找到简体中文，然后 <strong>Relaunch</strong> 重启，就是中文界面了。</p><p><a href="/playground/apps/obsidian-sync-with-synology-drive/4c13d472221af160f87077403730a06.jpg" title="配置中文界面" class="gallery-item"><img src="/playground/apps/obsidian-sync-with-synology-drive/4c13d472221af160f87077403730a06.jpg" alt="配置中文界面"><span class="image-caption">配置中文界面</span></a></p><p>至此目标全部达成，撒花~</p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article-gallery&quot;&gt;&lt;p&gt;转用 Hexo 以后，在桌面端更新是没问题了，但如果出门在外，又希望分享一些东西，能否做到呢？&lt;/p&gt;
&lt;p&gt;我平时都用 Obsidian 来写 Markdown，在 &lt;a href=&quot;/playground/web/hexo-and-new-blog/&quot;&gt;Hexo 的安装与配置&lt;/a&gt; 一文中，我介绍了如何配置 Obsidian 与 Hexo 无缝协作。Obsidian 也有移动端 App，所以这两天就想，能否通过网盘同步 Obsidian 的仓库，随时随地写 Hexo 里面的 Markdown 呢？&lt;/p&gt;</summary>
    
    
    
    <category term="玩艺" scheme="https://waxa.design/categories/playground/"/>
    
    <category term="软件" scheme="https://waxa.design/categories/playground/apps/"/>
    
    
    <category term="Obsidian" scheme="https://waxa.design/tags/Obsidian/"/>
    
    <category term="Synology Drive" scheme="https://waxa.design/tags/Synology-Drive/"/>
    
    <category term="NAS" scheme="https://waxa.design/tags/NAS/"/>
    
  </entry>
  
  <entry>
    <title>耦园初夏</title>
    <link href="https://waxa.design/tours/ouyuan-in-summer/"/>
    <id>https://waxa.design/tours/ouyuan-in-summer/</id>
    <published>2023-05-30T02:31:15.000Z</published>
    <updated>2023-07-19T03:59:35.649Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>今天去了一趟耦园。</p><p>最近的天气神鬼莫测。昨天看到一张高温地图，各区县都已经三十五度上下了，然而只要一场阵雨，就立马炎凉变易，回到二十来度。我们十点左右出了门，昨晚大概下了雨，墙角树荫的水晕尚未全然褪去。日头迟迟不露面，晴雨有待分明，但骑着电动车两肋生风，无曝晒之苦，倒是颇为快意。</p><p>周二是工作日，但人并不少，着实有些意外。大概是因为一直和美满爱情神仙眷侣绑定宣传（<em>婚姻登记处都大张旗鼓进驻了，有关部门确实不遗余力</em>），又靠近平江路，距拙政园也就一刻钟的脚程，所以在几大名园之外，耦园的人气也算拔尖了。</p><span id="more"></span><p>五月六月之交，荷花盛放以前，可赏的花不多。检票过闸，平泉小隐门口摆着几盆蓝色海棠，中间围着似花非花的红色盆栽，倒好像是深圳街头常年开放的簕杜鹃，又叫叶子花的。仔细端详，倒真是它。顾名思义，那些红到索尼相机饱和度都会溢出的花瓣，其实都只是叶子的伪装，中间那细米粒一般大小的浅浅的骨朵儿，才是叶子花本花。</p><p><a href="/tours/ouyuan-in-summer/DSC2175-%E7%9C%8B%E6%9C%B1%E6%88%90%E7%A2%A7.jpg" title="看朱成碧" class="gallery-item"><img src="/tours/ouyuan-in-summer/DSC2175-%E7%9C%8B%E6%9C%B1%E6%88%90%E7%A2%A7.jpg" alt="看朱成碧"><span class="image-caption">看朱成碧</span></a></p><p>二十四番花信风，这一番的花信迟迟不来，管理员为了增色，把叶子花请来充数，我是不以为然的。</p><p>花季游园，如入华宴，枝枝朵朵前后左右招摇荡漾，令人目眩神迷。初夏却是反过来的，大部分时间都无所事事，然后才是那些不期然的邂逅，角落里滋生的青苔，在假山石根下微微颤动的小小的铜钱草，长廊转角吹来大芭蕉叶扇起的凉风。连路面上被时光打磨圆润的石头，此时也比冬天的颜色更深沉内敛，微带潮意。</p><p><a href="/tours/ouyuan-in-summer/DSC2286-%E6%A1%83%E5%B1%BF%E7%9F%B3%E6%A0%B9%E6%B6%A6%EF%BC%8C%E9%93%9C%E9%92%B1%E8%8D%89%E8%84%9A%E8%BD%BB%E3%80%82.jpg" title="桃屿石根润，铜钱草脚轻。" class="gallery-item"><img src="/tours/ouyuan-in-summer/DSC2286-%E6%A1%83%E5%B1%BF%E7%9F%B3%E6%A0%B9%E6%B6%A6%EF%BC%8C%E9%93%9C%E9%92%B1%E8%8D%89%E8%84%9A%E8%BD%BB%E3%80%82.jpg" alt="桃屿石根润，铜钱草脚轻。"><span class="image-caption">桃屿石根润，铜钱草脚轻。</span></a></p><p><a href="/tours/ouyuan-in-summer/DSC2291-%E4%BA%A4%E6%AA%90%E5%8F%A0%E5%A3%81.jpg" title="交檐叠壁" class="gallery-item"><img src="/tours/ouyuan-in-summer/DSC2291-%E4%BA%A4%E6%AA%90%E5%8F%A0%E5%A3%81.jpg" alt="交檐叠壁"><span class="image-caption">交檐叠壁</span></a></p><p>园内人不少，但真正的游人不多，摄影师随行跟拍的倒占了大头，乃至几乎每个院子都能碰到一拨。拍婚纱的自然不少，盛装入园的汉服姑娘也日见繁多，自拍与跟拍各半，偶尔还能碰到做直播的。</p><p>无俗韵轩南边有个院子，规模颇大，通往出口。月洞门外栽着几树芭蕉，一旁支起了衣架，挂满各种款式的旗袍，大概是专业的商拍团队在此取景。女模特明眸皓齿，仪态和笑容都无可挑剔。我们游东园，恰从此门经过，冷不丁撞见门外一美女就地更衣，从肩头解开盘扣直褪到脚踝，然后助手立马递过要换的款式套上。模特面不改色一气呵成，反倒是我这个路人着实吓了一跳。好在里面还穿着肉色的比基尼，并非裸体，否则这么大摇大摆走过去就太唐突了。非礼勿视之余，暗自赞叹，职业模特的觉悟实非常人可比。</p><p>但专门拍照的太多，游园不免受影响。宛虹杠上一位阿姨正举着手机自拍，然后就从池塘对面的山水间传来一声叫唤：“麻烦让一让好吗？”阿姨只好放下手机离开。大家买的都的一样的门票，借园林搞自己的商业活动反而有特权了么？</p><p><a href="/tours/ouyuan-in-summer/DSC2238-%E5%AE%9B%E8%99%B9%E6%A1%A5%E4%B8%8A.jpg" title="陶小婧在宛虹杠" class="gallery-item"><img src="/tours/ouyuan-in-summer/DSC2238-%E5%AE%9B%E8%99%B9%E6%A1%A5%E4%B8%8A.jpg" alt="陶小婧在宛虹杠"><span class="image-caption">陶小婧在宛虹杠</span></a></p><p><a href="/tours/ouyuan-in-summer/DSC2216-%E4%B8%9C%E8%8A%B1%E5%9B%AD%E6%A0%91%E8%8D%AB%E4%B8%8B.jpg" class="gallery-item"><img src="/tours/ouyuan-in-summer/DSC2216-%E4%B8%9C%E8%8A%B1%E5%9B%AD%E6%A0%91%E8%8D%AB%E4%B8%8B.jpg"></a></p><p><a href="/tours/ouyuan-in-summer/DSC2221-%E5%AE%89%E4%B9%90%E5%9B%BD.jpg" title="安乐国放置的茶具" class="gallery-item"><img src="/tours/ouyuan-in-summer/DSC2221-%E5%AE%89%E4%B9%90%E5%9B%BD.jpg" alt="安乐国放置的茶具"><span class="image-caption">安乐国放置的茶具</span></a></p><p><a href="/tours/ouyuan-in-summer/DSC2243-%E6%B1%A0%E4%B8%AD%E9%94%A6%E9%B2%A4%E7%BF%A9%E7%84%B6.jpg" title="池中锦鲤翩然" class="gallery-item"><img src="/tours/ouyuan-in-summer/DSC2243-%E6%B1%A0%E4%B8%AD%E9%94%A6%E9%B2%A4%E7%BF%A9%E7%84%B6.jpg" alt="池中锦鲤翩然"><span class="image-caption">池中锦鲤翩然</span></a></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">桃屿石根润，铜钱草脚轻。</summary>
    
    
    
    <category term="游历" scheme="https://waxa.design/categories/tours/"/>
    
    
    <category term="苏州" scheme="https://waxa.design/tags/%E8%8B%8F%E5%B7%9E/"/>
    
    <category term="耦园" scheme="https://waxa.design/tags/%E8%80%A6%E5%9B%AD/"/>
    
    <category term="园林" scheme="https://waxa.design/tags/%E5%9B%AD%E6%9E%97/"/>
    
  </entry>
  
  <entry>
    <title>Hexo 的主题定制</title>
    <link href="https://waxa.design/playground/web/hexo-theme-minos/"/>
    <id>https://waxa.design/playground/web/hexo-theme-minos/</id>
    <published>2023-05-28T13:36:07.000Z</published>
    <updated>2023-07-13T10:44:40.328Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>Hexo 的主题生态非常贫乏，官方的主题列表看起来有几十页，但其实都是极少数几个主题（如 <a href="https://theme-next.js.org/">Next</a>）的变体，所以颇有些千篇一律。个人不太喜欢 Next 这种太典型的博客风格，让我一种梦回十几年前，博客大爆发时期的错觉。</p><p>我确实懂一些 CSS&#x2F;SCSS，但 Node.js 就一无所知了，要根据 Hexo 的官方文档手撸初一个全新主题出来，肯定吃力不讨好。总之，找了一圈，最后选定了 <a href="http://ppoffice.github.io/hexo-theme-minos/">Minos</a> 作为基础，来日方长，一步一步改造吧。</p><span id="more"></span><h2 id="hexo-renderer-sass-安装问题"><a href="#hexo-renderer-sass-安装问题" class="headerlink" title="hexo-renderer-sass 安装问题"></a>hexo-renderer-sass 安装问题</h2><p>不过 Minos 倒是给了我一个下马威。刚切换过来，提示需要安装 hexo-renderer-sass，但试过了才发现，这个 hexo-renderer-sass 压根就是装不上的。</p><p>一开始我尝试了好几种办法，包括但不限于给系统安装 Python 2，更新 request 和 tar，搜索 <code>ERR code 1</code> 是怎么回事，都没辙。最后找到这篇：<a href="https://sobaigu.com/hexo-renderer-sass-error.html">解决 hexo-renderer-sass 无法安装</a>，才最终搞定。</p><p>原因倒是很简单，hexo-renderer-sass 上一次更新还在 2018 年，属于退版本的状态。我们可以用 hexo-renderer-sass-next 替代它：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-renderer-sass  </span><br><span class="line">npm i --save hexo-renderer-sass-next</span><br></pre></td></tr></table></figure><p>然后打开 <code>/themes/minos/scripts/01_check.js</code>，搜索 <code>hexo-renderer-sass</code>，将其替换为 <code>hexo-renderer-sass-next</code>。重新渲染 Hexo，成功。</p><h2 id="中文字体"><a href="#中文字体" class="headerlink" title="中文字体"></a>中文字体</h2><p>从 Wordpress 某个版本开始，我就参考 <a href="https://github.com/zenozeng/fonts.css">Fonts.css</a> 来配置中文字体了。该方案跨平台，不需要外挂 Web Font<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>，样式囊括黑体、宋体、楷体与仿宋体，基本能覆盖排版所需。</p><p>如你所见，本站的标题一概用宋体，正文用黑体，文章前后的序语、题跋则用仿宋，行内注释与脚注则分配给了楷体，真可谓物尽其用。可惜的是，Markdown 本身支持的 HTML 标签有限，如果想在排版上做出区别，仍然需要手动指定 CSS 类。</p><p>比如文章前面的序言，我手动指定了 <code>class=&quot;foreword&quot;</code>。但不知为何， 指定 <code>foreword</code> CSS 类之后，无论加几个换行，“<strong>阅读更多</strong>”的都会紧贴着，只能给 <code>foreword</code> 类加上 <code>margin-bottom: 1.2em</code> 强行拉开距离。</p><p>当然，问题仍然存在：<strong>当前几乎没有手机厂商会预装楷体和仿宋</strong>。即便是国产厂商，也只会沿袭苹果、Google 开创的传统，预装几十种英文字体，而预装中文字体者寥寥无几——在社会风气日趋保守的当下，爱国是政治正确，亲美与西化倾向都难免非议，但这一点居然长期以来无人置喙，真乃咄咄怪事。</p><p>扯远了。虽然中文字体远比比英文字体大，但现在的手机动辄 128G 起步，一个 2M 左右的字体所占用的容量，还不如用户随手拍的一张照片大，所以字体的大小已不足以成为阻碍。但目前的状况就是，楷体、仿宋在大部分手机上都只能识别为 Serif，也就是宋体，这点只能看未来能否有国产手机厂商注意并纠正了。</p><h2 id="Gallery"><a href="#Gallery" class="headerlink" title="Gallery"></a>Gallery</h2><p>我行文经常插入大量的照片，如何优雅地展示这些照片自然是必须考虑的事情。</p><p>Minos 自带 <a href="https://miromannino.github.io/Justified-Gallery/">Justified Gallery</a> 插件，官方提供了<a href="http://ppoffice.github.io/hexo-theme-minos/Creating-a-Gallery-in-Minos/">演示页面</a>，效果中规中矩，但实际应用之后才发现，其高度是固定的 120px，横向照片看上去还可以，但纵向照片就太小了。</p><p>参阅 Justified Gallery 的官方文档，打开主题文件夹下面的 <code>/minos/plugins/gallery.ejs</code>，搜索 <code>$(&#39;.justified-gallery&#39;).justifiedGallery();</code>，添加几个参数，将其修改为：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">&#x27;.justified-gallery&#x27;</span>).<span class="title function_">justifiedGallery</span>(&#123;</span><br><span class="line">rowHeight : <span class="number">360</span>, <span class="comment">//照片高度 360px</span></span><br><span class="line">lastRow : <span class="string">&#x27;nojustify&#x27;</span>, <span class="comment">//最后一行不对齐</span></span><br><span class="line">margins : <span class="number">5</span> <span class="comment">//图片间隔 5px</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>重新生成 Hexo，刷新页面，OK。</p><p>Justified Gallery 可以手动调整的所有参数请参考此页面：<a href="https://miromannino.github.io/Justified-Gallery/options-and-events/">Options &amp; Events</a>。<div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none; padding-left: 0;"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px;">1.</span><span style="display: inline; vertical-align: top;">作为老用户，配置 Google Fonts 以后，网站的加载速度真是一言难尽。虽然特殊国情的影响更大，我自己也没有配置国内镜像。</span><a href="#fnref:1" rev="footnote"> ↩</a></li></ol></div></div></p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article-gallery&quot;&gt;&lt;p&gt;Hexo 的主题生态非常贫乏，官方的主题列表看起来有几十页，但其实都是极少数几个主题（如 &lt;a href=&quot;https://theme-next.js.org/&quot;&gt;Next&lt;/a&gt;）的变体，所以颇有些千篇一律。个人不太喜欢 Next 这种太典型的博客风格，让我一种梦回十几年前，博客大爆发时期的错觉。&lt;/p&gt;
&lt;p&gt;我确实懂一些 CSS&amp;#x2F;SCSS，但 Node.js 就一无所知了，要根据 Hexo 的官方文档手撸初一个全新主题出来，肯定吃力不讨好。总之，找了一圈，最后选定了 &lt;a href=&quot;http://ppoffice.github.io/hexo-theme-minos/&quot;&gt;Minos&lt;/a&gt; 作为基础，来日方长，一步一步改造吧。&lt;/p&gt;</summary>
    
    
    
    <category term="玩艺" scheme="https://waxa.design/categories/playground/"/>
    
    <category term="网站" scheme="https://waxa.design/categories/playground/web/"/>
    
    
    <category term="Theme" scheme="https://waxa.design/tags/Theme/"/>
    
    <category term="Hexo" scheme="https://waxa.design/tags/Hexo/"/>
    
    <category term="minos" scheme="https://waxa.design/tags/minos/"/>
    
    <category term="SCSS" scheme="https://waxa.design/tags/SCSS/"/>
    
    <category term="Justified Gallery" scheme="https://waxa.design/tags/Justified-Gallery/"/>
    
    <category term="中文字体" scheme="https://waxa.design/tags/%E4%B8%AD%E6%96%87%E5%AD%97%E4%BD%93/"/>
    
  </entry>
  
  <entry>
    <title>Hexo 后续补充</title>
    <link href="https://waxa.design/playground/web/hexo-updates/"/>
    <id>https://waxa.design/playground/web/hexo-updates/</id>
    <published>2023-05-28T13:36:07.000Z</published>
    <updated>2023-07-13T10:29:41.160Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><div class="foreword">Hexo 用了两天，基本功能差不多弄清楚了。不过也发现一些问题，逐个记录，分享出来，没准能对 Hexo 的其他用户提供一些帮助。</div><span id="more"></span><h2 id="Markdown-支持"><a href="#Markdown-支持" class="headerlink" title="Markdown 支持"></a>Markdown 支持</h2><p>Hexo 对 Markdown 语法的支持尚不完备，比如将内容标记为高亮： <code>==highlight==</code>， Obsidian 已经支持，但 Hexo 尚未跟进。类似的还有 footnote，目前只能通过插件搞定。</p><h3 id="footnote-脚注"><a href="#footnote-脚注" class="headerlink" title="footnote 脚注"></a>footnote 脚注</h3><p>对一个业余文字爱好者来说，注释是免不了要加的。<a href="https://github.com/LouisBarranqueiro/hexo-footnotes">hexo-footnotes</a>  可以为 Hexo 用户提供额外的 footnote 语法支持，直接命令行安装：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-footnotes --save</span><br></pre></td></tr></table></figure><p>安装之后 Hexo 一般可以自动识别，此时在 Markdown 文件中添加注释即可。如果不能识别，则需要在 <code>_config.yml</code> 内手动配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plugins:</span><br><span class="line">  - hexo-footnotes</span><br></pre></td></tr></table></figure><p>footnote 的语法请自行搜索。个人体验下来，目前还有两个问题尚待解决：</p><ol><li><del>如果一条注释包含多个段落，则只有第一个段落会被识别，不知如何指定脚注的起讫范围？</del> 后续段落可以通过缩进来声明脚注的起讫，但仍然有个问题。第一段是纯文本，而后续段落都是 <code>&lt;p&gt;...&lt;/p&gt;</code> 标签，导致第一段与第二段之间缺少段间距。</li><li><del>不知是否与主题 css 存在冲突，脚注序号、内容与返回按钮分成了三行。</del>此问题已经解决，办法是修改 <code>/Hexo/node_modules/hexo-footnotes/src/footnotes.js</code>，搜索 <code>display: inline-block;</code>，删除第二个结果。</li><li>脚注的标记不支持中文，<code>&lt;sup id=&quot;fnref:1&quot;&gt;&lt;a href=&quot;#fn:1&quot; rel=&quot;footnote&quot;&gt;1&lt;/a&gt;&lt;/sup&gt;</code> 正常，<code>[^注一]</code> 则不正常。</li></ol><p>最终效果可以参考这篇文章：<a href="/writings/research/photos-of-luxun">鲁迅照片集</a></p><h3 id="Markdown-与-HTML-标签混用"><a href="#Markdown-与-HTML-标签混用" class="headerlink" title="Markdown 与 HTML 标签混用"></a>Markdown 与 HTML 标签混用</h3><h2 id="内容嵌入"><a href="#内容嵌入" class="headerlink" title="内容嵌入"></a>内容嵌入</h2><h3 id="Youtube-视频"><a href="#Youtube-视频" class="headerlink" title="Youtube 视频"></a>Youtube 视频</h3><p>Wordpress 里面插入 Youtube 视频很简单，网址粘贴进去，自动转换成视频播放界面。与之相比，Obsidian 还能找到 <a href="https://github.com/samwarnick/obsidian-simple-embeds">Simple Embeds</a> 这样的插件，Hexo 简直太不方便了，反正我不怎么想在 Markdown 里面写这样的标签：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% youtube video_id [type] [cookie] %&#125;</span><br></pre></td></tr></table></figure><p>作为互联网的老用户，平台或者软件搞私有标准的危害，我们可是太有体会了。还是希望 Hexo 能在 Markdown 通行标准的基础上发展，不要强推这种换个软件就无法识别的标签。</p><h2 id="子页面"><a href="#子页面" class="headerlink" title="子页面"></a>子页面</h2><p>发现一个奇怪现象：<a href="/about/">关于</a> 页面本来正常，但我想在这个页面下面再挂一份简历，计划的路径是 <code>/about/resume</code>。Hexo 官方没有子页面的信息，所以我就直接在 source 文件夹建了一个 <code>about</code> 子文件夹，然后在里面新增了一个 <code>resume.md</code>。没想到生成之后，这个简历倒是没有问题，主菜单点击关于页面报 403 错误了，令人一头雾水。</p><p>当然解决办法还是有的，将 <code>about.md</code> 移到 <code>about</code> 文件夹，并重命名为 <code>index.md</code>，虽然生成网页之后实际路径其实从 <code>/about.html</code> 变成了 <code>/about/index.html</code>，但这样一来，按照之前的路径访问就没有问题了。</p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article-gallery&quot;&gt;&lt;div class=&quot;foreword&quot;&gt;
Hexo 用了两天，基本功能差不多弄清楚了。不过也发现一些问题，逐个记录，分享出来，没准能对 Hexo 的其他用户提供一些帮助。
&lt;/div&gt;</summary>
    
    
    
    <category term="玩艺" scheme="https://waxa.design/categories/playground/"/>
    
    <category term="网站" scheme="https://waxa.design/categories/playground/web/"/>
    
    
    <category term="Hexo" scheme="https://waxa.design/tags/Hexo/"/>
    
    <category term="Hexo Plugins" scheme="https://waxa.design/tags/Hexo-Plugins/"/>
    
    <category term="Markdown" scheme="https://waxa.design/tags/Markdown/"/>
    
  </entry>
  
  <entry>
    <title>Hexo 的安装与配置</title>
    <link href="https://waxa.design/playground/web/hexo-and-new-blog/"/>
    <id>https://waxa.design/playground/web/hexo-and-new-blog/</id>
    <published>2023-05-27T12:33:19.000Z</published>
    <updated>2023-07-13T10:01:22.550Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>最近计划把自己的<a href="https://kaero.org/">个人网站</a>转移到本地的 NAS 上，但 Wordpress 用了这么多年，确实越来越臃肿，最新的模块化编辑器确实很简单，但主题定制的成本也更高了。所以这次就琢磨着趁机改换门庭，试试其他博客平台。</p><span id="more"></span><p><a href="https://typecho.org/">Typecho</a> 虽然轻量化，但开后台写文章的路数与 Wordpress 并无太大差异，而主题、插件的生态又远不如 Wordpress 繁荣多元。最要命的是，不知是我的 Wordpress 数据包太大，还是 NAS 存在性能瓶颈，总之 Typecho 试着导入好几次，每次都卡在百分之三四十就报错。即便我没有任何其他不满，光这一点就足以杀死该进程了。</p><p>然后就是 <a href="https://hexo.io/">Hexo</a> 了。本地写 Markdown，服务器端一键生成静态文件，这个模式确实简便。我行文经常卡住，拖十天半月实属寻常，拖十几年都没有写完的题目还有好几篇呢……王师北定中原日，一个 <code>hexo g</code> 命令敲下去，痛快！</p><h2 id="安装-Hexo"><a href="#安装-Hexo" class="headerlink" title="安装 Hexo"></a>安装 Hexo</h2><p>参考张大妈上的一篇文章：<a href="https://post.smzdm.com/p/az39o2xp/">在群晖上部署快速简洁且高效的博客框架HEXO</a>，按部就班，顺利完成。只不过仍有一些疑问：</p><ol><li><strong>np日常国内镜像</strong>，安装之后输入 <code>cnpm -v</code> 查看版本，输出的是：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cnpm@9.2.0 (/usr/local/lib/node_modules/cnpm/lib/parse_argv.js)</span><br><span class="line">npm@9.6.7 (/usr/local/lib/node_modules/cnpm/node_modules/npm/index.js)</span><br><span class="line">node@18.12.0 (/volume1/@appstore/Node.js_v18/usr/local/bin/node)</span><br><span class="line">npminstall@7.9.0 </span><br><span class="line">/usr/local/lib/node_modules/cnpm/node_modules/npminstall/lib/index.js)</span><br><span class="line">prefix=/usr/local</span><br><span class="line">linux x64 4.4.180+</span><br><span class="line">registry=https://registry.npmmirror.com</span><br></pre></td></tr></table></figure>看起来已经成功，但实际上有没有生效，我一点拿不准，毕竟 <code>npm install</code> 拉取超时的错误仍旧经常发生；</li><li>原文经常切换普通账号与 root 账号，颇有些应接不暇。在我应该不存在误操作的情况下，如果登录的是普通账号，则无法通过 <code>hexo init blog</code> 命令去建立 Hexo 的安装目录，必须用 root 账号才能完成这一步；</li><li>前一个问题导致，所有与 Hexo 相关的命令都必须通过 root 账号才能操作，不知何解？虽然普通用户也有文件夹的操作权限，映射到本地写 Markdown 并不受影响，但后续还得再研究一下。</li></ol><h2 id="配置-Hexo"><a href="#配置-Hexo" class="headerlink" title="配置 Hexo"></a>配置 Hexo</h2><p>Hexo 的配置比较简单，按照<a href="https://hexo.io/zh-cn/docs/index.html">官方文档</a>操作，基本顺利。不过有几点需要注意：</p><ol><li><strong><code>language</code></strong> 参数，中文用户自然默认设置为 <code>zh-CN</code>，但某些主题会产生奇怪现象。比如 <a href="http://ppoffice.github.io/hexo-theme-minos/">Minos</a> 主题，<code>zh-CN</code> 会导致界面上出现德文，改为小写的 <code>zh-cn</code> 则恢复正常。</li><li><strong><code>permalink</code></strong> 参数，我一度将其设置为 <code>&#39;:categories/:title/&#39;</code>，结果输出为 <code>https://kaerozhi.com/[object object]/posttile/</code>，当时纳闷了半天，后来改作 <code>&#39;:category/:title/&#39;</code> 就正常了。</li><li><strong><code>category_map</code></strong> 参数，官方文档没有具体说明，我将其理解为分类名称与用于链接的别名，然而设置之后似乎没有任何效果。后来查阅<a href="https://paugram.com/coding/hexo-secret-usage.html">资料</a>，发现是我理解错了。我原以为，如果 <code>_config.yml</code> 这么写：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">category_map:</span><br><span class="line">  &#x27;随笔&#x27;: blog</span><br><span class="line">  &#x27;文字&#x27;: writings </span><br><span class="line">  &#x27;游历&#x27;: tours</span><br><span class="line">  &#x27;玩艺&#x27;: playground</span><br><span class="line">  &#x27;观点&#x27;: thoughts</span><br></pre></td></tr></table></figure>然后 Markdown 的 Front-Matter 内配置 <code>categories: writings</code>，那么 Hexo 在前端会将分类显示为 “文字”。但 Hexo 的实际逻辑是，你的 Front-Matter 写作 <code>categories: &#39;文字&#39;</code>，然后链接地址会自动给你转为 <code>https://kaerozhi.com/writings/yourpost</code>。</li><li><code>tag_map</code> 同理。</li></ol><h2 id="从-Wordpress-导入"><a href="#从-Wordpress-导入" class="headerlink" title="从 Wordpress 导入"></a>从 Wordpress 导入</h2><p>Hexo 没有 <code>/wp-admin</code> 这样的后台管理界面，无法通过图形界面导入 Wordpress 数据。虽然后台也可以自行安装，但完全没这个必要。毕竟 Hexo 的设计初衷就不走这条路，既然选择了 Hexo，自然也就不图一个图形界面了。</p><p>我使用的是一个名为 <a href="https://github.com/lonekorean/wordpress-export-to-markdown">wordpress-export-to-markdown</a> （后文简称 WE2M）的脚本，可以将 Wordpress 导出的 xml 转换成每篇文章、页面各自独立的 Markdown 文档集合，用过的图片也可以选择一并下载到本地。即使你只写 Markdown 但不捣鼓 Hexo，这个脚本也值得推荐。</p><p>操作很简单，只要本地安装 Node.js 环境，然后运行以下命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx wordpress-export-to-markdown</span><br></pre></td></tr></table></figure><p>过程中会有几个选项，一般保持默认即可，也可以根据自身需求灵活选择。</p><p>Wordpress 数据包的解析非常快，脚本完成的时间还是取决于需要下载的图片包有多大。脚本结束后，在 Typora、Obsidian 查看导出的 Markdown 文档，一般都能正常显示。</p><p>参阅<a href="https://hexo.io/zh-cn/docs/asset-folders">官方文档</a>，如果 <code>_config.xml</code> 保持默认的资源配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post_asset_folder: false</span><br></pre></td></tr></table></figure><p>则 Hexo 会统一从 <code>/images/</code> 读取图片，那每篇文章都能正常显示。WE2M 默认也会将所有图片下载到 <code>images</code> 文件夹。</p><p>但是，如果和我一样经常在文章里引用大量的照片，那应该也会倾向给每篇文章指定独立的资源文件夹，Hexo 与 WE2M 就没法完美匹配了。</p><h2 id="给每篇文章配置独立资源文件夹"><a href="#给每篇文章配置独立资源文件夹" class="headerlink" title="给每篇文章配置独立资源文件夹"></a>给每篇文章配置独立资源文件夹</h2><p>当然，我这样的强迫症还是免不了作死，如前文所述，我改了 Hexo 的资源配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">post_asset_folder: true</span><br></pre></td></tr></table></figure><p>此时 Hexo 会给每篇文章生成独立的资源文件夹。观众老爷可能要发问：这有什么影响？</p><p>本来不会有什么影响的，但因为 Hexo 的奇异机制，如果你用 <code>![](image.jpg)</code> 在 Markdown 文档中插入图片，图片在文章页面显示正常，但首页却不显示。</p><p>根据官方建议，我们可以安装 <a href="https://github.com/hexojs/hexo-renderer-marked">hexo-renderer-marked</a> 来规避这个问题，如需启用：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">post_asset_folder: true  </span><br><span class="line">marked:  </span><br><span class="line">  prependRoot: true  </span><br><span class="line">  postAsset: true</span><br></pre></td></tr></table></figure><p>启用之后，文章页面和首页都可以正常显示。</p><h2 id="与-Obsidian-协作"><a href="#与-Obsidian-协作" class="headerlink" title="与 Obsidian 协作"></a>与 Obsidian 协作</h2><p>用 Obsidian 直接将 <code>Hexo/source</code> 文件夹作为仓库打开，即便不作任何设置，基本也能完美接管 Hexo 的内容创作部分。</p><p>但因为我们在 Hexo 里面配置了每篇文章生成单独的资源文件夹，与之对应，在 Obsidian 中，我们也需要将文章用到的图片收纳到指定的同名文件夹，这样 Hexo 每次生成静态网站的时候才不需要额外的配置。</p><p>这里要用到一个 Obsidian 的第三方插件 <a href="https://github.com/RainCat1998/obsidian-custom-attachment-location">Custom-Attachment-Location</a>。不知为何，我在第三方插件市场能找到该插件，但无法安装，只能按照以下步骤手动安装：</p><ol><li>在插件的 Github 页面下载最新版的 <code>main.js</code>、<code>manifest.json</code>；</li><li>将以上的两个文件复制到已经建立 Obsidian 仓库的 Hexo 文件夹：<code>Hexo/source/.obsidian/plugins/obsidian-custom-attachment-localtion/</code>；</li><li>最后在 Obsidian 设置界面启用该插件。</li></ol><p>设置很简单，将 Default location for new attachments（默认资源路径）设置为 <code>./$&#123;filename&#125;</code>，插入文章的图片就会自动收纳到与文章同名的子文件夹了。</p><p>还有一点，Obsidian 插入图片时，默认会写作 <code>![[image.jpg]]</code>，但这种格式 Hexo 无法识别，在 Obsidian 的设置界面找到 <code>文件与链接 &gt; 使用 Wiki 链接</code>，将其关闭。再次插入图片，就会变成 Markdown 通用格式 <code>![](image.jpg)</code>了。</p><p>如此一来，Obsidian 与 Hexo 差不多做到无缝接入。</p></div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {        var options = {            selector: '.gallery-item'        };        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);        }</script>]]></content>
    
    
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css&quot; /&gt;&lt;div class=&quot;.article-gallery&quot;&gt;&lt;p&gt;最近计划把自己的&lt;a href=&quot;https://kaero.org/&quot;&gt;个人网站&lt;/a&gt;转移到本地的 NAS 上，但 Wordpress 用了这么多年，确实越来越臃肿，最新的模块化编辑器确实很简单，但主题定制的成本也更高了。所以这次就琢磨着趁机改换门庭，试试其他博客平台。&lt;/p&gt;</summary>
    
    
    
    <category term="玩艺" scheme="https://waxa.design/categories/playground/"/>
    
    <category term="网站" scheme="https://waxa.design/categories/playground/web/"/>
    
    
    <category term="Hexo" scheme="https://waxa.design/tags/Hexo/"/>
    
    <category term="Blog" scheme="https://waxa.design/tags/Blog/"/>
    
    <category term="Hexo Theme" scheme="https://waxa.design/tags/Hexo-Theme/"/>
    
    <category term="Synology" scheme="https://waxa.design/tags/Synology/"/>
    
    <category term="Obsidian" scheme="https://waxa.design/tags/Obsidian/"/>
    
  </entry>
  
</feed>
