<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  
    <meta name="keywords" content="Waxa Design, 蛙夏, kaero, kaero zhi, designer, 自由设计师, blog, design, photography, photographer, chinese, suzhou, 旧体诗, 诗词">
  
  
    <meta name="description" content="傍晚游吴市，因思古人散步，予载山妻，骑小电驴，自署吴散骑常侍，不亦可乎？">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
  <title>用 ComfyUI 修复一张褪色的婚纱照 |  Kaero Zhi</title>
  
    <link rel="apple-touch-icon" sizes="57x57" href="/assets/images/webclip/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/assets/images/webclip/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/assets/images/webclip/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/assets/images/webclip/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/assets/images/webclip/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/assets/images/webclip/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/assets/images/webclip/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/webclip/apple-touch-icon-180x180.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/assets/images/webclip/apple-touch-icon-167x167.png">
  
  
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">
  
  
    <link rel="shortcut icon" href="/assets/images/favicon.png">
  
  
    <link rel="stylesheet" href="/libs/swiper/swiper-bundle.min.css"/>
  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  
<link rel="stylesheet" href="/css/style.css">

  <script src="/libs/jquery/jquery-3.7.0.min.js"></script>
  <script src="/libs/locomotive-scroll/locomotive-scroll.min.js"></script>
  <script>
    (function () {
        var scroll = new LocomotiveScroll();
    })();
  </script>
  <link rel="stylesheet" href="/libs/locomotive-scroll/locomotive-scroll.css"/>
<meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Kaero Zhi" type="application/atom+xml">
</head>


<body class=" post layout-post category-playground tag-ai tag-comfyui tag-婚纱照">
  <div class="main">
    <header id="header" class="my-5">
	<nav class="navbar navbar-expand-md">
		<div class="row container">
			<a class="navbar-brand col-6 col-sm-2 m-0" href="/">
			
				
				<h1>KZ</h1>
			
			</a>
			<div class="navbar-sm col-sm-8 col-0 d-flex justify-content-center m-0">
				<ul class="navbar-nav">
  
    
  <li class="nav-item ">
    <a class="nav-link" href="/categories/photography">影像</a>
  </li>
  
    
  <li class="nav-item ">
    <a class="nav-link" href="/categories/cases">案例</a>
  </li>
  
    
  <li class="nav-item ">
    <a class="nav-link" href="/categories/writings">文字</a>
  </li>
  
    
  <li class="nav-item ">
    <a class="nav-link" href="/categories/tours">游历</a>
  </li>
  
    
  <li class="nav-item ">
    <a class="nav-link" href="/archives">更新</a>
  </li>
  
    
  <li class="nav-item ">
    <a class="nav-link" href="/about">关于</a>
  </li>
  
</ul>
			</div>
			<div class="col-6 col-sm-2 d-flex justify-content-end m-0">
				<button type="button" class="nav-btn" data-bs-toggle="modal" data-bs-target="#modalNavi">
					<span>目次</span>
				</button>
			</div>
			<div class="modal fade m-0 p-0" id="modalNavi">
				<div class="modal-dialog modal-fullscreen">
				  <div class="modal-content bg-dark text-white">
					<header class="modal-header border-0 row container my-5">
						<a class="modal-brand col-2" href="/">
						
							KZ
						
						</a>
						<div class="col-6 col-sm-2 d-flex justify-content-end m-0">
							<button type="button" class="btn-close" data-bs-dismiss="modal">
								<span>目次</span>
							</button>
						</div>
					</header>
					<div class="modal-body row container">
						<ul class="modal-nav">
  
    
  <li class="nav-item ">
    <a class="nav-link" href="/categories/photography">影像</a>
  </li>
  
    
  <li class="nav-item ">
    <a class="nav-link" href="/categories/cases">案例</a>
  </li>
  
    
  <li class="nav-item ">
    <a class="nav-link" href="/categories/writings">文字</a>
  </li>
  
    
  <li class="nav-item ">
    <a class="nav-link" href="/categories/tours">游历</a>
  </li>
  
    
  <li class="nav-item ">
    <a class="nav-link" href="/archives">更新</a>
  </li>
  
    
  <li class="nav-item ">
    <a class="nav-link" href="/about">关于</a>
  </li>
  
</ul>
					</div>
					<footer class="modal-footer justify-content-center mb-5 border-0 row container">					  
						<ul class="social-nav">
    
    <li class="list-inline-item">
      <a class="nav-link bi-twitter" target="_blank" rel="noopener" href="https://twitter.com/kaero"><span>twitter</span></a>
    </li>
    
    <li class="list-inline-item">
      <a class="nav-link bi-douban" target="_blank" rel="noopener" href="https://douban.com/people/kaero/"><span>douban</span></a>
    </li>
    
    <li class="list-inline-item">
      <a class="nav-link bi-instagram" target="_blank" rel="noopener" href="https://www.instagram.com/kaero/"><span>instagram</span></a>
    </li>
    
    <li class="list-inline-item">
      <a class="nav-link bi-flickr" target="_blank" rel="noopener" href="https://flickr.com/kaero/"><span>flickr</span></a>
    </li>
    
    <li class="list-inline-item">
      <a class="nav-link bi-tumblr" target="_blank" rel="noopener" href="https://superkaero.tumblr.com/"><span>tumblr</span></a>
    </li>
    
    <li class="list-inline-item">
      <a class="nav-link bi-pinterest" target="_blank" rel="noopener" href="https://www.pinterest.com/kaero/"><span>pinterest</span></a>
    </li>
    
  </ul>
					</footer>			  
				  </div>
				</div>
			  </div>
		</div>
	</nav>
</header>
    <main>
      <div class="container">
  <article id="post-repaired-an-old-wedding-photo-in-comfyui" class="article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  
  
  <div class="article-inner">
    
    <header class="article-header">
      
        <div class="article-meta">
          <time class="text-gray" datetime="2024-10-26T04:47:00.000Z" itemprop="datePublished">
  2024-10-26
</time>
          
  <div class="article-category">
    <a class="article-category-link" href="/categories/playground/">玩艺</a>
  </div>

        </div>
        
  
    <h1 class="article-title" itemprop="name">
      用 ComfyUI 修复一张褪色的婚纱照
    </h1>
  

        
      
    </header>
    
    
    <div class="article-entry" itemprop="articleBody">
    
      <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/css/lightgallery.min.css" /><div class=".article-gallery"><p>陶小婧年轻的时候脾气爆炸，而且她发脾气的方式很奇怪，当面倒也不怎样，而是偷偷开我的电脑删照片。我们结婚时拍的婚纱照就这样被她销毁了，硬盘上的存档消失不见，实体的相框相册也不知道扔到了哪个垃圾堆。过年回家的时候我特地去了一趟南昌的胜利路步行街，盼着能找到当初拍婚纱的摄影机构，哪怕付费也好，只要能找回存档就足够了，可惜时过境迁，胜利路大变样，那家婚纱摄影公司也不见了。</p>
<p>好在仍有一幅照片保存在我母亲那里，总算不至于让这些意义特殊的照片全数湮灭。2015年买房，母亲夏天过来探视，不远千里从南昌把这幅照片带到了深圳。</p>
<p><a href="image-20241030183144775.png" title="婚纱翻拍，使用 Sony A7M4" class="gallery-item"><img src="image-20241030183144775.png" alt="婚纱翻拍，使用 Sony A7M4"><span class="image-caption">婚纱翻拍，使用 Sony A7M4</span></a></p>
<p>如今又过了快十年，只是经过南昌到深圳、再从深圳到苏州的一路风霜，这幅照片也已经严重褪色，相框也摇摇欲坠，想挂在墙上都有些担心它是不是哪天忽然就散架了。尝试了一下手工修复，总觉得自己技术太差，难以达到满意的程度，于是就想试试 AI 行不行。</p>
<h2 id="comfyui-内嵌 python 版本差异导致的一个常见问题">ComfyUI 内嵌 Python 版本差异导致的一个常见问题</h2>
<p>这里面藏着一个很容易被忽略的坑，即 Python 版本的问题。</p>
<p>我的 Windows 11 已经安装过 Python 3.12，但 ComfyUI 内嵌了一个 Python 在文件夹 <code>ComfyUI/python_embeded</code> 里面，它的版本是 3.11，这就导致安装前置组件的时候，我们打开对应的 Github 链接，会显示对应 Python 不同版本的下载，比如 <a target="_blank" rel="noopener" href="https://github.com/z-mahmud22/Dlib_Windows_Python3.x">DLib</a>：</p>
<p><a href="image-20241026160553215.png" class="gallery-item"><img src="image-20241026160553215.png" alt=""></a></p>
<p>我们下载 <code>dlib-19.24.1-cp311-cp311-win_amd64.whl</code>，会提示无法安装。如果你此时和我一样，下载了 3.12 的对应版本，安装倒是顺利的，但当你开开心心重启 ComfyUI，一打开界面傻眼了，Import Failed！</p>
<p>我不知道有没有其他朋友遇到这样的情况，总之我在这里卡了很久，因为你安装的版本对应的是系统 Python，而不是 ComfyUI 内嵌的 Python。直到偶然注意<a target="_blank" rel="noopener" href="https://www.bilibili.com/read/cv34981174/">有人提示</a>要把这个内嵌 Python 的路径也加入系统变量，才可以安装正确的版本，才终于搞定。</p>
<p>比如我的 ComfyUI 路径是 <code>D:\ComfyUI\</code>，那就要在系统变量里面加入 <code>D:\ComfyUI\python_embeded\Scripts</code>。具体的操作步骤如下：</p>
<ol>
<li>在电脑图标上右键，在弹出菜单中点击「属性」；</li>
<li>在弹出的「系统信息」页点击「高级系统设置」；<br>
<a href="image-20241026161712497.png" title="系统信息页" class="gallery-item"><img src="image-20241026161712497.png" alt="系统信息页"><span class="image-caption">系统信息页</span></a></li>
<li>在打开的「系统属性」页，点击右下角的「环境变量」；<br>
<a href="image-20241026161817692.png" title="系统属性页" class="gallery-item"><img src="image-20241026161817692.png" alt="系统属性页"><span class="image-caption">系统属性页</span></a><br>
4. 在打开的「环境变量」页，双击 Path：<br>
<a href="image-20241026161949171.png" title="环境变量" class="gallery-item"><img src="image-20241026161949171.png" alt="环境变量"><span class="image-caption">环境变量</span></a></li>
<li>点击「新建」，把 ComfyUI 内嵌的 Python，比如我就是上面的 <code>D:\ComfyUI\python_embeded\Scripts</code>，复制进去，点击确定，就 OK 了。<br>
<a href="image-20241026162209617.png" title="编辑环境变量" class="gallery-item"><img src="image-20241026162209617.png" alt="编辑环境变量"><span class="image-caption">编辑环境变量</span></a></li>
</ol>
<p>如此一来，就可以安装正确的 3.11 版本的 Dlib，InsightFace 同理，这样就可以解决节点缺失的问题了。</p>
<h2 id="工作流拆解">工作流拆解</h2>
<p>这幅婚纱照的主要问题是褪色，洋红色保留得很好，但蓝色黄色几乎掉光了。画板也泛黄，而且在相机翻拍之后纹理很明显，放大之后布满粗粝的细节，些许污点问题倒不大。</p>
<h3 id="1-尝试放大，并增加细节">1. 尝试放大，并增加细节</h3>
</div><script src="https://cdn.jsdelivr.net/lightgallery.js/1.0.1/js/lightgallery.min.js"></script><script>if (typeof lightGallery !== 'undefined') {
        var options = {
            selector: '.gallery-item'
        };
        lightGallery(document.getElementsByClassName('.article-gallery')[0], options);
        }</script>
    </div>
    <footer class="article-footer">
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/AI/" rel="tag">AI</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ComfyUI/" rel="tag">ComfyUI</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%A9%9A%E7%BA%B1%E7%85%A7/" rel="tag">婚纱照</a></li></ul>

      
      <div class="artile-comments">
        <script src="https://giscus.app/client.js"
            data-repo="kaerozhi/waxamedia"
            data-repo-id="R_kgDOJ8B_JQ"
            data-category="Announcements"
            data-category-id="DIC_kwDOJ8B_Jc4ChHzF"
            data-mapping="pathname"
            data-strict="0"
            data-reactions-enabled="0"
            data-emit-metadata="0"
            data-input-position="top"
            data-theme="noborder_light"
            data-lang="zh-CN"
            crossorigin="anonymous"
            async>
        </script>
      </div>
      
    </footer>
  </div>
  
  
    
<nav class="article-nav pt-4 mt-3" id="article-nav">
  
    <a href="/playground/ai/flux-first-experience/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">前一篇</strong>
      <div class="article-nav-title">
        
          Flux 初体验
        
      </div>
    </a>
  
  
    <a href="/tours/linwudong-and-mingyuewan/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">后一篇</strong>
      <div class="article-nav-title">林屋洞与明月湾</div>
    </a>
  
</nav>


  
</article>
</div>
    </main>
    <footer class="footer pt-4 mt-5">
  <div class="container">
    <div class="py-3">
      <div class="row justify-content-between">
        <div class="footer-brand col-lg-6 mb-5">
          
          <h1>Kaero Zhi</h1>
          
          <p class="mb-4">傍晚游吴市，因思古人散步，予载山妻，骑小电驴，自署吴散骑常侍，不亦可乎？</p>
          <ul class="social-nav list-inline">
    
    <li class="list-inline-item">
      <a class="nav-link bi-twitter" target="_blank" rel="noopener" href="https://twitter.com/kaero"><span>twitter</span></a>
    </li>
    
    <li class="list-inline-item">
      <a class="nav-link bi-douban" target="_blank" rel="noopener" href="https://douban.com/people/kaero/"><span>douban</span></a>
    </li>
    
    <li class="list-inline-item">
      <a class="nav-link bi-instagram" target="_blank" rel="noopener" href="https://www.instagram.com/kaero/"><span>instagram</span></a>
    </li>
    
    <li class="list-inline-item">
      <a class="nav-link bi-flickr" target="_blank" rel="noopener" href="https://flickr.com/kaero/"><span>flickr</span></a>
    </li>
    
    <li class="list-inline-item">
      <a class="nav-link bi-tumblr" target="_blank" rel="noopener" href="https://superkaero.tumblr.com/"><span>tumblr</span></a>
    </li>
    
    <li class="list-inline-item">
      <a class="nav-link bi-pinterest" target="_blank" rel="noopener" href="https://www.pinterest.com/kaero/"><span>pinterest</span></a>
    </li>
    
  </ul>
        </div>
        <div class="col-lg-4">
          <h5>友情链接</h5>
          <ul class="list-inline">
            
              <li class="list-inline-item">
                <a href="https://zesen.net/" title="泽森" target="_blank" rel="noopener">泽森</a>
              </li>
            
              <li class="list-inline-item">
                <a href="https://andersnoren.se/" title="Anders Norén" target="_blank" rel="noopener">Anders Norén</a>
              </li>
            
              <li class="list-inline-item">
                <a href="https://dlanham.com/" title="David Lanham" target="_blank" rel="noopener">David Lanham</a>
              </li>
            
              <li class="list-inline-item">
                <a href="https://acorn.imaging.xin/" title="Acorn" target="_blank" rel="noopener">Acorn</a>
              </li>
            
              <li class="list-inline-item">
                <a href="https://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a>
              </li>
            
              <li class="list-inline-item">
                <a href="https://duoyu.wang/" title="To Base64" target="_blank" rel="noopener">To Base64</a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
    <hr class="hr" style="opacity: .25;">
    <div class="pt-3 pb-5">
      <ul class="list-inline mb-0 text-center">
        <li class="list-inline-item">&copy; 2025 Kaero Zhi</li>
        
        <li class="list-inline-item">Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></li>
        <li class="list-inline-item">Designer <a href="https://kaerozhi.com" target="_blank">Kaero Zhi</a></li>
      </ul>
    </div>
  </div>
</footer>
  </div>
  <script src="/libs/feather/feather.min.js"></script>
<script src="/libs/lazysizes/lazysizes.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>



	<!-- Swiper JS -->
	<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
	<!-- Initialize Swiper -->
	<script>
		var swiper1 = new Swiper(".oneSwiper", {
			slidesPerView: "auto",
			centeredSlides: true,
			spaceBetween: 30,
            effect: 'fade',
            autoplay: {
                delay: 2500,
                disableOnInteraction: false,
            },
			pagination: {
				el: ".swiper-pagination",
				clickable: true,
			},
    });
	</script>
    <!-- Initialize Swiper -->
    <script>
        var swiper2 = new Swiper(".article-photos-swiper", {
			slidesPerView: "auto",
            spaceBetween: 30,
            centeredSlides: true,
            effect: 'fade',
            autoplay: {
                delay: 3500,
                disableOnInteraction: false,
            },
            pagination: {
                el: ".swiper-pagination",
                dynamicBullets: true,
            },
        });
    </script>



  <script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
  <script>
      (function ($) {
          $(document).ready(function () {
              if (typeof($.fn.lightGallery) === 'function') {
                  $('.article').lightGallery({ selector: '.gallery-item' });
              }
              if (typeof($.fn.justifiedGallery) === 'function') {
                  $('.justified-gallery > p > .gallery-item').unwrap();
                  $('.justified-gallery').justifiedGallery({
                      rowHeight : 480,
                      lastRow : 'justify',
                      margins : 10
                  });
              }
          });
      })(jQuery);
  </script>



<script src="/js/script.js"></script>


    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-MC9D4W0FB6"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'G-MC9D4W0FB6');
    </script>
    <!-- End Google Analytics -->

</body>
</html>